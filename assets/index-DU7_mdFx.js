var Ja=Object.defineProperty;var Qa=(t,e,n)=>e in t?Ja(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var jn=(t,e,n)=>Qa(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();const Ya="1.30.1",Za="1.50.0",eu={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class $s extends Error{}class Us extends $s{constructor(e,n){super(e),this.code=n,this.type=eu[n]??"ServerError"}}class tu extends $s{constructor(e,n,r){super(e),this.status=n,this.statusText=r}}var Ms=t=>{throw TypeError(t)},mi=(t,e,n)=>e.has(t)||Ms("Cannot "+n),ae=(t,e,n)=>(mi(t,e,"read from private field"),n?n.call(t):e.get(t)),Ft=(t,e,n)=>e.has(t)?Ms("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),wn=(t,e,n,r)=>(mi(t,e,"write to private field"),e.set(t,n),n),Bs=(t,e,n)=>(mi(t,e,"access private method"),n),nu=(t,e,n,r)=>({set _(i){wn(t,e,i)},get _(){return ae(t,e,r)}}),Ct,Pn,pt,Kt,zn,Xt,wr,Ps,Rs;function ru(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const iu={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class su{constructor(e,n={}){if(Ft(this,wr),Ft(this,Ct,0),Ft(this,Pn,0),Ft(this,pt,null),Ft(this,Kt,null),Ft(this,zn,new Set),Ft(this,Xt,new Map),this.endpoint=e,this.options={...iu,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=ru(this.endpoint))}async makeRequest(e,n,r){const i=await Bs(this,wr,Ps).call(this);return new Promise((s,l)=>{wn(this,Ct,ae(this,Ct)+1),ae(this,Xt).set(ae(this,Ct),{resolve:s,reject:l,timeout:setTimeout(()=>{ae(this,Xt).delete(ae(this,Ct)),l(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r==null||r.addEventListener("abort",()=>{ae(this,Xt).delete(ae(this,Ct)),l(r.reason)}),i.send(JSON.stringify({jsonrpc:"2.0",id:ae(this,Ct),method:e,params:n}))}).then(({error:s,result:l})=>{if(s)throw new Us(s.message,s.code);return l})}async subscribe(e){const n=new ou(e);return ae(this,zn).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}Ct=new WeakMap;Pn=new WeakMap;pt=new WeakMap;Kt=new WeakMap;zn=new WeakMap;Xt=new WeakMap;wr=new WeakSet;Ps=function(){return ae(this,Kt)?ae(this,Kt):(wn(this,Kt,new Promise(t=>{var e;(e=ae(this,pt))==null||e.close(),wn(this,pt,new this.options.WebSocketConstructor(this.endpoint)),ae(this,pt).addEventListener("open",()=>{wn(this,Pn,0),t(ae(this,pt))}),ae(this,pt).addEventListener("close",()=>{nu(this,Pn)._++,ae(this,Pn)<=this.options.maxReconnects&&setTimeout(()=>{Bs(this,wr,Rs).call(this)},this.options.reconnectTimeout)}),ae(this,pt).addEventListener("message",({data:n})=>{let r;try{r=JSON.parse(n)}catch(i){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:i}));return}if("id"in r&&r.id!=null&&ae(this,Xt).has(r.id)){const{resolve:i,timeout:s}=ae(this,Xt).get(r.id);clearTimeout(s),i(r)}else if("params"in r){const{params:i}=r;ae(this,zn).forEach(s=>{s.subscriptionId===i.subscription&&i.subscription===s.subscriptionId&&s.onMessage(i.result)})}})})),ae(this,Kt))};Rs=async function(){var t;return(t=ae(this,pt))==null||t.close(),wn(this,Kt,null),Promise.allSettled([...ae(this,zn)].map(e=>e.subscribe(this)))};class ou{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[n]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const n=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=n)}}var Ds=t=>{throw TypeError(t)},bi=(t,e,n)=>e.has(t)||Ds("Cannot "+n),De=(t,e,n)=>(bi(t,e,"read from private field"),n?n.call(t):e.get(t)),Zn=(t,e,n)=>e.has(t)?Ds("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Jr=(t,e,n,r)=>(bi(t,e,"write to private field"),e.set(t,n),n),au=(t,e,n)=>(bi(t,e,"access private method"),n),Mn,Ge,Rn,Qr,Ns;class uu{constructor(e){Zn(this,Qr),Zn(this,Mn,0),Zn(this,Ge),Zn(this,Rn),Jr(this,Ge,e)}fetch(e,n){const r=De(this,Ge).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,n)}async request(e){var i,s;Jr(this,Mn,De(this,Mn)+1);const n=await this.fetch(((i=De(this,Ge).rpc)==null?void 0:i.url)??De(this,Ge).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ya,"Client-Target-Api-Version":Za,"Client-Request-Method":e.method,...(s=De(this,Ge).rpc)==null?void 0:s.headers},body:JSON.stringify({jsonrpc:"2.0",id:De(this,Mn),method:e.method,params:e.params})});if(!n.ok)throw new tu(`Unexpected status code: ${n.status}`,n.status,n.statusText);const r=await n.json();if("error"in r&&r.error!=null)throw new Us(r.error.message,r.error.code);return r.result}async subscribe(e){const n=await au(this,Qr,Ns).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{n()})),async()=>!!await n()}}Mn=new WeakMap;Ge=new WeakMap;Rn=new WeakMap;Qr=new WeakSet;Ns=function(){var t;if(!De(this,Rn)){const e=De(this,Ge).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");Jr(this,Rn,new su(((t=De(this,Ge).websocket)==null?void 0:t.url)??De(this,Ge).url,{WebSocketConstructor:e,...De(this,Ge).websocket}))}return De(this,Rn)};function cu(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function lu(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Fs(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Yr(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function Ls(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Zr(t){if(!Array.isArray(t))throw new Error("array expected")}function Vs(t,e){if(!Fs(!0,e))throw new Error(`${t}: array of strings expected`)}function du(t,e){if(!Fs(!1,e))throw new Error(`${t}: array of numbers expected`)}function fu(...t){const e=s=>s,n=(s,l)=>a=>s(l(a)),r=t.map(s=>s.encode).reduceRight(n,e),i=t.map(s=>s.decode).reduce(n,e);return{encode:r,decode:i}}function hu(t){const e=typeof t=="string"?t.split(""):t,n=e.length;Vs("alphabet",e);const r=new Map(e.map((i,s)=>[i,s]));return{encode:i=>(Zr(i),i.map(s=>{if(!Number.isSafeInteger(s)||s<0||s>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${s}". Allowed: ${t}`);return e[s]})),decode:i=>(Zr(i),i.map(s=>{Yr("alphabet.decode",s);const l=r.get(s);if(l===void 0)throw new Error(`Unknown letter: "${s}". Allowed: ${t}`);return l}))}}function pu(t=""){return Yr("join",t),{encode:e=>(Vs("join.decode",e),e.join(t)),decode:e=>(Yr("join.decode",e),e.split(t))}}function Ki(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Zr(t),!t.length)return[];let r=0;const i=[],s=Array.from(t,a=>{if(Ls(a),a<0||a>=e)throw new Error(`invalid integer: ${a}`);return a}),l=s.length;for(;;){let a=0,h=!0;for(let y=r;y<l;y++){const p=s[y],v=e*a,A=v+p;if(!Number.isSafeInteger(A)||v/e!==a||A-p!==v)throw new Error("convertRadix: carry overflow");const E=A/n;a=A%n;const I=Math.floor(E);if(s[y]=I,!Number.isSafeInteger(I)||I*n+a!==A)throw new Error("convertRadix: carry overflow");if(h)I?h=!1:r=y;else continue}if(i.push(a),h)break}for(let a=0;a<t.length-1&&t[a]===0;a++)i.push(0);return i.reverse()}function gu(t){Ls(t);const e=2**8;return{encode:n=>{if(!lu(n))throw new Error("radix.encode input should be Uint8Array");return Ki(Array.from(n),e,t)},decode:n=>(du("radix.decode",n),Uint8Array.from(Ki(n,t,e)))}}const mu=t=>fu(gu(58),hu(t),pu("")),Gs=mu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Sn=t=>Gs.encode(t),tn=t=>Gs.decode(t);function ge(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const Ur=8192;function re(t){if(t.length<Ur)return btoa(String.fromCharCode(...t));let e="";for(var n=0;n<t.length;n+=Ur){const r=t.slice(n,n+Ur);e+=String.fromCharCode(...r)}return btoa(e)}function yi(t){var i;const e=t.startsWith("0x")?t.slice(2):t,n=e.length%2===0?e:`0${e}`,r=((i=n.match(/[0-9a-fA-F]{2}/g))==null?void 0:i.map(s=>parseInt(s,16)))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(r)}function Rt(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function zs(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,r)=>t.slice(r*e,(r+1)*e))}function vr(t){const e=[];let n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function bu(t){let e=0,n=0,r=0;for(;;){const i=t[r];if(r+=1,e|=(i&127)<<n,(i&128)===0)break;n+=7}return{value:e,length:r}}class yu{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){const e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){const e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){const n=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,n,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e),{value:r,length:i}=bu(n);return this.shift(i),r}readVec(e){const n=this.readULEB(),r=[];for(let i=0;i<n;i++)r.push(e(this,i,n));return r}}function wu(t,e){switch(e){case"base58":return Sn(t);case"base64":return re(t);case"hex":return Rt(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function wi(t,e=["<",">"]){const[n,r]=e,i=[];let s="",l=0;for(let a=0;a<t.length;a++){const h=t[a];if(h===n&&l++,h===r&&l--,l===0&&h===","){i.push(s.trim()),s="";continue}s+=h}return i.push(s.trim()),i}class vu{constructor({initialSize:e=1024,maxSize:n=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=n,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const n=this.bytePosition+e;if(n>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(n>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=r;const i=new ArrayBuffer(this.size);new Uint8Array(i).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(i)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return Mr(BigInt(e),8).forEach(n=>this.write8(n)),this}write128(e){return Mr(BigInt(e),16).forEach(n=>this.write8(n)),this}write256(e){return Mr(BigInt(e),32).forEach(n=>this.write8(n)),this}writeULEB(e){return vr(e).forEach(n=>this.write8(n)),this}writeVec(e,n){return this.writeULEB(e.length),Array.from(e).forEach((r,i)=>n(this,r,i,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return wu(this.toBytes(),e)}}function Mr(t,e){const n=new Uint8Array(e);let r=0;for(;t>0;)n[r]=Number(t%BigInt(256)),t=t/BigInt(256),r+=1;return n}var Ws=t=>{throw TypeError(t)},qs=(t,e,n)=>e.has(t)||Ws("Cannot "+n),ze=(t,e,n)=>(qs(t,e,"read from private field"),n?n.call(t):e.get(t)),Ir=(t,e,n)=>e.has(t)?Ws("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Er=(t,e,n,r)=>(qs(t,e,"write to private field"),e.set(t,n),n),pn,Bn,sr,$t;const Iu=class Ks{constructor(e){Ir(this,pn),Ir(this,Bn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Er(this,pn,e.write),Er(this,Bn,e.serialize??((n,r)=>{const i=new vu({initialSize:this.serializedSize(n)??void 0,...r});return ze(this,pn).call(this,n,i),i.toBytes()})),this.validate=e.validate??(()=>{})}write(e,n){this.validate(e),ze(this,pn).call(this,e,n)}serialize(e,n){return this.validate(e),new Eu(this,ze(this,Bn).call(this,e,n))}parse(e){const n=new yu(e);return this.read(n)}fromHex(e){return this.parse(yi(e))}fromBase58(e){return this.parse(tn(e))}fromBase64(e){return this.parse(ge(e))}transform({name:e,input:n,output:r,validate:i}){return new Ks({name:e??this.name,read:s=>r?r(this.read(s)):this.read(s),write:(s,l)=>ze(this,pn).call(this,n?n(s):s,l),serializedSize:s=>this.serializedSize(n?n(s):s),serialize:(s,l)=>ze(this,Bn).call(this,n?n(s):s,l),validate:s=>{i==null||i(s),this.validate(n?n(s):s)}})}};pn=new WeakMap;Bn=new WeakMap;let Ze=Iu;const Xs=Symbol.for("@mysten/serialized-bcs");function On(t){return!!t&&typeof t=="object"&&t[Xs]===!0}class Eu{constructor(e,n){Ir(this,sr),Ir(this,$t),Er(this,sr,e),Er(this,$t,n)}get[Xs](){return!0}toBytes(){return ze(this,$t)}toHex(){return Rt(ze(this,$t))}toBase64(){return re(ze(this,$t))}toBase58(){return Sn(ze(this,$t))}parse(){return ze(this,sr).parse(ze(this,$t))}}sr=new WeakMap;$t=new WeakMap;function Sr({size:t,...e}){return new Ze({...e,serializedSize:()=>t})}function Br({readMethod:t,writeMethod:e,...n}){return Sr({...n,read:r=>r[t](),write:(r,i)=>i[e](r),validate:r=>{var i;if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);(i=n.validate)==null||i.call(n,r)}})}function Pr({readMethod:t,writeMethod:e,...n}){return Sr({...n,read:r=>r[t](),write:(r,i)=>i[e](BigInt(r)),validate:r=>{var s;const i=BigInt(r);if(i<0||i>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${i}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,i)}})}function Su({serialize:t,...e}){const n=new Ze({...e,serialize:t,write:(r,i)=>{for(const s of n.serialize(r).toBytes())i.write8(s)}});return n}function Ou({toBytes:t,fromBytes:e,...n}){return new Ze({...n,read:r=>{const i=r.readULEB(),s=r.readBytes(i);return e(s)},write:(r,i)=>{const s=t(r);i.writeULEB(s.length);for(let l=0;l<s.length;l++)i.write8(s[l])},serialize:r=>{const i=t(r),s=vr(i.length),l=new Uint8Array(s.length+i.length);return l.set(s,0),l.set(i,s.length),l},validate:r=>{var i;if(typeof r!="string")throw new TypeError(`Invalid ${n.name} value: ${r}. Expected string`);(i=n.validate)==null||i.call(n,r)}})}function xu(t){let e=null;function n(){return e||(e=t()),e}return new Ze({name:"lazy",read:r=>n().read(r),serializedSize:r=>n().serializedSize(r),write:(r,i)=>n().write(r,i),serialize:(r,i)=>n().serialize(r,i).toBytes()})}const c={u8(t){return Br({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return Br({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return Br({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return Pr({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return Pr({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return Pr({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Sr({name:"bool",size:1,read:e=>e.read8()===1,write:(e,n)=>n.write8(e?1:0),...t,validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return Su({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(vr(e)),...t})},bytes(t,e){return Sr({name:`bytes[${t}]`,size:t,read:n=>n.readBytes(t),write:(n,r)=>{const i=new Uint8Array(n);for(let s=0;s<t;s++)r.write8(i[s]??0)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},byteVector(t){return new Ze({name:"bytesVector",read:e=>{const n=e.readULEB();return e.readBytes(n)},write:(e,n)=>{const r=new Uint8Array(e);n.writeULEB(r.length);for(let i=0;i<r.length;i++)n.write8(r[i]??0)},...t,serializedSize:e=>{const n="length"in e?e.length:null;return n==null?null:vr(n).length+n},validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return Ou({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,n){return new Ze({name:`${e.name}[${t}]`,read:r=>{const i=new Array(t);for(let s=0;s<t;s++)i[s]=e.read(r);return i},write:(r,i)=>{for(const s of r)e.write(s,i)},...n,validate:r=>{var i;if((i=n==null?void 0:n.validate)==null||i.call(n,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},option(t){return c.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new Ze({name:`vector<${t.name}>`,read:n=>{const r=n.readULEB(),i=new Array(r);for(let s=0;s<r;s++)i[s]=t.read(n);return i},write:(n,r)=>{r.writeULEB(n.length);for(const i of n)t.write(i,r)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(t,e){return new Ze({name:`(${t.map(n=>n.name).join(", ")})`,serializedSize:n=>{let r=0;for(let i=0;i<t.length;i++){const s=t[i].serializedSize(n[i]);if(s==null)return null;r+=s}return r},read:n=>{const r=[];for(const i of t)r.push(i.read(n));return r},write:(n,r)=>{for(let i=0;i<t.length;i++)t[i].write(n[i],r)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${n.length}`)}})},struct(t,e,n){const r=Object.entries(e);return new Ze({name:t,serializedSize:i=>{let s=0;for(const[l,a]of r){const h=a.serializedSize(i[l]);if(h==null)return null;s+=h}return s},read:i=>{const s={};for(const[l,a]of r)s[l]=a.read(i);return s},write:(i,s)=>{for(const[l,a]of r)a.write(i[l],s)},...n,validate:i=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`)}})},enum(t,e,n){const r=Object.entries(e);return new Ze({name:t,read:i=>{const s=i.readULEB(),l=r[s];if(!l)throw new TypeError(`Unknown value ${s} for enum ${t}`);const[a,h]=l;return{[a]:(h==null?void 0:h.read(i))??!0,$kind:a}},write:(i,s)=>{const[l,a]=Object.entries(i).filter(([h])=>Object.hasOwn(e,h))[0];for(let h=0;h<r.length;h++){const[y,p]=r[h];if(y===l){s.writeULEB(h),p==null||p.write(a,s);return}}},...n,validate:i=>{var a;if((a=n==null?void 0:n.validate)==null||a.call(n,i),typeof i!="object"||i==null)throw new TypeError(`Expected object, found ${typeof i}`);const s=Object.keys(i).filter(h=>i[h]!==void 0&&Object.hasOwn(e,h));if(s.length!==1)throw new TypeError(`Expected object with one key, but found ${s.length} for type ${t}}`);const[l]=s;if(!Object.hasOwn(e,l))throw new TypeError(`Invalid enum variant ${l}`)}})},map(t,e){return c.vector(c.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n=>[...n.entries()],output:n=>{const r=new Map;for(const[i,s]of n)r.set(i,s);return r}})},lazy(t){return xu(t)}};var Hs=t=>{throw TypeError(t)},Js=(t,e,n)=>e.has(t)||Hs("Cannot "+n),Ue=(t,e,n)=>(Js(t,e,"read from private field"),e.get(t)),Xi=(t,e,n)=>e.has(t)?Hs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Hi=(t,e,n,r)=>(Js(t,e,"write to private field"),e.set(t,n),n),gn,Be;const ku=class Qs{constructor({prefix:e,cache:n}={}){Xi(this,gn),Xi(this,Be),Hi(this,gn,e??[]),Hi(this,Be,n??new Map)}read(e,n){const r=[Ue(this,gn),...e].join(":");if(Ue(this,Be).has(r))return Ue(this,Be).get(r);const i=n();return Ue(this,Be).set(r,i),typeof i=="object"&&i!==null&&"then"in i?Promise.resolve(i).then(s=>(Ue(this,Be).set(r,s),s)).catch(s=>{throw Ue(this,Be).delete(r),s}):i}clear(e){const n=[...Ue(this,gn),...e??[]].join(":");if(!n){Ue(this,Be).clear();return}for(const r of Ue(this,Be).keys())r.startsWith(n)&&Ue(this,Be).delete(r)}scope(e){return new Qs({prefix:[...Ue(this,gn),...Array.isArray(e)?e:[e]],cache:Ue(this,Be)})}};gn=new WeakMap;Be=new WeakMap;let Tu=ku;class Ys{constructor({network:e}){this.cache=new Tu,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(n=>{if("experimental_asClientExtension"in n){const{name:r,register:i}=n.experimental_asClientExtension();return[r,{value:i(this)}]}return[n.name,{value:n.register(this)}]})))}}const Zs=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,eo=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,ju=235;function _u(t){return t.length>ju?!1:t.includes("@")?Zs.test(t):eo.test(t)}function Au(t,e="at"){const n=t.toLowerCase();let r;if(n.includes("@")){if(!Zs.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[i,s]=n.split("@");r=[...i?i.split("."):[],s]}else{if(!eo.test(n))throw new Error(`Invalid SuiNS name ${t}`);r=n.split(".").slice(0,-1)}return e==="dot"?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}const Cu=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,$u=/^\d+$/,Uu=64,Mu="/",Bu=t=>{const e=t.split(Mu);if(e.length<2||e.length>3)return!1;const[n,r,i]=e;return i!==void 0&&!$u.test(i)||!_u(n)?!1:Cu.test(r)&&r.length<Uu},Pu=32;function Ji(t){try{return tn(t).length===Pu}catch{return!1}}const jr=32;function gt(t){return Du(t)&&Nu(t)===jr}function er(t){return gt(t)}function Ru(t){return t.includes("::")?vi(t):t}function vi(t){const[e,n]=t.split("::"),r=Bu(e),i=t.slice(e.length+n.length+4),s=i.includes("<")?i.slice(0,i.indexOf("<")):i,l=i.includes("<")?wi(i.slice(i.indexOf("<")+1,i.lastIndexOf(">"))).map(a=>Ru(a.trim())):[];return{address:r?e:ee(e),module:n,name:s,typeParams:l}}function ei(t){const{address:e,module:n,name:r,typeParams:i}=typeof t=="string"?vi(t):t,s=(i==null?void 0:i.length)>0?`<${i.map(l=>typeof l=="string"?l:ei(l)).join(",")}>`:"";return`${e}::${n}::${r}${s}`}function ee(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(jr*2,"0")}`}function yt(t,e=!1){return ee(t,e)}function Du(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function Nu(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const Fu=/^vector<(.+)>$/,Lu=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let Wn=class mn{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(Fu);if(r)return{vector:mn.parseFromStr(r[1],n)};const i=e.match(Lu);if(i)return{struct:{address:n?ee(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:mn.parseStructTypeArgs(i[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return wi(e).map(r=>mn.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${mn.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(mn.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}};function Vu(t){return c.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Gu(t){return c.enum("Option",{None:null,Some:t})}const ie=c.bytes(jr).transform({validate:t=>{const e=typeof t=="string"?t:Rt(t);if(!e||!gt(ee(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?yi(ee(t)):t,output:t=>ee(Rt(t))}),We=c.vector(c.u8()).transform({name:"ObjectDigest",input:t=>tn(t),output:t=>Sn(new Uint8Array(t)),validate:t=>{if(tn(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Pe=c.struct("SuiObjectRef",{objectId:ie,version:c.u64(),digest:We}),to=c.struct("SharedObjectRef",{objectId:ie,initialSharedVersion:c.u64(),mutable:c.bool()}),no=c.enum("ObjectArg",{ImmOrOwnedObject:Pe,SharedObject:to,Receiving:Pe}),Ht=c.enum("Owner",{AddressOwner:ie,ObjectOwner:ie,Shared:c.struct("Shared",{initialSharedVersion:c.u64()}),Immutable:null,ConsensusV2:c.struct("ConsensusV2",{authenticator:c.enum("Authenticator",{SingleOwner:ie}),startVersion:c.u64()})}),ro=c.enum("CallArg",{Pure:c.struct("Pure",{bytes:c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})}),Object:no}),Ii=c.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:c.lazy(()=>Ii),struct:c.lazy(()=>co),u16:null,u32:null,u256:null}),Ei=Ii.transform({input:t=>typeof t=="string"?Wn.parseFromStr(t,!0):t,output:t=>Wn.tagToString(t)}),Qe=c.enum("Argument",{GasCoin:null,Input:c.u16(),Result:c.u16(),NestedResult:c.tuple([c.u16(),c.u16()])}),io=c.struct("ProgrammableMoveCall",{package:ie,module:c.string(),function:c.string(),typeArguments:c.vector(Ei),arguments:c.vector(Qe)}),so=c.enum("Command",{MoveCall:io,TransferObjects:c.struct("TransferObjects",{objects:c.vector(Qe),address:Qe}),SplitCoins:c.struct("SplitCoins",{coin:Qe,amounts:c.vector(Qe)}),MergeCoins:c.struct("MergeCoins",{destination:Qe,sources:c.vector(Qe)}),Publish:c.struct("Publish",{modules:c.vector(c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})),dependencies:c.vector(ie)}),MakeMoveVec:c.struct("MakeMoveVec",{type:Gu(Ei).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:c.vector(Qe)}),Upgrade:c.struct("Upgrade",{modules:c.vector(c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})),dependencies:c.vector(ie),package:ie,ticket:Qe})}),oo=c.struct("ProgrammableTransaction",{inputs:c.vector(ro),commands:c.vector(so)}),ao=c.enum("TransactionKind",{ProgrammableTransaction:oo,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),uo=c.enum("TransactionExpiration",{None:null,Epoch:Vu()}),co=c.struct("StructTag",{address:ie,module:c.string(),name:c.string(),typeParams:c.vector(Ii)}),lo=c.struct("GasData",{payment:c.vector(Pe),owner:ie,price:c.u64(),budget:c.u64()}),fo=c.struct("TransactionDataV1",{kind:ao,sender:ie,gasData:lo,expiration:uo}),ho=c.enum("TransactionData",{V1:fo}),po=c.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),go=c.enum("IntentVersion",{V0:null}),mo=c.enum("AppId",{Sui:null}),bo=c.struct("Intent",{scope:po,version:go,appId:mo});function yo(t){return c.struct(`IntentMessage<${t.name}>`,{intent:bo,value:t})}const wo=c.enum("CompressedSignature",{ED25519:c.fixedArray(64,c.u8()),Secp256k1:c.fixedArray(64,c.u8()),Secp256r1:c.fixedArray(64,c.u8()),ZkLogin:c.vector(c.u8())}),vo=c.enum("PublicKey",{ED25519:c.fixedArray(32,c.u8()),Secp256k1:c.fixedArray(33,c.u8()),Secp256r1:c.fixedArray(33,c.u8()),ZkLogin:c.vector(c.u8())}),Io=c.struct("MultiSigPkMap",{pubKey:vo,weight:c.u8()}),Eo=c.struct("MultiSigPublicKey",{pk_map:c.vector(Io),threshold:c.u16()}),zu=c.struct("MultiSig",{sigs:c.vector(wo),bitmap:c.u16(),multisig_pk:Eo}),Wu=c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))}),So=c.struct("SenderSignedTransaction",{intentMessage:yo(ho),txSignatures:c.vector(Wu)}),qu=c.vector(So,{name:"SenderSignedData"}),Ku=c.struct("PasskeyAuthenticator",{authenticatorData:c.vector(c.u8()),clientDataJson:c.string(),userSignature:c.vector(c.u8())}),Xu=c.enum("PackageUpgradeError",{UnableToFetchPackage:c.struct("UnableToFetchPackage",{packageId:ie}),NotAPackage:c.struct("NotAPackage",{objectId:ie}),IncompatibleUpgrade:null,DigestDoesNotMatch:c.struct("DigestDoesNotMatch",{digest:c.vector(c.u8())}),UnknownUpgradePolicy:c.struct("UnknownUpgradePolicy",{policy:c.u8()}),PackageIDDoesNotMatch:c.struct("PackageIDDoesNotMatch",{packageId:ie,ticketId:ie})}),Hu=c.struct("ModuleId",{address:ie,name:c.string()}),Qi=c.struct("MoveLocation",{module:Hu,function:c.u16(),instruction:c.u16(),functionName:c.option(c.string())}),Ju=c.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:c.struct("IndexOutOfBounds",{idx:c.u16()}),SecondaryIndexOutOfBounds:c.struct("SecondaryIndexOutOfBounds",{resultIdx:c.u16(),secondaryIdx:c.u16()}),InvalidResultArity:c.struct("InvalidResultArity",{resultIdx:c.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Qu=c.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Yu=c.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:c.struct("MoveObjectTooBig",{objectSize:c.u64(),maxObjectSize:c.u64()}),MovePackageTooBig:c.struct("MovePackageTooBig",{objectSize:c.u64(),maxObjectSize:c.u64()}),CircularObjectOwnership:c.struct("CircularObjectOwnership",{object:ie}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:c.option(Qi),MoveAbort:c.tuple([Qi,c.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:c.struct("CommandArgumentError",{argIdx:c.u16(),kind:Ju}),TypeArgumentError:c.struct("TypeArgumentError",{argumentIdx:c.u16(),kind:Qu}),UnusedValueWithoutDrop:c.struct("UnusedValueWithoutDrop",{resultIdx:c.u16(),secondaryIdx:c.u16()}),InvalidPublicFunctionReturnType:c.struct("InvalidPublicFunctionReturnType",{idx:c.u16()}),InvalidTransferObject:null,EffectsTooLarge:c.struct("EffectsTooLarge",{currentSize:c.u64(),maxSize:c.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:c.struct("PackageUpgradeError",{upgradeError:Xu}),WrittenObjectsTooLarge:c.struct("WrittenObjectsTooLarge",{currentSize:c.u64(),maxSize:c.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:c.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:c.vector(ie)}),AddressDeniedForCoin:c.struct("AddressDeniedForCoin",{address:ie,coinType:c.string()}),CoinTypeGlobalPause:c.struct("CoinTypeGlobalPause",{coinType:c.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Oo=c.enum("ExecutionStatus",{Success:null,Failed:c.struct("ExecutionFailed",{error:Yu,command:c.option(c.u64())})}),xo=c.struct("GasCostSummary",{computationCost:c.u64(),storageCost:c.u64(),storageRebate:c.u64(),nonRefundableStorageFee:c.u64()}),Zu=c.struct("TransactionEffectsV1",{status:Oo,executedEpoch:c.u64(),gasUsed:xo,modifiedAtVersions:c.vector(c.tuple([ie,c.u64()])),sharedObjects:c.vector(Pe),transactionDigest:We,created:c.vector(c.tuple([Pe,Ht])),mutated:c.vector(c.tuple([Pe,Ht])),unwrapped:c.vector(c.tuple([Pe,Ht])),deleted:c.vector(Pe),unwrappedThenDeleted:c.vector(Pe),wrapped:c.vector(Pe),gasObject:c.tuple([Pe,Ht]),eventsDigest:c.option(We),dependencies:c.vector(We)}),Si=c.tuple([c.u64(),We]),ec=c.enum("ObjectIn",{NotExist:null,Exist:c.tuple([Si,Ht])}),tc=c.enum("ObjectOut",{NotExist:null,ObjectWrite:c.tuple([We,Ht]),PackageWrite:Si}),nc=c.enum("IDOperation",{None:null,Created:null,Deleted:null}),rc=c.struct("EffectsObjectChange",{inputState:ec,outputState:tc,idOperation:nc}),ic=c.enum("UnchangedSharedKind",{ReadOnlyRoot:Si,MutateDeleted:c.u64(),ReadDeleted:c.u64(),Cancelled:c.u64(),PerEpochConfig:null}),sc=c.struct("TransactionEffectsV2",{status:Oo,executedEpoch:c.u64(),gasUsed:xo,transactionDigest:We,gasObjectIndex:c.option(c.u32()),eventsDigest:c.option(We),dependencies:c.vector(We),lamportVersion:c.u64(),changedObjects:c.vector(c.tuple([ie,rc])),unchangedSharedObjects:c.vector(c.tuple([ie,ic])),auxDataDigest:c.option(We)}),oc=c.enum("TransactionEffects",{V1:Zu,V2:sc});function Dn(t){switch(t){case"u8":return c.u8();case"u16":return c.u16();case"u32":return c.u32();case"u64":return c.u64();case"u128":return c.u128();case"u256":return c.u256();case"bool":return c.bool();case"string":return c.string();case"id":case"address":return ie}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,r]=e.slice(1);return n==="vector"?c.vector(Dn(r)):c.option(Dn(r))}throw new Error(`Invalid Pure type name: ${t}`)}const V={...c,U8:c.u8(),U16:c.u16(),U32:c.u32(),U64:c.u64(),U128:c.u128(),U256:c.u256(),ULEB128:c.uleb128(),Bool:c.bool(),String:c.string(),Address:ie,AppId:mo,Argument:Qe,CallArg:ro,Command:so,CompressedSignature:wo,GasData:lo,Intent:bo,IntentMessage:yo,IntentScope:po,IntentVersion:go,MultiSig:zu,MultiSigPkMap:Io,MultiSigPublicKey:Eo,ObjectArg:no,ObjectDigest:We,Owner:Ht,PasskeyAuthenticator:Ku,ProgrammableMoveCall:io,ProgrammableTransaction:oo,PublicKey:vo,SenderSignedData:qu,SenderSignedTransaction:So,SharedObjectRef:to,StructTag:co,SuiObjectRef:Pe,TransactionData:ho,TransactionDataV1:fo,TransactionEffects:oc,TransactionExpiration:uo,TransactionKind:ao,TypeTag:Ei};function ac(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var at;function uc(t){return{lang:(t==null?void 0:t.lang)??(at==null?void 0:at.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(at==null?void 0:at.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(at==null?void 0:at.abortPipeEarly)}}var Rr;function cc(t){return Rr==null?void 0:Rr.get(t)}var Dr;function lc(t){return Dr==null?void 0:Dr.get(t)}var Nr;function dc(t,e){var n;return(n=Nr==null?void 0:Nr.get(t))==null?void 0:n.get(e)}function ko(t){var n,r;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor)==null?void 0:r.name))??"null":e}function Ce(t,e,n,r,i){const s=i&&"input"in i?i.input:n.value,l=(i==null?void 0:i.expected)??t.expects??null,a=(i==null?void 0:i.received)??ko(s),h={kind:t.kind,type:t.type,input:s,expected:l,received:a,message:`Invalid ${e}: ${l?`Expected ${l} but r`:"R"}eceived ${a}`,requirement:t.requirement,path:i==null?void 0:i.path,issues:i==null?void 0:i.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},y=t.kind==="schema",p=(i==null?void 0:i.message)??t.message??dc(t.reference,h.lang)??(y?lc(h.lang):null)??r.message??cc(h.lang);p&&(h.message=typeof p=="function"?p(h):p),y&&(n.typed=!1),n.issues?n.issues.push(h):n.issues=[h]}function fc(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var hc=class extends Error{constructor(e){super(e[0].message);jn(this,"issues");this.name="ValiError",this.issues=e}};function Tt(t,e){return{kind:"validation",type:"check",reference:Tt,async:!1,expects:null,requirement:t,message:e,_run(n,r){return n.typed&&!this.requirement(n.value)&&Ce(this,"input",n,r),n}}}function L(t){return{kind:"validation",type:"integer",reference:L,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,n){return e.typed&&!this.requirement(e.value)&&Ce(this,"integer",e,n),e}}}function on(t){return{kind:"transformation",type:"transform",reference:on,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function Oi(t,e,n){return typeof t.default=="function"?t.default(e,n):t.default}function In(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function x(t,e){return{kind:"schema",type:"array",reference:x,expects:"Array",async:!1,item:t,message:e,_run(n,r){var s;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let l=0;l<i.length;l++){const a=i[l],h=this.item._run({typed:!1,value:a},r);if(h.issues){const y={type:"array",origin:"value",input:i,key:l,value:a};for(const p of h.issues)p.path?p.path.unshift(y):p.path=[y],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=h.issues),r.abortEarly){n.typed=!1;break}}h.typed||(n.typed=!1),n.value.push(h.value)}}else Ce(this,"type",n,r);return n}}}function Kn(t){return{kind:"schema",type:"bigint",reference:Kn,expects:"bigint",async:!1,message:t,_run(e,n){return typeof e.value=="bigint"?e.typed=!0:Ce(this,"type",e,n),e}}}function an(t){return{kind:"schema",type:"boolean",reference:an,expects:"boolean",async:!1,message:t,_run(e,n){return typeof e.value=="boolean"?e.typed=!0:Ce(this,"type",e,n),e}}}function St(t){return{kind:"schema",type:"lazy",reference:St,expects:"unknown",async:!1,getter:t,_run(e,n){return this.getter(e.value)._run(e,n)}}}function k(t,e){return{kind:"schema",type:"literal",reference:k,expects:ko(t),async:!1,literal:t,message:e,_run(n,r){return n.value===this.literal?n.typed=!0:Ce(this,"type",n,r),n}}}function M(t,...e){const n={kind:"schema",type:"nullable",reference:M,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(r,i){return r.value===null&&("default"in this&&(r.value=Oi(this,r,i)),r.value===null)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(n.default=e[0]),n}function Ke(t,...e){const n={kind:"schema",type:"nullish",reference:Ke,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(r,i){return(r.value===null||r.value===void 0)&&("default"in this&&(r.value=Oi(this,r,i)),r.value===null||r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(n.default=e[0]),n}function N(t){return{kind:"schema",type:"number",reference:N,expects:"number",async:!1,message:t,_run(e,n){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:Ce(this,"type",e,n),e}}}function b(t,e){return{kind:"schema",type:"object",reference:b,expects:"Object",async:!1,entries:t,message:e,_run(n,r){var s;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const l in this.entries){const a=i[l],h=this.entries[l]._run({typed:!1,value:a},r);if(h.issues){const y={type:"object",origin:"value",input:i,key:l,value:a};for(const p of h.issues)p.path?p.path.unshift(y):p.path=[y],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=h.issues),r.abortEarly){n.typed=!1;break}}h.typed||(n.typed=!1),(h.value!==void 0||l in i)&&(n.value[l]=h.value)}}else Ce(this,"type",n,r);return n}}}function Q(t,...e){const n={kind:"schema",type:"optional",reference:Q,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(r,i){return r.value===void 0&&("default"in this&&(r.value=Oi(this,r,i)),r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,i)}};return 0 in e&&(n.default=e[0]),n}function Ot(t,e,n){return{kind:"schema",type:"record",reference:Ot,expects:"Object",async:!1,key:t,value:e,message:n,_run(r,i){var l,a;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const h in s)if(fc(s,h)){const y=s[h],p=this.key._run({typed:!1,value:h},i);if(p.issues){const A={type:"object",origin:"key",input:s,key:h,value:y};for(const E of p.issues)E.path=[A],(l=r.issues)==null||l.push(E);if(r.issues||(r.issues=p.issues),i.abortEarly){r.typed=!1;break}}const v=this.value._run({typed:!1,value:y},i);if(v.issues){const A={type:"object",origin:"value",input:s,key:h,value:y};for(const E of v.issues)E.path?E.path.unshift(A):E.path=[A],(a=r.issues)==null||a.push(E);if(r.issues||(r.issues=v.issues),i.abortEarly){r.typed=!1;break}}(!p.typed||!v.typed)&&(r.typed=!1),p.typed&&(r.value[p.value]=v.value)}}else Ce(this,"type",r,i);return r}}}function C(t){return{kind:"schema",type:"string",reference:C,expects:"string",async:!1,message:t,_run(e,n){return typeof e.value=="string"?e.typed=!0:Ce(this,"type",e,n),e}}}function Xn(t,e){return{kind:"schema",type:"tuple",reference:Xn,expects:"Array",async:!1,items:t,message:e,_run(n,r){var s;const i=n.value;if(Array.isArray(i)){n.typed=!0,n.value=[];for(let l=0;l<this.items.length;l++){const a=i[l],h=this.items[l]._run({typed:!1,value:a},r);if(h.issues){const y={type:"array",origin:"value",input:i,key:l,value:a};for(const p of h.issues)p.path?p.path.unshift(y):p.path=[y],(s=n.issues)==null||s.push(p);if(n.issues||(n.issues=h.issues),r.abortEarly){n.typed=!1;break}}h.typed||(n.typed=!1),n.value.push(h.value)}}else Ce(this,"type",n,r);return n}}}function Yi(t){let e;if(t)for(const n of t)e?e.push(...n.issues):e=n.issues;return e}function X(t,e){return{kind:"schema",type:"union",reference:X,expects:[...new Set(t.map(n=>n.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(n,r){let i,s,l;for(const a of this.options){const h=a._run({typed:!1,value:n.value},r);if(h.typed)if(h.issues)s?s.push(h):s=[h];else{i=h;break}else l?l.push(h):l=[h]}if(i)return i;if(s){if(s.length===1)return s[0];Ce(this,"type",n,r,{issues:Yi(s)}),n.typed=!0}else{if((l==null?void 0:l.length)===1)return l[0];Ce(this,"type",n,r,{issues:Yi(l)})}return n}}}function $e(){return{kind:"schema",type:"unknown",reference:$e,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function F(t,e,n){const r=t._run({typed:!1,value:e},uc(n));if(r.issues)throw new hc(r.issues);return r.value}function B(...t){return{...t[0],pipe:t,_run(e,n){for(let r=0;r<t.length;r++){if(e.issues&&(t[r].kind==="schema"||t[r].kind==="transformation")){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=t[r]._run(e,n))}return e}}}function un(t){const e=Object.entries(t).map(([n,r])=>b({[n]:r}));return B(X(e),on(n=>({...n,$kind:Object.keys(n)[0]})))}const xn=B(C(),on(t=>ee(t)),Tt(gt)),_e=xn,nn=C(),ke=B(X([C(),B(N(),L())]),Tt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Dt=b({objectId:xn,version:ke,digest:C()}),ue=B(X([b({GasCoin:k(!0)}),b({Input:B(N(),L()),type:Q(k("pure"))}),b({Input:B(N(),L()),type:Q(k("object"))}),b({Result:B(N(),L())}),b({NestedResult:Xn([B(N(),L()),B(N(),L())])})]),on(t=>({...t,$kind:Object.keys(t)[0]}))),pc=b({budget:M(ke),price:M(ke),owner:M(xn),payment:M(x(Dt))}),ti=X([k("address"),k("bool"),k("u8"),k("u16"),k("u32"),k("u64"),k("u128"),k("u256"),b({vector:St(()=>ti)}),b({datatype:b({package:C(),module:C(),type:C(),typeParameters:x(St(()=>ti))})}),b({typeParameter:B(N(),L())})]),gc=b({ref:M(X([k("&"),k("&mut")])),body:ti}),mc=b({package:_e,module:C(),function:C(),typeArguments:x(C()),arguments:x(ue),_argumentTypes:Q(M(x(gc)))}),bc=b({name:C(),inputs:Ot(C(),X([ue,x(ue)])),data:Ot(C(),$e())}),yc=un({MoveCall:mc,TransferObjects:b({objects:x(ue),address:ue}),SplitCoins:b({coin:ue,amounts:x(ue)}),MergeCoins:b({destination:ue,sources:x(ue)}),Publish:b({modules:x(nn),dependencies:x(_e)}),MakeMoveVec:b({type:M(C()),elements:x(ue)}),Upgrade:b({modules:x(nn),dependencies:x(_e),package:_e,ticket:ue}),$Intent:bc}),To=un({ImmOrOwnedObject:Dt,SharedObject:b({objectId:_e,initialSharedVersion:ke,mutable:an()}),Receiving:Dt}),wc=un({Object:To,Pure:b({bytes:nn}),UnresolvedPure:b({value:$e()}),UnresolvedObject:b({objectId:_e,version:Q(M(ke)),digest:Q(M(C())),initialSharedVersion:Q(M(ke))})}),Zi=un({Object:To,Pure:b({bytes:nn})}),jo=un({None:k(!0),Epoch:ke}),or=b({version:k(2),sender:Ke(xn),expiration:Ke(jo),gasData:pc,inputs:x(wc),commands:x(yc)}),Lt={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>F(ue,n)),address:F(ue,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:F(ue,t),amounts:e.map(n=>F(ue,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:F(ue,t),sources:e.map(n=>F(ue,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:re(new Uint8Array(n))),dependencies:e.map(n=>yt(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:re(new Uint8Array(i))),dependencies:e.map(i=>yt(i)),package:n,ticket:F(ue,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>F(ue,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Array.isArray(i)?i.map(s=>F(ue,s)):F(ue,i)])),data:n}}}},ni=b({digest:C(),objectId:C(),version:X([B(N(),L()),C(),Kn()])}),vc=un({ImmOrOwned:ni,Shared:b({objectId:_e,initialSharedVersion:ke,mutable:an()}),Receiving:ni}),es=un({Object:vc,Pure:x(B(N(),L()))}),_o=X([b({kind:k("Input"),index:B(N(),L()),value:$e(),type:Q(k("object"))}),b({kind:k("Input"),index:B(N(),L()),value:$e(),type:k("pure")})]),Ic=X([b({Epoch:B(N(),L())}),b({None:M(k(!0))})]),ts=B(X([N(),C(),Kn()]),Tt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),xi=X([b({bool:M(k(!0))}),b({u8:M(k(!0))}),b({u64:M(k(!0))}),b({u128:M(k(!0))}),b({address:M(k(!0))}),b({signer:M(k(!0))}),b({vector:St(()=>xi)}),b({struct:St(()=>Ec)}),b({u16:M(k(!0))}),b({u32:M(k(!0))}),b({u256:M(k(!0))})]),Ec=b({address:C(),module:C(),name:C(),typeParams:x(xi)}),Sc=b({budget:Q(ts),price:Q(ts),payment:Q(x(ni)),owner:Q(C())}),Oc=[_o,b({kind:k("GasCoin")}),b({kind:k("Result"),index:B(N(),L())}),b({kind:k("NestedResult"),index:B(N(),L()),resultIndex:B(N(),L())})],xt=X([...Oc]),xc=b({kind:k("MoveCall"),target:B(C(),Tt(t=>t.split("::").length===3)),typeArguments:x(C()),arguments:x(xt)}),kc=b({kind:k("TransferObjects"),objects:x(xt),address:xt}),Tc=b({kind:k("SplitCoins"),coin:xt,amounts:x(xt)}),jc=b({kind:k("MergeCoins"),destination:xt,sources:x(xt)}),_c=b({kind:k("MakeMoveVec"),type:X([b({Some:xi}),b({None:M(k(!0))})]),objects:x(xt)}),Ac=b({kind:k("Publish"),modules:x(x(B(N(),L()))),dependencies:x(C())}),Cc=b({kind:k("Upgrade"),modules:x(x(B(N(),L()))),dependencies:x(C()),packageId:C(),ticket:xt}),$c=[xc,kc,Tc,jc,Ac,Cc,_c],Uc=X([...$c]);b({version:k(1),sender:Q(C()),expiration:Ke(Ic),gasConfig:Sc,inputs:x(_o),transactions:x(Uc)});function ns(t){var n;const e=t.inputs.map((r,i)=>{if(r.Object)return{kind:"Input",index:i,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:i,value:{Pure:Array.from(ge(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:i,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:i,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:Wn.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(i=>ut(i,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:ut(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(i=>ut(i,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(i=>ut(i,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(i=>Array.from(ge(i))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:ut(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(i=>ut(i,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(i=>ut(i,e)),address:ut(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(i=>Array.from(ge(i))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:ut(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function ut(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function Mc(t){var e,n,r;return F(or,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((r=t.gasConfig.payment)==null?void 0:r.map(i=>({digest:i.digest,objectId:i.objectId,version:i.version.toString()})))??null},inputs:t.inputs.map(i=>{if(i.kind==="Input"){if(In(es,i.value)){const s=F(es,i.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:re(new Uint8Array(s.Pure))}}}return i.type==="object"?{UnresolvedObject:{objectId:i.value}}:{UnresolvedPure:{value:i.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(i=>{switch(i.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in i.type?Wn.tagToString(i.type.Some):null,elements:i.objects.map(s=>ct(s))}};case"MergeCoins":return{MergeCoins:{destination:ct(i.destination),sources:i.sources.map(s=>ct(s))}};case"MoveCall":{const[s,l,a]=i.target.split("::");return{MoveCall:{package:s,module:l,function:a,typeArguments:i.typeArguments,arguments:i.arguments.map(h=>ct(h))}}}case"Publish":return{Publish:{modules:i.modules.map(s=>re(Uint8Array.from(s))),dependencies:i.dependencies}};case"SplitCoins":return{SplitCoins:{coin:ct(i.coin),amounts:i.amounts.map(s=>ct(s))}};case"TransferObjects":return{TransferObjects:{objects:i.objects.map(s=>ct(s)),address:ct(i.address)}};case"Upgrade":return{Upgrade:{modules:i.modules.map(s=>re(Uint8Array.from(s))),dependencies:i.dependencies,package:i.packageId,ticket:ct(i.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(i)}`)})})}function ct(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function Hn(t){return X(Object.entries(t).map(([e,n])=>b({[e]:n})))}const Le=Hn({GasCoin:k(!0),Input:B(N(),L()),Result:B(N(),L()),NestedResult:Xn([B(N(),L()),B(N(),L())])}),Bc=b({budget:M(ke),price:M(ke),owner:M(xn),payment:M(x(Dt))}),Pc=b({package:_e,module:C(),function:C(),typeArguments:x(C()),arguments:x(Le)}),Rc=b({name:C(),inputs:Ot(C(),X([Le,x(Le)])),data:Ot(C(),$e())}),Dc=Hn({MoveCall:Pc,TransferObjects:b({objects:x(Le),address:Le}),SplitCoins:b({coin:Le,amounts:x(Le)}),MergeCoins:b({destination:Le,sources:x(Le)}),Publish:b({modules:x(nn),dependencies:x(_e)}),MakeMoveVec:b({type:M(C()),elements:x(Le)}),Upgrade:b({modules:x(nn),dependencies:x(_e),package:_e,ticket:Le}),$Intent:Rc}),Nc=Hn({ImmOrOwnedObject:Dt,SharedObject:b({objectId:_e,initialSharedVersion:ke,mutable:an()}),Receiving:Dt}),Fc=Hn({Object:Nc,Pure:b({bytes:nn}),UnresolvedPure:b({value:$e()}),UnresolvedObject:b({objectId:_e,version:Q(M(ke)),digest:Q(M(C())),initialSharedVersion:Q(M(ke))})}),Lc=Hn({None:k(!0),Epoch:ke}),Vc=b({version:k(2),sender:Ke(xn),expiration:Ke(Lc),gasData:Bc,inputs:x(Fc),commands:x(Dc)});function Gc(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?re(t):t.toBase64()}}}const wt={Pure:Gc,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:ee(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:ee(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:ee(t)}}}}};function zc(t,e){return!!(t.inputs.some(n=>n.UnresolvedObject||n.UnresolvedPure)||!e.onlyTransactionKind&&(!t.gasConfig.price||!t.gasConfig.budget||!t.gasConfig.payment))}async function Wc(t,e,n){return Kc(t),zc(t,e)?qc(e).core.resolveTransactionPlugin()(t,e,async()=>{await rs(t),await n()}):(await rs(t),n())}function rs(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function qc(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Kc(t){for(const e of t.commands)switch(e.$kind){case"SplitCoins":e.SplitCoins.amounts.forEach(n=>{is(n,V.U64,t)});break;case"TransferObjects":is(e.TransferObjects.address,V.Address,t);break}}function is(t,e,n){if(t.$kind!=="Input")return;const r=n.inputs[t.Input];r.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=wt.Pure(e.serialize(r.UnresolvedPure.value)))}function Xc(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:r})=>i=>i.moveCall({typeArguments:[n],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[i.object(r)]}),e}function Hc(t){function e(n,r){if(typeof n=="string")return t(Dn(n).serialize(r));if(n instanceof Uint8Array||On(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(V.U8.serialize(n)),e.u16=n=>t(V.U16.serialize(n)),e.u32=n=>t(V.U32.serialize(n)),e.u64=n=>t(V.U64.serialize(n)),e.u128=n=>t(V.U128.serialize(n)),e.u256=n=>t(V.U256.serialize(n)),e.bool=n=>t(V.Bool.serialize(n)),e.string=n=>t(V.String.serialize(n)),e.address=n=>t(V.Address.serialize(n)),e.id=e.address,e.vector=(n,r)=>t(V.vector(Dn(n)).serialize(r)),e.option=(n,r)=>t(V.option(Dn(n)).serialize(r)),e}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jc(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ri(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function ki(t,...e){if(!Jc(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function ss(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Qc(t,e){ki(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Or(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function ii(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Ao=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Co(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const ft=Ao?t=>t:t=>Co(t);function Yc(t){for(let e=0;e<t.length;e++)t[e]=Co(t[e]);return t}const fn=Ao?t=>t:Yc;function Zc(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function Nn(t){return typeof t=="string"&&(t=Zc(t)),ki(t),t}class el{}function tl(t){const e=(r,i)=>t(i).update(Nn(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const nl=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),tr=BigInt(2**32-1),os=BigInt(32);function rl(t,e=!1){return e?{h:Number(t&tr),l:Number(t>>os&tr)}:{h:Number(t>>os&tr)|0,l:Number(t&tr)|0}}const $o=(t,e,n)=>t>>>n|e<<32-n,Uo=(t,e,n)=>t<<32-n|e>>>n,il=(t,e,n)=>t<<64-n|e>>>n-32,sl=(t,e,n)=>t>>>n-32|e<<64-n,ol=(t,e)=>e,al=(t,e)=>t;function Mo(t,e,n,r){const i=(e>>>0)+(r>>>0);return{h:t+n+(i/2**32|0)|0,l:i|0}}const Bo=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Po=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,we=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),$=new Uint32Array(32);function _t(t,e,n,r,i,s){const l=i[s],a=i[s+1];let h=$[2*t],y=$[2*t+1],p=$[2*e],v=$[2*e+1],A=$[2*n],E=$[2*n+1],I=$[2*r],U=$[2*r+1],G=Bo(h,p,l);y=Po(G,y,v,a),h=G|0,{Dh:U,Dl:I}={Dh:U^y,Dl:I^h},{Dh:U,Dl:I}={Dh:ol(U,I),Dl:al(U)},{h:E,l:A}=Mo(E,A,U,I),{Bh:v,Bl:p}={Bh:v^E,Bl:p^A},{Bh:v,Bl:p}={Bh:$o(v,p,24),Bl:Uo(v,p,24)},$[2*t]=h,$[2*t+1]=y,$[2*e]=p,$[2*e+1]=v,$[2*n]=A,$[2*n+1]=E,$[2*r]=I,$[2*r+1]=U}function At(t,e,n,r,i,s){const l=i[s],a=i[s+1];let h=$[2*t],y=$[2*t+1],p=$[2*e],v=$[2*e+1],A=$[2*n],E=$[2*n+1],I=$[2*r],U=$[2*r+1],G=Bo(h,p,l);y=Po(G,y,v,a),h=G|0,{Dh:U,Dl:I}={Dh:U^y,Dl:I^h},{Dh:U,Dl:I}={Dh:$o(U,I,16),Dl:Uo(U,I,16)},{h:E,l:A}=Mo(E,A,U,I),{Bh:v,Bl:p}={Bh:v^E,Bl:p^A},{Bh:v,Bl:p}={Bh:il(v,p,63),Bl:sl(v,p,63)},$[2*t]=h,$[2*t+1]=y,$[2*e]=p,$[2*e+1]=v,$[2*n]=A,$[2*n+1]=E,$[2*r]=I,$[2*r+1]=U}function ul(t,e={},n,r,i){if(ri(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:s,salt:l,personalization:a}=e;if(s!==void 0&&(s.length<1||s.length>n))throw new Error("key length must be undefined or 1.."+n);if(l!==void 0&&l.length!==r)throw new Error("salt must be undefined or "+r);if(a!==void 0&&a.length!==i)throw new Error("personalization must be undefined or "+i)}class cl extends el{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,ri(e),ri(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=Or(this.buffer)}update(e){ss(this),e=Nn(e),ki(e);const{blockLen:n,buffer:r,buffer32:i}=this,s=e.length,l=e.byteOffset,a=e.buffer;for(let h=0;h<s;){this.pos===n&&(fn(i),this.compress(i,0,!1),fn(i),this.pos=0);const y=Math.min(n-this.pos,s-h),p=l+h;if(y===n&&!(p%4)&&h+y<s){const v=new Uint32Array(a,p,Math.floor((s-h)/4));fn(v);for(let A=0;h+n<s;A+=i.length,h+=n)this.length+=n,this.compress(v,A,!1);fn(v);continue}r.set(e.subarray(h,h+y),this.pos),this.pos+=y,this.length+=y,h+=y}return this}digestInto(e){ss(this),Qc(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,ii(this.buffer.subarray(n)),fn(r),this.compress(r,0,!0),fn(r);const i=Or(e);this.get().forEach((s,l)=>i[l]=ft(s))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:i,destroyed:s,outputLen:l,pos:a}=this;return e||(e=new this.constructor({dkLen:l})),e.set(...this.get()),e.buffer.set(n),e.destroyed=s,e.finished=i,e.length=r,e.pos=a,e.outputLen=l,e}clone(){return this._cloneInto()}}class ll extends cl{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=we[0]|0,this.v0h=we[1]|0,this.v1l=we[2]|0,this.v1h=we[3]|0,this.v2l=we[4]|0,this.v2h=we[5]|0,this.v3l=we[6]|0,this.v3h=we[7]|0,this.v4l=we[8]|0,this.v4h=we[9]|0,this.v5l=we[10]|0,this.v5h=we[11]|0,this.v6l=we[12]|0,this.v6h=we[13]|0,this.v7l=we[14]|0,this.v7h=we[15]|0,ul(n,e,64,16,16);let{key:r,personalization:i,salt:s}=e,l=0;if(r!==void 0&&(r=Nn(r),l=r.length),this.v0l^=this.outputLen|l<<8|65536|1<<24,s!==void 0){s=Nn(s);const a=Or(s);this.v4l^=ft(a[0]),this.v4h^=ft(a[1]),this.v5l^=ft(a[2]),this.v5h^=ft(a[3])}if(i!==void 0){i=Nn(i);const a=Or(i);this.v6l^=ft(a[0]),this.v6h^=ft(a[1]),this.v7l^=ft(a[2]),this.v7h^=ft(a[3])}if(r!==void 0){const a=new Uint8Array(this.blockLen);a.set(r),this.update(a)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:i,v2l:s,v2h:l,v3l:a,v3h:h,v4l:y,v4h:p,v5l:v,v5h:A,v6l:E,v6h:I,v7l:U,v7h:G}=this;return[e,n,r,i,s,l,a,h,y,p,v,A,E,I,U,G]}set(e,n,r,i,s,l,a,h,y,p,v,A,E,I,U,G){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=i|0,this.v2l=s|0,this.v2h=l|0,this.v3l=a|0,this.v3h=h|0,this.v4l=y|0,this.v4h=p|0,this.v5l=v|0,this.v5h=A|0,this.v6l=E|0,this.v6h=I|0,this.v7l=U|0,this.v7h=G|0}compress(e,n,r){this.get().forEach((h,y)=>$[y]=h),$.set(we,16);let{h:i,l:s}=rl(BigInt(this.length));$[24]=we[8]^s,$[25]=we[9]^i,r&&($[28]=~$[28],$[29]=~$[29]);let l=0;const a=nl;for(let h=0;h<12;h++)_t(0,4,8,12,e,n+2*a[l++]),At(0,4,8,12,e,n+2*a[l++]),_t(1,5,9,13,e,n+2*a[l++]),At(1,5,9,13,e,n+2*a[l++]),_t(2,6,10,14,e,n+2*a[l++]),At(2,6,10,14,e,n+2*a[l++]),_t(3,7,11,15,e,n+2*a[l++]),At(3,7,11,15,e,n+2*a[l++]),_t(0,5,10,15,e,n+2*a[l++]),At(0,5,10,15,e,n+2*a[l++]),_t(1,6,11,12,e,n+2*a[l++]),At(1,6,11,12,e,n+2*a[l++]),_t(2,7,8,13,e,n+2*a[l++]),At(2,7,8,13,e,n+2*a[l++]),_t(3,4,9,14,e,n+2*a[l++]),At(3,4,9,14,e,n+2*a[l++]);this.v0l^=$[0]^$[16],this.v0h^=$[1]^$[17],this.v1l^=$[2]^$[18],this.v1h^=$[3]^$[19],this.v2l^=$[4]^$[20],this.v2h^=$[5]^$[21],this.v3l^=$[6]^$[22],this.v3h^=$[7]^$[23],this.v4l^=$[8]^$[24],this.v4h^=$[9]^$[25],this.v5l^=$[10]^$[26],this.v5h^=$[11]^$[27],this.v6l^=$[12]^$[28],this.v6h^=$[13]^$[29],this.v7l^=$[14]^$[30],this.v7h^=$[15]^$[31],ii($)}destroy(){this.destroyed=!0,ii(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const dl=tl(t=>new ll(t)),Ti=dl;function fl(t,e){const n=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);return r.set(n),r.set(e,n.length),Ti(r,{dkLen:32})}function as(t){return ee(t).replace("0x","")}let Wt=class zt{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=V.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return zt.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const n=V.TransactionData.parse(e),r=n==null?void 0:n.V1,i=r.kind.ProgrammableTransaction;if(!r||!i)throw new Error("Unable to deserialize from bytes.");return zt.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new zt(F(or,e)):new zt(F(or,Mc(e)))}static getDigestFromBytes(e){const n=fl("TransactionData",e);return Sn(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:r}={}){const i=this.inputs,s=this.commands,l={ProgrammableTransaction:{inputs:i,commands:s}};if(r)return V.TransactionKind.serialize(l,{maxSize:e}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,h=(n==null?void 0:n.sender)??this.sender,y={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!h)throw new Error("Missing transaction sender");if(!y.budget)throw new Error("Missing gas budget");if(!y.payment)throw new Error("Missing gas payment");if(!y.price)throw new Error("Missing gas price");const p={sender:as(h),expiration:a||{None:!0},gasData:{payment:y.payment,owner:as(this.gasData.owner??h),price:BigInt(y.price),budget:BigInt(y.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return V.TransactionData.serialize({V1:p},{maxSize:e}).toBytes()}addInput(e,n){const r=this.inputs.length;return this.inputs.push(n),{Input:r,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((r,i)=>(r.$kind==="Input"&&r.Input===e&&n(r,i),r))}mapCommandArguments(e,n){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>n(s,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>n(s,r,e)),r.TransferObjects.address=n(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=n(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>n(s,r,e));break;case"MergeCoins":r.MergeCoins.destination=n(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>n(s,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>n(s,r,e));break;case"Upgrade":r.Upgrade.ticket=n(r.Upgrade.ticket,r,e);break;case"$Intent":const i=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,l]of Object.entries(i))r.$Intent.inputs[s]=Array.isArray(l)?l.map(a=>n(a,r,e)):n(l,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const n of this.commands.keys())this.mapCommandArguments(n,e)}replaceCommand(e,n,r=e){if(!Array.isArray(n)){this.commands[e]=n;return}const i=n.length-1;this.commands.splice(e,1,...n),i!==0&&this.mapArguments((s,l,a)=>{if(a<e+n.length)return s;switch(s.$kind){case"Result":s.Result===e&&(s.Result=r),s.Result>e&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]===e&&(s.NestedResult[0]=r),s.NestedResult[0]>e&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return zt.getDigestFromBytes(e)}snapshot(){return F(or,this)}shallowClone(){return new zt({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}};function us(t){if(typeof t=="string")return ee(t);if(t.Object)return t.Object.ImmOrOwnedObject?ee(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?ee(t.Object.Receiving.objectId):ee(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return ee(t.UnresolvedObject.objectId)}var Ro=t=>{throw TypeError(t)},ji=(t,e,n)=>e.has(t)||Ro("Cannot "+n),j=(t,e,n)=>(ji(t,e,"read from private field"),n?n.call(t):e.get(t)),He=(t,e,n)=>e.has(t)?Ro("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),le=(t,e,n,r)=>(ji(t,e,"write to private field"),e.set(t,n),n),ve=(t,e,n)=>(ji(t,e,"access private method"),n),Jt,Zt,mt,rt,it,It,et,Ut,P,me,Do,ar,ur,cr,xr,si,_i,No,Fo;function Fr(t,e=1/0){const n={$kind:"Result",Result:t},r=[],i=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,l){if(l in s)return Reflect.get(s,l);if(l===Symbol.iterator)return function*(){let h=0;for(;h<e;)yield i(h),h++};if(typeof l=="symbol")return;const a=parseInt(l,10);if(!(Number.isNaN(a)||a<0))return i(a)}})}const Lo=Symbol.for("@mysten/transaction");function Vo(t){return!!t&&typeof t=="object"&&t[Lo]===!0}const cs={buildPlugins:new Map,serializationPlugins:new Map},Lr=Symbol.for("@mysten/transaction/registry");function _n(){try{const t=globalThis;return t[Lr]||(t[Lr]=cs),t[Lr]}catch{return cs}}const Go=class oi{constructor(){He(this,me),He(this,Jt),He(this,Zt),He(this,mt,new Map),He(this,rt,[]),He(this,it,[]),He(this,It,new Set),He(this,et,new Set),He(this,Ut,new Map),He(this,P),this.object=Xc(n=>{var s,l;if(typeof n=="function")return this.object(this.add(n));if(typeof n=="object"&&In(ue,n))return n;const r=us(n),i=j(this,P).inputs.find(a=>r===us(a));return(s=i==null?void 0:i.Object)!=null&&s.SharedObject&&typeof n=="object"&&((l=n.Object)!=null&&l.SharedObject)&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||n.Object.SharedObject.mutable),i?{$kind:"Input",Input:j(this,P).inputs.indexOf(i),type:"object"}:ve(this,me,ur).call(this,"object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:ee(n)}}:n)});const e=_n();le(this,P,new Wt),le(this,Zt,[...e.buildPlugins.values()]),le(this,Jt,[...e.serializationPlugins.values()])}static fromKind(e){const n=new oi;return le(n,P,Wt.fromKindBytes(typeof e=="string"?ge(e):e)),le(n,rt,j(n,P).inputs),le(n,it,j(n,P).commands),n}static from(e){const n=new oi;return Vo(e)?le(n,P,new Wt(e.getData())):typeof e!="string"||!e.startsWith("{")?le(n,P,Wt.fromBytes(typeof e=="string"?ge(e):e)):le(n,P,Wt.restore(JSON.parse(e))),le(n,rt,j(n,P).inputs),le(n,it,j(n,P).commands),n}static registerGlobalSerializationPlugin(e,n){_n().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){_n().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){_n().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){_n().buildPlugins.delete(e)}addSerializationPlugin(e){j(this,Jt).push(e)}addBuildPlugin(e){j(this,Zt).push(e)}addIntentResolver(e,n){if(j(this,mt).has(e)&&j(this,mt).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);j(this,mt).set(e,n)}setSender(e){j(this,P).sender=e}setSenderIfNotSet(e){j(this,P).sender||(j(this,P).sender=e)}setExpiration(e){j(this,P).expiration=e?F(jo,e):null}setGasPrice(e){j(this,P).gasConfig.price=String(e)}setGasBudget(e){j(this,P).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){j(this,P).gasData.budget==null&&(j(this,P).gasConfig.budget=String(e))}setGasOwner(e){j(this,P).gasConfig.owner=e}setGasPayment(e){j(this,P).gasConfig.payment=e.map(n=>F(Dt,n))}get blockData(){return ns(j(this,P).snapshot())}getData(){return j(this,P).snapshot()}get[Lo](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:Hc(e=>On(e)?ve(this,me,ur).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):ve(this,me,ur).call(this,"pure",In(Zi,e)?F(Zi,e):e instanceof Uint8Array?wt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(wt.ObjectRef(...e))}receivingRef(...e){return this.object(wt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(wt.SharedObjectRef(...e))}add(e){if(typeof e=="function"){if(j(this,Ut).has(e))return j(this,Ut).get(e);const n=ve(this,me,Do).call(this),r=e(n);if(!(r&&typeof r=="object"&&"then"in r))return le(this,It,j(n,It)),j(this,Ut).set(e,r),r;const i=ve(this,me,ar).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{result:null}}});j(this,et).add(Promise.resolve(r).then(l=>{i.$Intent.data.result=l}));const s=Fr(j(this,P).commands.length-1);return j(this,Ut).set(e,s),s}else ve(this,me,ar).call(this,e);return Fr(j(this,P).commands.length-1)}splitCoins(e,n){const r=Lt.SplitCoins(typeof e=="string"?this.object(e):ve(this,me,xr).call(this,e),n.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):ve(this,me,cr).call(this,i)));return ve(this,me,ar).call(this,r),Fr(j(this,P).commands.length-1,n.length)}mergeCoins(e,n){return this.add(Lt.MergeCoins(this.object(e),n.map(r=>this.object(r))))}publish({modules:e,dependencies:n}){return this.add(Lt.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:r,ticket:i}){return this.add(Lt.Upgrade({modules:e,dependencies:n,package:r,ticket:this.object(i)}))}moveCall({arguments:e,...n}){return this.add(Lt.MoveCall({...n,arguments:e==null?void 0:e.map(r=>ve(this,me,cr).call(this,r))}))}transferObjects(e,n){return this.add(Lt.TransferObjects(e.map(r=>this.object(r)),typeof n=="string"?this.pure.address(n):ve(this,me,cr).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Lt.MakeMoveVec({type:e,elements:n.map(r=>this.object(r))}))}serialize(){return JSON.stringify(ns(j(this,P).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(F(Vc,j(this,P).snapshot()),(n,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){const{signer:n,...r}=e,i=await this.build(r);return n.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await ve(this,me,si).call(this,e),j(this,P).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await ve(this,me,si).call(this,e),j(this,P).getDigest()}async prepareForSerialization(e){var i;await ve(this,me,No).call(this),ve(this,me,Fo).call(this);const n=new Set;for(const s of j(this,P).commands)s.$Intent&&n.add(s.$Intent.name);const r=[...j(this,Jt)];for(const s of n)if(!((i=e.supportedIntents)!=null&&i.includes(s))){if(!j(this,mt).has(s))throw new Error(`Missing intent resolver for ${s}`);r.push(j(this,mt).get(s))}await ve(this,me,_i).call(this,r,e)}};Jt=new WeakMap;Zt=new WeakMap;mt=new WeakMap;rt=new WeakMap;it=new WeakMap;It=new WeakMap;et=new WeakMap;Ut=new WeakMap;P=new WeakMap;me=new WeakSet;Do=function(){const t=new Go;return le(t,P,j(this,P)),le(t,Jt,j(this,Jt)),le(t,Zt,j(this,Zt)),le(t,mt,j(this,mt)),le(t,et,j(this,et)),le(t,It,new Set(j(this,It))),le(t,Ut,j(this,Ut)),j(this,rt).push(j(t,rt)),j(this,it).push(j(t,it)),t};ar=function(t){const e=j(this,P).commands.length;return j(this,it).push(t),j(this,It).add(e),j(this,P).commands.push(t),j(this,P).mapCommandArguments(e,n=>{if(n.$kind==="Result"&&!j(this,It).has(n.Result))throw new Error(`Result { Result: ${n.Result} } is not available to use the current transaction`);if(n.$kind==="NestedResult"&&!j(this,It).has(n.NestedResult[0]))throw new Error(`Result { NestedResult: [${n.NestedResult[0]}, ${n.NestedResult[1]}] } is not available to use the current transaction`);if(n.$kind==="Input"&&n.Input>=j(this,P).inputs.length)throw new Error(`Input { Input: ${n.Input} } references an input that does not exist in the current transaction`);return n}),t};ur=function(t,e){return j(this,rt).push(e),j(this,P).addInput(t,e)};cr=function(t){return On(t)?this.pure(t):ve(this,me,xr).call(this,t)};xr=function(t){if(typeof t=="function"){const e=this.add(t);return typeof e=="function"?ve(this,me,xr).call(this,e):F(ue,e)}return F(ue,t)};si=async function(t){if(!t.onlyTransactionKind&&!j(this,P).sender)throw new Error("Missing transaction sender");await ve(this,me,_i).call(this,[...j(this,Zt),Wc],t)};_i=async function(t,e){const n=r=>{if(r>=t.length)return()=>{};const i=t[r];return async()=>{const s=n(r+1);let l=!1,a=!1;if(await i(j(this,P),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);l=!0,await s(),a=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)(),le(this,rt,j(this,P).inputs),le(this,it,j(this,P).commands)};No=async function(){for(;j(this,et).size>0;){const t=Promise.all(j(this,et));j(this,et).clear(),j(this,et).add(t),await t,j(this,et).delete(t)}};Fo=function(){const t=j(this,P).commands,e=j(this,P).inputs,n=j(this,it).flat(1/0),r=j(this,rt).flat(1/0);if(n.length!==t.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==e.length)throw new Error("Unexpected number of inputs found in transaction data");const i=n.filter(l=>{var a;return((a=l.$Intent)==null?void 0:a.name)!=="AsyncTransactionThunk"});j(this,P).commands=i,j(this,P).inputs=r,le(this,it,i),le(this,rt,r);function s(l){var y;const a=t[l];if(((y=a.$Intent)==null?void 0:y.name)==="AsyncTransactionThunk"){const p=a.$Intent.data.result;if(p==null)throw new Error("AsyncTransactionThunk has not been resolved");return s(p.Result)}const h=i.indexOf(a);if(h===-1)throw new Error("Unable to find original index for command");return h}j(this,P).mapArguments(l=>{if(l.$kind==="Input"){const a=r.indexOf(e[l.Input]);if(a===-1)throw new Error("Input has not been resolved");return{...l,Input:a}}else if(l.$kind==="Result"){const a=s(l.Result);return{...l,Result:a}}else if(l.$kind==="NestedResult"){const a=s(l.NestedResult[0]);return{...l,NestedResult:[a,l.NestedResult[1]]}}return l})};let zo=Go;function hl(t,e,n){const r=V.Address.serialize(t).toBytes(),i=V.TypeTag.serialize(e).toBytes(),s=V.u64().serialize(n.length).toBytes(),l=Ti.create({dkLen:32});return l.update(new Uint8Array([240])),l.update(r),l.update(s),l.update(n),l.update(i),`0x${Rt(l.digest().slice(0,32))}`}class pl extends Ys{constructor(){super(...arguments),this.core=this}async getObject(e){const{objectId:n}=e,{objects:[r]}=await this.getObjects({objectIds:[n],signal:e.signal});if(r instanceof Error)throw r;return{object:r}}async getDynamicField(e){const n=hl(e.parentId,Wn.parseFromStr(e.name.type),e.name.bcs),{objects:[r]}=await this.getObjects({objectIds:[n],signal:e.signal});if(r instanceof Error)throw r;const i=vi(r.type);return{dynamicField:{id:r.id,digest:r.digest,version:r.version,type:r.type,name:{type:typeof i.typeParams[0]=="string"?i.typeParams[0]:ei(i.typeParams[0]),bcs:e.name.bcs},value:{type:typeof i.typeParams[1]=="string"?i.typeParams[1]:ei(i.typeParams[1]),bcs:r.content.slice(jr+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:n=60*1e3,...r}){const i=e?AbortSignal.any([AbortSignal.timeout(n),e]):AbortSignal.timeout(n),s=new Promise((l,a)=>{i.addEventListener("abort",()=>a(i.reason))});for(s.catch(()=>{});;){i.throwIfAborted();try{return await this.getTransaction({...r,signal:i})}catch{await Promise.race([new Promise(a=>setTimeout(a,2e3)),s])}}}}class gl extends Error{}class Mt extends gl{constructor(e,n){super(n),this.code=e}static fromResponse(e,n){switch(e.code){case"notExists":return new Mt(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new Mt(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new Mt(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new Mt(e.code,`Display error: ${e.error}`);case"unknown":default:return new Mt(e.code,`Unknown error while loading object${n?` ${n}`:""}`)}}}BigInt(1e9);const ml="0x1",Wo="0x2";yt("0x6");const bl=`${Wo}::sui::SUI`;yt("0x5");const yl="object",wl="ID",vl="ascii",Il="String",El="string",Sl="String",Ol="option",xl="Option";function kl(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&ee(e.package)===ee("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function ai(t){if(typeof t=="string")switch(t){case"address":return V.Address;case"bool":return V.Bool;case"u8":return V.U8;case"u16":return V.U16;case"u32":return V.U32;case"u64":return V.U64;case"u128":return V.U128;case"u256":return V.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return V.vector(V.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=ai(t.vector);return e?V.vector(e):null}if("datatype"in t){const e=ee(t.datatype.package);if(e===ee(ml)){if(t.datatype.module===vl&&t.datatype.type===Il||t.datatype.module===El&&t.datatype.type===Sl)return V.String;if(t.datatype.module===Ol&&t.datatype.type===xl){const n=ai(t.datatype.typeParameters[0]);return n?V.vector(n):null}}if(e===ee(Wo)&&t.datatype.module===yl&&t.datatype.type===wl)return V.Address}return null}function Tl(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Fn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Fn(t.MutableReference)}:{ref:null,body:Fn(t)}}function Fn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Fn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Fn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function jl(t){return{...Wt.fromBytes(t).snapshot(),bcs:t}}function _l(t){const e=V.TransactionEffects.parse(t);switch(e.$kind){case"V1":return Al({effects:e.V1});case"V2":return Cl({bytes:t,effects:e.V2});default:throw new Error(`Unknown transaction effects version: ${e.$kind}`)}}function Al(t){throw new Error("V1 effects are not supported yet")}function Cl({bytes:t,effects:e}){const n=e.changedObjects.map(([r,i])=>{var s,l,a,h,y,p;return{id:r,inputState:i.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((s=i.inputState.Exist)==null?void 0:s[0][0])??null,inputDigest:((l=i.inputState.Exist)==null?void 0:l[0][1])??null,inputOwner:((a=i.inputState.Exist)==null?void 0:a[1])??null,outputState:i.outputState.$kind==="NotExist"?"DoesNotExist":i.outputState.$kind,outputVersion:i.outputState.$kind==="PackageWrite"?(h=i.outputState.PackageWrite)==null?void 0:h[0]:i.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:i.outputState.$kind==="PackageWrite"?(y=i.outputState.PackageWrite)==null?void 0:y[1]:((p=i.outputState.ObjectWrite)==null?void 0:p[0])??null,outputOwner:i.outputState.ObjectWrite?i.outputState.ObjectWrite[1]:null,idOperation:i.idOperation.$kind}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:n[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:n,unchangedSharedObjects:e.unchangedSharedObjects.map(([r,i])=>({kind:i.$kind,objectId:r,version:i.$kind==="ReadOnlyRoot"?i.ReadOnlyRoot[0]:i[i.$kind],digest:i.$kind==="ReadOnlyRoot"?i.ReadOnlyRoot[1]:null})),auxiliaryDataDigest:e.auxDataDigest}}const $l=50,Ul=1000n,Ml=5e10;function Bl(t){return async function(n,r,i){return await Fl(n,t),await Nl(n,t),r.onlyTransactionKind||(await Pl(n,t),await Rl(n,t),await Dl(n,t)),await i()}}async function Pl(t,e){t.gasConfig.price||(t.gasConfig.price=String(await e.getReferenceGasPrice()))}async function Rl(t,e){if(t.gasConfig.budget)return;const n=await e.dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(Ml),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=Ul*BigInt(t.gasConfig.price||1n),i=BigInt(n.effects.gasUsed.computationCost)+r,s=i+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}async function Dl(t,e){if(!t.gasConfig.payment){const r=(await e.getCoins({owner:t.gasConfig.owner||t.sender,coinType:bl})).data.filter(i=>!t.inputs.find(l=>{var a;return(a=l.Object)!=null&&a.ImmOrOwnedObject?i.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1})).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(i=>F(Dt,i))}}async function Nl(t,e){const n=t.inputs.filter(p=>{var v;return p.UnresolvedObject&&!(p.UnresolvedObject.version||(v=p.UnresolvedObject)!=null&&v.initialSharedVersion)}),r=[...new Set(n.map(p=>yt(p.UnresolvedObject.objectId)))],i=r.length?zs(r,$l):[],s=(await Promise.all(i.map(p=>e.multiGetObjects({ids:p,options:{showOwner:!0}})))).flat(),l=new Map(r.map((p,v)=>[p,s[v]])),a=Array.from(l).filter(([p,v])=>v.error).map(([p,v])=>JSON.stringify(v.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const h=s.map(p=>{if(p.error||!p.data)throw new Error(`Failed to fetch object: ${p.error}`);const v=p.data.owner,A=v&&typeof v=="object"&&"Shared"in v?v.Shared.initial_shared_version:null;return{objectId:p.data.objectId,digest:p.data.digest,version:p.data.version,initialSharedVersion:A}}),y=new Map(r.map((p,v)=>[p,h[v]]));for(const[p,v]of t.inputs.entries()){if(!v.UnresolvedObject)continue;let A;const E=ee(v.UnresolvedObject.objectId),I=y.get(E);v.UnresolvedObject.initialSharedVersion??(I==null?void 0:I.initialSharedVersion)?A=wt.SharedObjectRef({objectId:E,initialSharedVersion:v.UnresolvedObject.initialSharedVersion||(I==null?void 0:I.initialSharedVersion),mutable:Ll(t,p)}):Vl(t,p)&&(A=wt.ReceivingRef({objectId:E,digest:v.UnresolvedObject.digest??(I==null?void 0:I.digest),version:v.UnresolvedObject.version??(I==null?void 0:I.version)})),t.inputs[t.inputs.indexOf(v)]=A??wt.ObjectRef({objectId:E,digest:v.UnresolvedObject.digest??(I==null?void 0:I.digest),version:v.UnresolvedObject.version??(I==null?void 0:I.version)})}}async function Fl(t,e){const{inputs:n,commands:r}=t,i=[],s=new Set;r.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(p=>p.$kind==="Input"?t.inputs[p.Input]:null).some(p=>(p==null?void 0:p.UnresolvedPure)||(p==null?void 0:p.UnresolvedObject))){const p=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(p),i.push(a.MoveCall)}}});const l=new Map;s.size>0&&await Promise.all([...s].map(async a=>{const[h,y,p]=a.split("::"),v=await e.getNormalizedMoveFunction({package:h,module:y,function:p});l.set(a,v.parameters.map(A=>Tl(A)))})),i.length&&await Promise.all(i.map(async a=>{const h=l.get(`${a.package}::${a.module}::${a.function}`);if(!h)return;const p=h.length>0&&kl(h.at(-1))?h.slice(0,h.length-1):h;a._argumentTypes=p})),r.forEach(a=>{if(!a.MoveCall)return;const h=a.MoveCall,y=`${h.package}::${h.module}::${h.function}`,p=h._argumentTypes;if(p){if(p.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${y}`);p.forEach((v,A)=>{var T,D;const E=h.arguments[A];if(E.$kind!=="Input")return;const I=n[E.Input];if(!I.UnresolvedPure&&!I.UnresolvedObject)return;const U=((T=I.UnresolvedPure)==null?void 0:T.value)??((D=I.UnresolvedObject)==null?void 0:D.objectId),G=ai(v.body);if(G){E.type="pure",n[n.indexOf(I)]=wt.Pure(G.serialize(U));return}if(typeof U!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(U,null,2)}`);E.type="object";const Y=I.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:U}}:I;n[E.Input]=Y})}})}function Ll(t,e){let n=!1;return t.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);n=i.MoveCall._argumentTypes[s].ref!=="&"||n}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(n=!0)}),n}function Vl(t,e){let n=!1;return t.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);n=Gl(i.MoveCall._argumentTypes[s])||n}}),n}function Gl(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}var qo=t=>{throw TypeError(t)},Ko=(t,e,n)=>e.has(t)||qo("Cannot "+n),Me=(t,e,n)=>(Ko(t,e,"read from private field"),n?n.call(t):e.get(t)),zl=(t,e,n)=>e.has(t)?qo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Wl=(t,e,n,r)=>(Ko(t,e,"write to private field"),e.set(t,n),n),Oe;class ql extends pl{constructor(e){super({network:e.network}),zl(this,Oe),Wl(this,Oe,e)}async getObjects(e){const n=ac(e.objectIds,50),r=[];for(const i of n){const s=await Me(this,Oe).multiGetObjects({ids:i,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});for(const[l,a]of s.entries())a.error?r.push(Mt.fromResponse(a.error,i[l])):r.push(ls(a.data))}return{objects:r}}async getOwnedObjects(e){const n=await Me(this,Oe).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});return{objects:n.data.map(r=>{if(r.error)throw Mt.fromResponse(r.error);return ls(r.data)}),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getCoins(e){const n=await Me(this,Oe).getCoins({owner:e.address,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:n.data.map(r=>({id:r.coinObjectId,version:r.version,digest:r.digest,balance:r.balance,type:`0x2::coin::Coin<${r.coinType}>`,content:Hl.serialize({id:r.coinObjectId,balance:{value:r.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getBalance(e){const n=await Me(this,Oe).getBalance({owner:e.address,coinType:e.coinType,signal:e.signal});return{balance:{coinType:n.coinType,balance:n.totalBalance}}}async getAllBalances(e){return{balances:(await Me(this,Oe).getAllBalances({owner:e.address,signal:e.signal})).map(r=>({coinType:r.coinType,balance:r.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const n=await Me(this,Oe).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0},signal:e.signal});return{transaction:ds(n)}}async executeTransaction(e){const n=await Me(this,Oe).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0},signal:e.signal});return{transaction:ds(n)}}async dryRunTransaction(e){const n=zo.from(e.transaction),r=await Me(this,Oe).dryRunTransactionBlock({transactionBlock:e.transaction,signal:e.signal}),{effects:i,objectTypes:s}=Kl({effects:r.effects,objectChanges:r.objectChanges});return{transaction:{digest:await n.getDigest(),epoch:null,effects:i,objectTypes:Promise.resolve(s),signatures:[],transaction:jl(e.transaction)}}}async getReferenceGasPrice(e){const n=await Me(this,Oe).getReferenceGasPrice({signal:e==null?void 0:e.signal});return{referenceGasPrice:String(n)}}async getDynamicFields(e){const n=await Me(this,Oe).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:n.data.map(r=>({id:r.objectId,type:r.objectType,name:{type:r.name.type,bcs:ge(r.bcsName)}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}async verifyZkLoginSignature(e){const n=await Me(this,Oe).verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.author});return{success:n.success,errors:n.errors}}resolveTransactionPlugin(){return Bl(Me(this,Oe))}}Oe=new WeakMap;function ls(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?ge(t.bcs.bcsBytes):new Uint8Array,owner:bn(t.owner)}}function bn(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function ds(t){var s,l;const e=V.SenderSignedData.parse(ge(t.rawTransaction))[0],n={};(s=t.objectChanges)==null||s.forEach(a=>{a.type!=="published"&&(n[a.objectId]=a.objectType)});const r=V.TransactionData.serialize(e.intentMessage.value).toBytes(),i=Wt.restore({version:2,sender:e.intentMessage.value.V1.sender,expiration:e.intentMessage.value.V1.expiration,gasData:e.intentMessage.value.V1.gasData,inputs:e.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:e.intentMessage.value.V1.kind.ProgrammableTransaction.commands});return{digest:t.digest,epoch:((l=t.effects)==null?void 0:l.executedEpoch)??null,effects:_l(new Uint8Array(t.rawEffects)),objectTypes:Promise.resolve(n),transaction:{...i,bcs:r},signatures:e.txSignatures}}function Kl({bytes:t,effects:e,objectChanges:n}){var l;const r=[],i=[],s={};return n==null||n.forEach(a=>{var h,y,p,v;switch(a.type){case"published":r.push({id:a.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:a.version,outputDigest:a.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":r.push({id:a.objectId,inputState:"Exists",inputVersion:a.version,inputDigest:a.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:a.sender},outputState:"ObjectWrite",outputVersion:a.version,outputDigest:a.digest,outputOwner:bn(a.recipient),idOperation:"None"}),s[a.objectId]=a.objectType;break;case"mutated":r.push({id:a.objectId,inputState:"Exists",inputVersion:a.previousVersion,inputDigest:null,inputOwner:bn(a.owner),outputState:"ObjectWrite",outputVersion:a.version,outputDigest:a.digest,outputOwner:bn(a.owner),idOperation:"None"}),s[a.objectId]=a.objectType;break;case"deleted":r.push({id:a.objectId,inputState:"Exists",inputVersion:a.version,inputDigest:((y=(h=e.deleted)==null?void 0:h.find(A=>A.objectId===a.objectId))==null?void 0:y.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),s[a.objectId]=a.objectType;break;case"wrapped":r.push({id:a.objectId,inputState:"Exists",inputVersion:a.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:a.sender},outputState:"ObjectWrite",outputVersion:a.version,outputDigest:((v=(p=e.wrapped)==null?void 0:p.find(A=>A.objectId===a.objectId))==null?void 0:v.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:a.sender},idOperation:"None"}),s[a.objectId]=a.objectType;break;case"created":r.push({id:a.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:a.version,outputDigest:a.digest,outputOwner:bn(a.owner),idOperation:"Created"}),s[a.objectId]=a.objectType;break}}),{objectTypes:s,effects:{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(l=e.gasObject)==null?void 0:l.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:bn(e.gasObject.owner),idOperation:"None"},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:r,unchangedSharedObjects:i,auxiliaryDataDigest:null}}}const Xl=V.struct("Balance",{value:V.u64()}),Hl=V.struct("Coin",{id:V.Address,balance:Xl}),Jl=Symbol.for("@mysten/SuiClient");class Ql extends Ys{constructor(e){super({network:e.network??"unknown"}),this.core=new ql(this),this.jsonRpc=this,this.transport=e.transport??new uu({url:e.url})}get[Jl](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,n,{signal:r}={}){return await this.transport.request({method:e,params:n,signal:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!er(yt(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(r=>{if(!r||!er(yt(r)))throw new Error(`Invalid Sui Object id ${r}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!Ji(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(r=>{if(!Ji(r))throw new Error(`Invalid Transaction digest ${r}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:n,options:r,requestType:i,signal:s}){const l=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:re(e),Array.isArray(n)?n:[n],r],signal:s});if(i==="WaitForLocalExecution")try{await this.waitForTransaction({digest:l.digest})}catch{}return l}async signAndExecuteTransaction({transaction:e,signer:n,...r}){let i;e instanceof Uint8Array?i=e:(e.setSenderIfNotSet(n.toSuiAddress()),i=await e.build({client:this}));const{signature:s,bytes:l}=await n.signTransaction(i);return this.executeTransactionBlock({transactionBlock:l,signature:s,...r})}async getTotalTransactionBlocks({signal:e}={}){const n=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(n)}async getReferenceGasPrice({signal:e}={}){const n=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(n)}async getStakes(e){if(!e.owner||!gt(ee(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(n=>{if(!n||!er(yt(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var r,i;let n;if(Vo(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=re(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=re(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(r=e.signal)==null||r.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(i=e.gasPrice)==null?void 0:i.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:re(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!er(yt(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const n=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(n)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const n=await this.getCheckpoint({id:"0",signal:e}),r=tn(n.digest);return Rt(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...n}){const{nextCursor:r,hasNextPage:i,data:s}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit],signal:n.signal});return{hasNextPage:i,nextCursor:r,data:s.map(l=>Au(l,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:n=60*1e3,pollInterval:r=2*1e3,...i}){const s=AbortSignal.timeout(n),l=new Promise((a,h)=>{s.addEventListener("abort",()=>h(s.reason))});for(l.catch(()=>{});!s.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(i)}catch{await Promise.race([new Promise(h=>setTimeout(h,r)),l])}}throw s.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}}var Yl=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Zl=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},lr;let An;const _r=new Set;function ed(t){Ln=void 0,_r.add(t)}function td(t){Ln=void 0,_r.delete(t)}const yn={};function nd(){if(An||(An=Object.freeze({register:fs,get:rd,on:id}),typeof window>"u"))return An;const t=Object.freeze({register:fs});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new sd(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return An}function fs(...t){var e;return t=t.filter(n=>!_r.has(n)),t.length?(t.forEach(n=>ed(n)),(e=yn.register)==null||e.forEach(n=>hs(()=>n(...t))),function(){var r;t.forEach(i=>td(i)),(r=yn.unregister)==null||r.forEach(i=>hs(()=>i(...t)))}):()=>{}}let Ln;function rd(){return Ln||(Ln=[..._r]),Ln}function id(t,e){var n;return(n=yn[t])!=null&&n.push(e)||(yn[t]=[e]),function(){var i;yn[t]=(i=yn[t])==null?void 0:i.filter(s=>e!==s)}}function hs(t){try{t()}catch(e){console.error(e)}}class sd extends Event{get detail(){return Yl(this,lr,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),lr.set(this,void 0),Zl(this,lr,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}lr=new WeakMap;const Ai=32;function Xo(t){return od(t)&&ad(t)===Ai}function pe(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(Ai*2,"0")}`}function qn(t,e=!1){return pe(t,e)}function od(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function ad(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const ud=/^vector<(.+)>$/,cd=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class tt{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(ud);if(r)return{vector:tt.parseFromStr(r[1],n)};const i=e.match(cd);if(i)return{struct:{address:n?pe(i[1]):i[1],module:i[2],name:i[3],typeParams:i[5]===void 0?[]:tt.parseStructTypeArgs(i[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return wi(e).map(r=>tt.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${tt.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(tt.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}function ld(t){return c.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function dd(t){return c.enum("Option",{None:null,Some:t})}const se=c.bytes(Ai).transform({validate:t=>{const e=typeof t=="string"?t:Rt(t);if(!e||!Xo(pe(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?yi(pe(t)):t,output:t=>pe(Rt(t))}),qe=c.vector(c.u8()).transform({name:"ObjectDigest",input:t=>tn(t),output:t=>Sn(new Uint8Array(t)),validate:t=>{if(tn(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Re=c.struct("SuiObjectRef",{objectId:se,version:c.u64(),digest:qe}),Ho=c.struct("SharedObjectRef",{objectId:se,initialSharedVersion:c.u64(),mutable:c.bool()}),Jo=c.enum("ObjectArg",{ImmOrOwnedObject:Re,SharedObject:Ho,Receiving:Re}),Qt=c.enum("Owner",{AddressOwner:se,ObjectOwner:se,Shared:c.struct("Shared",{initialSharedVersion:c.u64()}),Immutable:null,ConsensusV2:c.struct("ConsensusV2",{authenticator:c.enum("Authenticator",{SingleOwner:se}),startVersion:c.u64()})}),Qo=c.enum("CallArg",{Pure:c.struct("Pure",{bytes:c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})}),Object:Jo}),Ci=c.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:c.lazy(()=>Ci),struct:c.lazy(()=>ra),u16:null,u32:null,u256:null}),$i=Ci.transform({input:t=>typeof t=="string"?tt.parseFromStr(t,!0):t,output:t=>tt.tagToString(t)}),Ye=c.enum("Argument",{GasCoin:null,Input:c.u16(),Result:c.u16(),NestedResult:c.tuple([c.u16(),c.u16()])}),Yo=c.struct("ProgrammableMoveCall",{package:se,module:c.string(),function:c.string(),typeArguments:c.vector($i),arguments:c.vector(Ye)}),Zo=c.enum("Command",{MoveCall:Yo,TransferObjects:c.struct("TransferObjects",{objects:c.vector(Ye),address:Ye}),SplitCoins:c.struct("SplitCoins",{coin:Ye,amounts:c.vector(Ye)}),MergeCoins:c.struct("MergeCoins",{destination:Ye,sources:c.vector(Ye)}),Publish:c.struct("Publish",{modules:c.vector(c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})),dependencies:c.vector(se)}),MakeMoveVec:c.struct("MakeMoveVec",{type:dd($i).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:c.vector(Ye)}),Upgrade:c.struct("Upgrade",{modules:c.vector(c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))})),dependencies:c.vector(se),package:se,ticket:Ye})}),ea=c.struct("ProgrammableTransaction",{inputs:c.vector(Qo),commands:c.vector(Zo)}),ta=c.enum("TransactionKind",{ProgrammableTransaction:ea,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),na=c.enum("TransactionExpiration",{None:null,Epoch:ld()}),ra=c.struct("StructTag",{address:se,module:c.string(),name:c.string(),typeParams:c.vector(Ci)}),ia=c.struct("GasData",{payment:c.vector(Re),owner:se,price:c.u64(),budget:c.u64()}),sa=c.struct("TransactionDataV1",{kind:ta,sender:se,gasData:ia,expiration:na}),oa=c.enum("TransactionData",{V1:sa}),aa=c.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),ua=c.enum("IntentVersion",{V0:null}),ca=c.enum("AppId",{Sui:null}),la=c.struct("Intent",{scope:aa,version:ua,appId:ca});function da(t){return c.struct(`IntentMessage<${t.name}>`,{intent:la,value:t})}const fa=c.enum("CompressedSignature",{ED25519:c.fixedArray(64,c.u8()),Secp256k1:c.fixedArray(64,c.u8()),Secp256r1:c.fixedArray(64,c.u8()),ZkLogin:c.vector(c.u8())}),ha=c.enum("PublicKey",{ED25519:c.fixedArray(32,c.u8()),Secp256k1:c.fixedArray(33,c.u8()),Secp256r1:c.fixedArray(33,c.u8()),ZkLogin:c.vector(c.u8())}),pa=c.struct("MultiSigPkMap",{pubKey:ha,weight:c.u8()}),ga=c.struct("MultiSigPublicKey",{pk_map:c.vector(pa),threshold:c.u16()}),fd=c.struct("MultiSig",{sigs:c.vector(fa),bitmap:c.u16(),multisig_pk:ga}),hd=c.vector(c.u8()).transform({input:t=>typeof t=="string"?ge(t):t,output:t=>re(new Uint8Array(t))}),ma=c.struct("SenderSignedTransaction",{intentMessage:da(oa),txSignatures:c.vector(hd)}),pd=c.vector(ma,{name:"SenderSignedData"}),gd=c.struct("PasskeyAuthenticator",{authenticatorData:c.vector(c.u8()),clientDataJson:c.string(),userSignature:c.vector(c.u8())}),md=c.enum("PackageUpgradeError",{UnableToFetchPackage:c.struct("UnableToFetchPackage",{packageId:se}),NotAPackage:c.struct("NotAPackage",{objectId:se}),IncompatibleUpgrade:null,DigestDoesNotMatch:c.struct("DigestDoesNotMatch",{digest:c.vector(c.u8())}),UnknownUpgradePolicy:c.struct("UnknownUpgradePolicy",{policy:c.u8()}),PackageIDDoesNotMatch:c.struct("PackageIDDoesNotMatch",{packageId:se,ticketId:se})}),bd=c.struct("ModuleId",{address:se,name:c.string()}),ps=c.struct("MoveLocation",{module:bd,function:c.u16(),instruction:c.u16(),functionName:c.option(c.string())}),yd=c.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:c.struct("IndexOutOfBounds",{idx:c.u16()}),SecondaryIndexOutOfBounds:c.struct("SecondaryIndexOutOfBounds",{resultIdx:c.u16(),secondaryIdx:c.u16()}),InvalidResultArity:c.struct("InvalidResultArity",{resultIdx:c.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),wd=c.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),vd=c.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:c.struct("MoveObjectTooBig",{objectSize:c.u64(),maxObjectSize:c.u64()}),MovePackageTooBig:c.struct("MovePackageTooBig",{objectSize:c.u64(),maxObjectSize:c.u64()}),CircularObjectOwnership:c.struct("CircularObjectOwnership",{object:se}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:c.option(ps),MoveAbort:c.tuple([ps,c.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:c.struct("CommandArgumentError",{argIdx:c.u16(),kind:yd}),TypeArgumentError:c.struct("TypeArgumentError",{argumentIdx:c.u16(),kind:wd}),UnusedValueWithoutDrop:c.struct("UnusedValueWithoutDrop",{resultIdx:c.u16(),secondaryIdx:c.u16()}),InvalidPublicFunctionReturnType:c.struct("InvalidPublicFunctionReturnType",{idx:c.u16()}),InvalidTransferObject:null,EffectsTooLarge:c.struct("EffectsTooLarge",{currentSize:c.u64(),maxSize:c.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:c.struct("PackageUpgradeError",{upgradeError:md}),WrittenObjectsTooLarge:c.struct("WrittenObjectsTooLarge",{currentSize:c.u64(),maxSize:c.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:c.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:c.vector(se)}),AddressDeniedForCoin:c.struct("AddressDeniedForCoin",{address:se,coinType:c.string()}),CoinTypeGlobalPause:c.struct("CoinTypeGlobalPause",{coinType:c.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),ba=c.enum("ExecutionStatus",{Success:null,Failed:c.struct("ExecutionFailed",{error:vd,command:c.option(c.u64())})}),ya=c.struct("GasCostSummary",{computationCost:c.u64(),storageCost:c.u64(),storageRebate:c.u64(),nonRefundableStorageFee:c.u64()}),Id=c.struct("TransactionEffectsV1",{status:ba,executedEpoch:c.u64(),gasUsed:ya,modifiedAtVersions:c.vector(c.tuple([se,c.u64()])),sharedObjects:c.vector(Re),transactionDigest:qe,created:c.vector(c.tuple([Re,Qt])),mutated:c.vector(c.tuple([Re,Qt])),unwrapped:c.vector(c.tuple([Re,Qt])),deleted:c.vector(Re),unwrappedThenDeleted:c.vector(Re),wrapped:c.vector(Re),gasObject:c.tuple([Re,Qt]),eventsDigest:c.option(qe),dependencies:c.vector(qe)}),Ui=c.tuple([c.u64(),qe]),Ed=c.enum("ObjectIn",{NotExist:null,Exist:c.tuple([Ui,Qt])}),Sd=c.enum("ObjectOut",{NotExist:null,ObjectWrite:c.tuple([qe,Qt]),PackageWrite:Ui}),Od=c.enum("IDOperation",{None:null,Created:null,Deleted:null}),xd=c.struct("EffectsObjectChange",{inputState:Ed,outputState:Sd,idOperation:Od}),kd=c.enum("UnchangedSharedKind",{ReadOnlyRoot:Ui,MutateDeleted:c.u64(),ReadDeleted:c.u64(),Cancelled:c.u64(),PerEpochConfig:null}),Td=c.struct("TransactionEffectsV2",{status:ba,executedEpoch:c.u64(),gasUsed:ya,transactionDigest:qe,gasObjectIndex:c.option(c.u32()),eventsDigest:c.option(qe),dependencies:c.vector(qe),lamportVersion:c.u64(),changedObjects:c.vector(c.tuple([se,xd])),unchangedSharedObjects:c.vector(c.tuple([se,kd])),auxDataDigest:c.option(qe)}),jd=c.enum("TransactionEffects",{V1:Id,V2:Td});function Vn(t){switch(t){case"u8":return c.u8();case"u16":return c.u16();case"u32":return c.u32();case"u64":return c.u64();case"u128":return c.u128();case"u256":return c.u256();case"bool":return c.bool();case"string":return c.string();case"id":case"address":return se}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,r]=e.slice(1);return n==="vector"?c.vector(Vn(r)):c.option(Vn(r))}throw new Error(`Invalid Pure type name: ${t}`)}const J={...c,U8:c.u8(),U16:c.u16(),U32:c.u32(),U64:c.u64(),U128:c.u128(),U256:c.u256(),ULEB128:c.uleb128(),Bool:c.bool(),String:c.string(),Address:se,AppId:ca,Argument:Ye,CallArg:Qo,Command:Zo,CompressedSignature:fa,GasData:ia,Intent:la,IntentMessage:da,IntentScope:aa,IntentVersion:ua,MultiSig:fd,MultiSigPkMap:pa,MultiSigPublicKey:ga,ObjectArg:Jo,ObjectDigest:qe,Owner:Qt,PasskeyAuthenticator:gd,ProgrammableMoveCall:Yo,ProgrammableTransaction:ea,PublicKey:ha,SenderSignedData:pd,SenderSignedTransaction:ma,SharedObjectRef:Ho,StructTag:ra,SuiObjectRef:Re,TransactionData:oa,TransactionDataV1:sa,TransactionEffects:jd,TransactionExpiration:na,TransactionKind:ta,TypeTag:$i};BigInt(1e9);const _d="0x1",wa="0x2";qn("0x6");const Ad=`${wa}::sui::SUI`;qn("0x5");const Cd="object",$d="ID",Ud="ascii",Md="String",Bd="string",Pd="String",Rd="option",Dd="Option";function Nd(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&pe(e.package)===pe("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function ui(t){if(typeof t=="string")switch(t){case"address":return J.Address;case"bool":return J.Bool;case"u8":return J.U8;case"u16":return J.U16;case"u32":return J.U32;case"u64":return J.U64;case"u128":return J.U128;case"u256":return J.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return J.vector(J.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=ui(t.vector);return e?J.vector(e):null}if("datatype"in t){const e=pe(t.datatype.package);if(e===pe(_d)){if(t.datatype.module===Ud&&t.datatype.type===Md||t.datatype.module===Bd&&t.datatype.type===Pd)return J.String;if(t.datatype.module===Rd&&t.datatype.type===Dd){const n=ui(t.datatype.typeParameters[0]);return n?J.vector(n):null}}if(e===pe(wa)&&t.datatype.module===Cd&&t.datatype.type===$d)return J.Address}return null}function Fd(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:Gn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:Gn(t.MutableReference)}:{ref:null,body:Gn(t)}}function Gn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:Gn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(Gn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function Ld(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?re(t):t.toBase64()}}}const vt={Pure:Ld,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:pe(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:pe(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:pe(t)}}}}};function cn(t){const e=Object.entries(t).map(([n,r])=>b({[n]:r}));return B(X(e),on(n=>({...n,$kind:Object.keys(n)[0]})))}const kn=B(C(),on(t=>pe(t)),Tt(Xo)),Ae=kn,rn=C(),Te=B(X([C(),B(N(),L())]),Tt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),Nt=b({objectId:kn,version:Te,digest:C()}),ce=B(X([b({GasCoin:k(!0)}),b({Input:B(N(),L()),type:Q(k("pure"))}),b({Input:B(N(),L()),type:Q(k("object"))}),b({Result:B(N(),L())}),b({NestedResult:Xn([B(N(),L()),B(N(),L())])})]),on(t=>({...t,$kind:Object.keys(t)[0]}))),Vd=b({budget:M(Te),price:M(Te),owner:M(kn),payment:M(x(Nt))}),ci=X([k("address"),k("bool"),k("u8"),k("u16"),k("u32"),k("u64"),k("u128"),k("u256"),b({vector:St(()=>ci)}),b({datatype:b({package:C(),module:C(),type:C(),typeParameters:x(St(()=>ci))})}),b({typeParameter:B(N(),L())})]),Gd=b({ref:M(X([k("&"),k("&mut")])),body:ci}),zd=b({package:Ae,module:C(),function:C(),typeArguments:x(C()),arguments:x(ce),_argumentTypes:Q(M(x(Gd)))}),Wd=b({name:C(),inputs:Ot(C(),X([ce,x(ce)])),data:Ot(C(),$e())}),qd=cn({MoveCall:zd,TransferObjects:b({objects:x(ce),address:ce}),SplitCoins:b({coin:ce,amounts:x(ce)}),MergeCoins:b({destination:ce,sources:x(ce)}),Publish:b({modules:x(rn),dependencies:x(Ae)}),MakeMoveVec:b({type:M(C()),elements:x(ce)}),Upgrade:b({modules:x(rn),dependencies:x(Ae),package:Ae,ticket:ce}),$Intent:Wd}),va=cn({ImmOrOwnedObject:Nt,SharedObject:b({objectId:Ae,initialSharedVersion:Te,mutable:an()}),Receiving:Nt}),Kd=cn({Object:va,Pure:b({bytes:rn}),UnresolvedPure:b({value:$e()}),UnresolvedObject:b({objectId:Ae,version:Q(M(Te)),digest:Q(M(C())),initialSharedVersion:Q(M(Te))})}),gs=cn({Object:va,Pure:b({bytes:rn})}),Ia=cn({None:k(!0),Epoch:Te}),dr=b({version:k(2),sender:Ke(kn),expiration:Ke(Ia),gasData:Vd,inputs:x(Kd),commands:x(qd)}),Vt={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>F(ce,n)),address:F(ce,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:F(ce,t),amounts:e.map(n=>F(ce,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:F(ce,t),sources:e.map(n=>F(ce,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:re(new Uint8Array(n))),dependencies:e.map(n=>qn(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(i=>typeof i=="string"?i:re(new Uint8Array(i))),dependencies:e.map(i=>qn(i)),package:n,ticket:F(ce,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>F(ce,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,i])=>[r,Array.isArray(i)?i.map(s=>F(ce,s)):F(ce,i)])),data:n}}}},li=b({digest:C(),objectId:C(),version:X([B(N(),L()),C(),Kn()])}),Xd=cn({ImmOrOwned:li,Shared:b({objectId:Ae,initialSharedVersion:Te,mutable:an()}),Receiving:li}),ms=cn({Object:Xd,Pure:x(B(N(),L()))}),Ea=X([b({kind:k("Input"),index:B(N(),L()),value:$e(),type:Q(k("object"))}),b({kind:k("Input"),index:B(N(),L()),value:$e(),type:k("pure")})]),Hd=X([b({Epoch:B(N(),L())}),b({None:M(k(!0))})]),bs=B(X([N(),C(),Kn()]),Tt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Mi=X([b({bool:M(k(!0))}),b({u8:M(k(!0))}),b({u64:M(k(!0))}),b({u128:M(k(!0))}),b({address:M(k(!0))}),b({signer:M(k(!0))}),b({vector:St(()=>Mi)}),b({struct:St(()=>Jd)}),b({u16:M(k(!0))}),b({u32:M(k(!0))}),b({u256:M(k(!0))})]),Jd=b({address:C(),module:C(),name:C(),typeParams:x(Mi)}),Qd=b({budget:Q(bs),price:Q(bs),payment:Q(x(li)),owner:Q(C())}),Yd=[Ea,b({kind:k("GasCoin")}),b({kind:k("Result"),index:B(N(),L())}),b({kind:k("NestedResult"),index:B(N(),L()),resultIndex:B(N(),L())})],kt=X([...Yd]),Zd=b({kind:k("MoveCall"),target:B(C(),Tt(t=>t.split("::").length===3)),typeArguments:x(C()),arguments:x(kt)}),ef=b({kind:k("TransferObjects"),objects:x(kt),address:kt}),tf=b({kind:k("SplitCoins"),coin:kt,amounts:x(kt)}),nf=b({kind:k("MergeCoins"),destination:kt,sources:x(kt)}),rf=b({kind:k("MakeMoveVec"),type:X([b({Some:Mi}),b({None:M(k(!0))})]),objects:x(kt)}),sf=b({kind:k("Publish"),modules:x(x(B(N(),L()))),dependencies:x(C())}),of=b({kind:k("Upgrade"),modules:x(x(B(N(),L()))),dependencies:x(C()),packageId:C(),ticket:kt}),af=[Zd,ef,tf,nf,sf,of,rf],uf=X([...af]);b({version:k(1),sender:Q(C()),expiration:Ke(Hd),gasConfig:Qd,inputs:x(Ea),transactions:x(uf)});function ys(t){var n;const e=t.inputs.map((r,i)=>{if(r.Object)return{kind:"Input",index:i,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:i,value:{Pure:Array.from(ge(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:i,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:i,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:tt.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(i=>lt(i,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:lt(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(i=>lt(i,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(i=>lt(i,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(i=>Array.from(ge(i))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:lt(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(i=>lt(i,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(i=>lt(i,e)),address:lt(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(i=>Array.from(ge(i))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:lt(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function lt(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function cf(t){var e,n,r;return F(dr,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((r=t.gasConfig.payment)==null?void 0:r.map(i=>({digest:i.digest,objectId:i.objectId,version:i.version.toString()})))??null},inputs:t.inputs.map(i=>{if(i.kind==="Input"){if(In(ms,i.value)){const s=F(ms,i.value);if(s.Object){if(s.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:s.Object.ImmOrOwned.objectId,version:String(s.Object.ImmOrOwned.version),digest:s.Object.ImmOrOwned.digest}}};if(s.Object.Shared)return{Object:{SharedObject:{mutable:s.Object.Shared.mutable??null,initialSharedVersion:s.Object.Shared.initialSharedVersion,objectId:s.Object.Shared.objectId}}};if(s.Object.Receiving)return{Object:{Receiving:{digest:s.Object.Receiving.digest,version:String(s.Object.Receiving.version),objectId:s.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:re(new Uint8Array(s.Pure))}}}return i.type==="object"?{UnresolvedObject:{objectId:i.value}}:{UnresolvedPure:{value:i.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(i=>{switch(i.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in i.type?tt.tagToString(i.type.Some):null,elements:i.objects.map(s=>dt(s))}};case"MergeCoins":return{MergeCoins:{destination:dt(i.destination),sources:i.sources.map(s=>dt(s))}};case"MoveCall":{const[s,l,a]=i.target.split("::");return{MoveCall:{package:s,module:l,function:a,typeArguments:i.typeArguments,arguments:i.arguments.map(h=>dt(h))}}}case"Publish":return{Publish:{modules:i.modules.map(s=>re(Uint8Array.from(s))),dependencies:i.dependencies}};case"SplitCoins":return{SplitCoins:{coin:dt(i.coin),amounts:i.amounts.map(s=>dt(s))}};case"TransferObjects":return{TransferObjects:{objects:i.objects.map(s=>dt(s)),address:dt(i.address)}};case"Upgrade":return{Upgrade:{modules:i.modules.map(s=>re(Uint8Array.from(s))),dependencies:i.dependencies,package:i.packageId,ticket:dt(i.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(i)}`)})})}function dt(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function Jn(t){return X(Object.entries(t).map(([e,n])=>b({[e]:n})))}const Ve=Jn({GasCoin:k(!0),Input:B(N(),L()),Result:B(N(),L()),NestedResult:Xn([B(N(),L()),B(N(),L())])}),lf=b({budget:M(Te),price:M(Te),owner:M(kn),payment:M(x(Nt))}),df=b({package:Ae,module:C(),function:C(),typeArguments:x(C()),arguments:x(Ve)}),ff=b({name:C(),inputs:Ot(C(),X([Ve,x(Ve)])),data:Ot(C(),$e())}),hf=Jn({MoveCall:df,TransferObjects:b({objects:x(Ve),address:Ve}),SplitCoins:b({coin:Ve,amounts:x(Ve)}),MergeCoins:b({destination:Ve,sources:x(Ve)}),Publish:b({modules:x(rn),dependencies:x(Ae)}),MakeMoveVec:b({type:M(C()),elements:x(Ve)}),Upgrade:b({modules:x(rn),dependencies:x(Ae),package:Ae,ticket:Ve}),$Intent:ff}),pf=Jn({ImmOrOwnedObject:Nt,SharedObject:b({objectId:Ae,initialSharedVersion:Te,mutable:an()}),Receiving:Nt}),gf=Jn({Object:pf,Pure:b({bytes:rn}),UnresolvedPure:b({value:$e()}),UnresolvedObject:b({objectId:Ae,version:Q(M(Te)),digest:Q(M(C())),initialSharedVersion:Q(M(Te))})}),mf=Jn({None:k(!0),Epoch:Te}),bf=b({version:k(2),sender:Ke(kn),expiration:Ke(mf),gasData:lf,inputs:x(gf),commands:x(hf)}),yf=50,wf=1000n,vf=5e10;async function If(t,e,n){return await kf(t,e),await xf(t,e),e.onlyTransactionKind||(await Ef(t,e),await Sf(t,e),await Of(t,e)),await Tf(t),await n()}async function Ef(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Qn(e).getReferenceGasPrice()))}async function Sf(t,e){if(t.gasConfig.budget)return;const n=await Qn(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(vf),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=wf*BigInt(t.gasConfig.price||1n),i=BigInt(n.effects.gasUsed.computationCost)+r,s=i+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(s>i?s:i)}async function Of(t,e){if(!t.gasConfig.payment){const r=(await Qn(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:Ad})).data.filter(i=>!t.inputs.find(l=>{var a;return(a=l.Object)!=null&&a.ImmOrOwnedObject?i.coinObjectId===l.Object.ImmOrOwnedObject.objectId:!1})).map(i=>({objectId:i.coinObjectId,digest:i.digest,version:i.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(i=>F(Nt,i))}}async function xf(t,e){const n=t.inputs.filter(p=>{var v;return p.UnresolvedObject&&!(p.UnresolvedObject.version||(v=p.UnresolvedObject)!=null&&v.initialSharedVersion)}),r=[...new Set(n.map(p=>qn(p.UnresolvedObject.objectId)))],i=r.length?zs(r,yf):[],s=(await Promise.all(i.map(p=>Qn(e).multiGetObjects({ids:p,options:{showOwner:!0}})))).flat(),l=new Map(r.map((p,v)=>[p,s[v]])),a=Array.from(l).filter(([p,v])=>v.error).map(([p,v])=>JSON.stringify(v.error));if(a.length)throw new Error(`The following input objects are invalid: ${a.join(", ")}`);const h=s.map(p=>{if(p.error||!p.data)throw new Error(`Failed to fetch object: ${p.error}`);const v=p.data.owner,A=v&&typeof v=="object"&&"Shared"in v?v.Shared.initial_shared_version:null;return{objectId:p.data.objectId,digest:p.data.digest,version:p.data.version,initialSharedVersion:A}}),y=new Map(r.map((p,v)=>[p,h[v]]));for(const[p,v]of t.inputs.entries()){if(!v.UnresolvedObject)continue;let A;const E=pe(v.UnresolvedObject.objectId),I=y.get(E);v.UnresolvedObject.initialSharedVersion??(I==null?void 0:I.initialSharedVersion)?A=vt.SharedObjectRef({objectId:E,initialSharedVersion:v.UnresolvedObject.initialSharedVersion||(I==null?void 0:I.initialSharedVersion),mutable:jf(t,p)}):_f(t,p)&&(A=vt.ReceivingRef({objectId:E,digest:v.UnresolvedObject.digest??(I==null?void 0:I.digest),version:v.UnresolvedObject.version??(I==null?void 0:I.version)})),t.inputs[t.inputs.indexOf(v)]=A??vt.ObjectRef({objectId:E,digest:v.UnresolvedObject.digest??(I==null?void 0:I.digest),version:v.UnresolvedObject.version??(I==null?void 0:I.version)})}}async function kf(t,e){const{inputs:n,commands:r}=t,i=[],s=new Set;r.forEach(a=>{if(a.MoveCall){if(a.MoveCall._argumentTypes)return;if(a.MoveCall.arguments.map(p=>p.$kind==="Input"?t.inputs[p.Input]:null).some(p=>(p==null?void 0:p.UnresolvedPure)||(p==null?void 0:p.UnresolvedObject))){const p=`${a.MoveCall.package}::${a.MoveCall.module}::${a.MoveCall.function}`;s.add(p),i.push(a.MoveCall)}}switch(a.$kind){case"SplitCoins":a.SplitCoins.amounts.forEach(h=>{ws(h,J.U64,t)});break;case"TransferObjects":ws(a.TransferObjects.address,J.Address,t);break}});const l=new Map;if(s.size>0){const a=Qn(e);await Promise.all([...s].map(async h=>{const[y,p,v]=h.split("::"),A=await a.getNormalizedMoveFunction({package:y,module:p,function:v});l.set(h,A.parameters.map(E=>Fd(E)))}))}i.length&&await Promise.all(i.map(async a=>{const h=l.get(`${a.package}::${a.module}::${a.function}`);if(!h)return;const p=h.length>0&&Nd(h.at(-1))?h.slice(0,h.length-1):h;a._argumentTypes=p})),r.forEach(a=>{if(!a.MoveCall)return;const h=a.MoveCall,y=`${h.package}::${h.module}::${h.function}`,p=h._argumentTypes;if(p){if(p.length!==a.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${y}`);p.forEach((v,A)=>{var T,D;const E=h.arguments[A];if(E.$kind!=="Input")return;const I=n[E.Input];if(!I.UnresolvedPure&&!I.UnresolvedObject)return;const U=((T=I.UnresolvedPure)==null?void 0:T.value)??((D=I.UnresolvedObject)==null?void 0:D.objectId),G=ui(v.body);if(G){E.type="pure",n[n.indexOf(I)]=vt.Pure(G.serialize(U));return}if(typeof U!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(U,null,2)}`);E.type="object";const Y=I.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:U}}:I;n[E.Input]=Y})}})}function Tf(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function ws(t,e,n){if(t.$kind!=="Input")return;const r=n.inputs[t.Input];r.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=vt.Pure(e.serialize(r.UnresolvedPure.value)))}function jf(t,e){let n=!1;return t.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);n=i.MoveCall._argumentTypes[s].ref!=="&"||n}(i.$kind==="MakeMoveVec"||i.$kind==="MergeCoins"||i.$kind==="SplitCoins")&&(n=!0)}),n}function _f(t,e){let n=!1;return t.getInputUses(e,(r,i)=>{if(i.MoveCall&&i.MoveCall._argumentTypes){const s=i.MoveCall.arguments.indexOf(r);n=Af(i.MoveCall._argumentTypes[s])||n}}),n}function Af(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function Qn(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Cf(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:r})=>i=>i.moveCall({typeArguments:[n],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[i.object(r)]}),e}function $f(t){function e(n,r){if(typeof n=="string")return t(Vn(n).serialize(r));if(n instanceof Uint8Array||On(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(J.U8.serialize(n)),e.u16=n=>t(J.U16.serialize(n)),e.u32=n=>t(J.U32.serialize(n)),e.u64=n=>t(J.U64.serialize(n)),e.u128=n=>t(J.U128.serialize(n)),e.u256=n=>t(J.U256.serialize(n)),e.bool=n=>t(J.Bool.serialize(n)),e.string=n=>t(J.String.serialize(n)),e.address=n=>t(J.Address.serialize(n)),e.id=e.address,e.vector=(n,r)=>t(J.vector(Vn(n)).serialize(r)),e.option=(n,r)=>t(J.option(Vn(n)).serialize(r)),e}function Uf(t,e){const n=Array.from(`${t}::`).map(i=>i.charCodeAt(0)),r=new Uint8Array(n.length+e.length);return r.set(n),r.set(e,n.length),Ti(r,{dkLen:32})}function vs(t){return pe(t).replace("0x","")}class Ne{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=J.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return Ne.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const n=J.TransactionData.parse(e),r=n==null?void 0:n.V1,i=r.kind.ProgrammableTransaction;if(!r||!i)throw new Error("Unable to deserialize from bytes.");return Ne.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:i.inputs,commands:i.commands})}static restore(e){return e.version===2?new Ne(F(dr,e)):new Ne(F(dr,cf(e)))}static getDigestFromBytes(e){const n=Uf("TransactionData",e);return Sn(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:r}={}){const i=this.inputs,s=this.commands,l={ProgrammableTransaction:{inputs:i,commands:s}};if(r)return J.TransactionKind.serialize(l,{maxSize:e}).toBytes();const a=(n==null?void 0:n.expiration)??this.expiration,h=(n==null?void 0:n.sender)??this.sender,y={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!h)throw new Error("Missing transaction sender");if(!y.budget)throw new Error("Missing gas budget");if(!y.payment)throw new Error("Missing gas payment");if(!y.price)throw new Error("Missing gas price");const p={sender:vs(h),expiration:a||{None:!0},gasData:{payment:y.payment,owner:vs(this.gasData.owner??h),price:BigInt(y.price),budget:BigInt(y.budget)},kind:{ProgrammableTransaction:{inputs:i,commands:s}}};return J.TransactionData.serialize({V1:p},{maxSize:e}).toBytes()}addInput(e,n){const r=this.inputs.length;return this.inputs.push(n),{Input:r,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((r,i)=>(r.$kind==="Input"&&r.Input===e&&n(r,i),r))}mapCommandArguments(e,n){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>n(s,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>n(s,r,e)),r.TransferObjects.address=n(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=n(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>n(s,r,e));break;case"MergeCoins":r.MergeCoins.destination=n(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>n(s,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>n(s,r,e));break;case"Upgrade":r.Upgrade.ticket=n(r.Upgrade.ticket,r,e);break;case"$Intent":const i=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,l]of Object.entries(i))r.$Intent.inputs[s]=Array.isArray(l)?l.map(a=>n(a,r,e)):n(l,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const n of this.commands.keys())this.mapCommandArguments(n,e)}replaceCommand(e,n,r=e){if(!Array.isArray(n)){this.commands[e]=n;return}const i=n.length-1;this.commands.splice(e,1,...n),i!==0&&this.mapArguments((s,l,a)=>{if(a<e+n.length)return s;switch(s.$kind){case"Result":s.Result===e&&(s.Result=r),s.Result>e&&(s.Result+=i);break;case"NestedResult":s.NestedResult[0]===e&&(s.NestedResult[0]=r),s.NestedResult[0]>e&&(s.NestedResult[0]+=i);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return Ne.getDigestFromBytes(e)}snapshot(){return F(dr,this)}shallowClone(){return new Ne({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function Is(t){if(typeof t=="string")return pe(t);if(t.Object)return t.Object.ImmOrOwnedObject?pe(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?pe(t.Object.Receiving.objectId):pe(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return pe(t.UnresolvedObject.objectId)}var Sa=t=>{throw TypeError(t)},Bi=(t,e,n)=>e.has(t)||Sa("Cannot "+n),_=(t,e,n)=>(Bi(t,e,"read from private field"),n?n.call(t):e.get(t)),Je=(t,e,n)=>e.has(t)?Sa("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),de=(t,e,n,r)=>(Bi(t,e,"write to private field"),e.set(t,n),n),Ie=(t,e,n)=>(Bi(t,e,"access private method"),n),Yt,en,bt,st,ot,Et,nt,Bt,R,be,Oa,fr,hr,pr,kr,di,Pi,xa,ka;function Vr(t,e=1/0){const n={$kind:"Result",Result:t},r=[],i=s=>r[s]??(r[s]={$kind:"NestedResult",NestedResult:[t,s]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(s,l){if(l in s)return Reflect.get(s,l);if(l===Symbol.iterator)return function*(){let h=0;for(;h<e;)yield i(h),h++};if(typeof l=="symbol")return;const a=parseInt(l,10);if(!(Number.isNaN(a)||a<0))return i(a)}})}const Ta=Symbol.for("@mysten/transaction");function Mf(t){return!!t&&typeof t=="object"&&t[Ta]===!0}const Es={buildPlugins:new Map,serializationPlugins:new Map},Gr=Symbol.for("@mysten/transaction/registry");function Cn(){try{const t=globalThis;return t[Gr]||(t[Gr]=Es),t[Gr]}catch{return Es}}const ja=class fi{constructor(){Je(this,be),Je(this,Yt),Je(this,en),Je(this,bt,new Map),Je(this,st,[]),Je(this,ot,[]),Je(this,Et,new Set),Je(this,nt,new Set),Je(this,Bt,new Map),Je(this,R),this.object=Cf(n=>{var s,l;if(typeof n=="function")return this.object(this.add(n));if(typeof n=="object"&&In(ce,n))return n;const r=Is(n),i=_(this,R).inputs.find(a=>r===Is(a));return(s=i==null?void 0:i.Object)!=null&&s.SharedObject&&typeof n=="object"&&((l=n.Object)!=null&&l.SharedObject)&&(i.Object.SharedObject.mutable=i.Object.SharedObject.mutable||n.Object.SharedObject.mutable),i?{$kind:"Input",Input:_(this,R).inputs.indexOf(i),type:"object"}:Ie(this,be,hr).call(this,"object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:pe(n)}}:n)});const e=Cn();de(this,R,new Ne),de(this,en,[...e.buildPlugins.values()]),de(this,Yt,[...e.serializationPlugins.values()])}static fromKind(e){const n=new fi;return de(n,R,Ne.fromKindBytes(typeof e=="string"?ge(e):e)),de(n,st,_(n,R).inputs),de(n,ot,_(n,R).commands),n}static from(e){const n=new fi;return Mf(e)?de(n,R,new Ne(e.getData())):typeof e!="string"||!e.startsWith("{")?de(n,R,Ne.fromBytes(typeof e=="string"?ge(e):e)):de(n,R,Ne.restore(JSON.parse(e))),de(n,st,_(n,R).inputs),de(n,ot,_(n,R).commands),n}static registerGlobalSerializationPlugin(e,n){Cn().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){Cn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){Cn().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){Cn().buildPlugins.delete(e)}addSerializationPlugin(e){_(this,Yt).push(e)}addBuildPlugin(e){_(this,en).push(e)}addIntentResolver(e,n){if(_(this,bt).has(e)&&_(this,bt).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);_(this,bt).set(e,n)}setSender(e){_(this,R).sender=e}setSenderIfNotSet(e){_(this,R).sender||(_(this,R).sender=e)}setExpiration(e){_(this,R).expiration=e?F(Ia,e):null}setGasPrice(e){_(this,R).gasConfig.price=String(e)}setGasBudget(e){_(this,R).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){_(this,R).gasData.budget==null&&(_(this,R).gasConfig.budget=String(e))}setGasOwner(e){_(this,R).gasConfig.owner=e}setGasPayment(e){_(this,R).gasConfig.payment=e.map(n=>F(Nt,n))}get blockData(){return ys(_(this,R).snapshot())}getData(){return _(this,R).snapshot()}get[Ta](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:$f(e=>On(e)?Ie(this,be,hr).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):Ie(this,be,hr).call(this,"pure",In(gs,e)?F(gs,e):e instanceof Uint8Array?vt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(vt.ObjectRef(...e))}receivingRef(...e){return this.object(vt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(vt.SharedObjectRef(...e))}add(e){if(typeof e=="function"){if(_(this,Bt).has(e))return _(this,Bt).get(e);const n=Ie(this,be,Oa).call(this),r=e(n);if(!(r&&typeof r=="object"&&"then"in r))return de(this,Et,_(n,Et)),_(this,Bt).set(e,r),r;const i=Ie(this,be,fr).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{result:null}}});_(this,nt).add(Promise.resolve(r).then(l=>{i.$Intent.data.result=l}));const s=Vr(_(this,R).commands.length-1);return _(this,Bt).set(e,s),s}else Ie(this,be,fr).call(this,e);return Vr(_(this,R).commands.length-1)}splitCoins(e,n){const r=Vt.SplitCoins(typeof e=="string"?this.object(e):Ie(this,be,kr).call(this,e),n.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):Ie(this,be,pr).call(this,i)));return Ie(this,be,fr).call(this,r),Vr(_(this,R).commands.length-1,n.length)}mergeCoins(e,n){return this.add(Vt.MergeCoins(this.object(e),n.map(r=>this.object(r))))}publish({modules:e,dependencies:n}){return this.add(Vt.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:r,ticket:i}){return this.add(Vt.Upgrade({modules:e,dependencies:n,package:r,ticket:this.object(i)}))}moveCall({arguments:e,...n}){return this.add(Vt.MoveCall({...n,arguments:e==null?void 0:e.map(r=>Ie(this,be,pr).call(this,r))}))}transferObjects(e,n){return this.add(Vt.TransferObjects(e.map(r=>this.object(r)),typeof n=="string"?this.pure.address(n):Ie(this,be,pr).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Vt.MakeMoveVec({type:e,elements:n.map(r=>this.object(r))}))}serialize(){return JSON.stringify(ys(_(this,R).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(F(bf,_(this,R).snapshot()),(n,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){const{signer:n,...r}=e,i=await this.build(r);return n.signTransaction(i)}async build(e={}){return await this.prepareForSerialization(e),await Ie(this,be,di).call(this,e),_(this,R).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await Ie(this,be,di).call(this,e),_(this,R).getDigest()}async prepareForSerialization(e){var i;await Ie(this,be,xa).call(this),Ie(this,be,ka).call(this);const n=new Set;for(const s of _(this,R).commands)s.$Intent&&n.add(s.$Intent.name);const r=[..._(this,Yt)];for(const s of n)if(!((i=e.supportedIntents)!=null&&i.includes(s))){if(!_(this,bt).has(s))throw new Error(`Missing intent resolver for ${s}`);r.push(_(this,bt).get(s))}await Ie(this,be,Pi).call(this,r,e)}};Yt=new WeakMap;en=new WeakMap;bt=new WeakMap;st=new WeakMap;ot=new WeakMap;Et=new WeakMap;nt=new WeakMap;Bt=new WeakMap;R=new WeakMap;be=new WeakSet;Oa=function(){const t=new ja;return de(t,R,_(this,R)),de(t,Yt,_(this,Yt)),de(t,en,_(this,en)),de(t,bt,_(this,bt)),de(t,nt,_(this,nt)),de(t,Et,new Set(_(this,Et))),de(t,Bt,_(this,Bt)),_(this,st).push(_(t,st)),_(this,ot).push(_(t,ot)),t};fr=function(t){const e=_(this,R).commands.length;return _(this,ot).push(t),_(this,Et).add(e),_(this,R).commands.push(t),_(this,R).mapCommandArguments(e,n=>{if(n.$kind==="Result"&&!_(this,Et).has(n.Result))throw new Error(`Result { Result: ${n.Result} } is not available to use the current transaction`);if(n.$kind==="NestedResult"&&!_(this,Et).has(n.NestedResult[0]))throw new Error(`Result { NestedResult: [${n.NestedResult[0]}, ${n.NestedResult[1]}] } is not available to use the current transaction`);if(n.$kind==="Input"&&n.Input>=_(this,R).inputs.length)throw new Error(`Input { Input: ${n.Input} } references an input that does not exist in the current transaction`);return n}),t};hr=function(t,e){return _(this,st).push(e),_(this,R).addInput(t,e)};pr=function(t){return On(t)?this.pure(t):Ie(this,be,kr).call(this,t)};kr=function(t){if(typeof t=="function"){const e=this.add(t);return typeof e=="function"?Ie(this,be,kr).call(this,e):F(ce,e)}return F(ce,t)};di=async function(t){if(!t.onlyTransactionKind&&!_(this,R).sender)throw new Error("Missing transaction sender");await Ie(this,be,Pi).call(this,[..._(this,en),If],t)};Pi=async function(t,e){const n=r=>{if(r>=t.length)return()=>{};const i=t[r];return async()=>{const s=n(r+1);let l=!1,a=!1;if(await i(_(this,R),e,async()=>{if(l)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);l=!0,await s(),a=!0}),!l)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!a)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)(),de(this,st,_(this,R).inputs),de(this,ot,_(this,R).commands)};xa=async function(){for(;_(this,nt).size>0;){const t=Promise.all(_(this,nt));_(this,nt).clear(),_(this,nt).add(t),await t,_(this,nt).delete(t)}};ka=function(){const t=_(this,R).commands,e=_(this,R).inputs,n=_(this,ot).flat(1/0),r=_(this,st).flat(1/0);if(n.length!==t.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==e.length)throw new Error("Unexpected number of inputs found in transaction data");const i=n.filter(l=>{var a;return((a=l.$Intent)==null?void 0:a.name)!=="AsyncTransactionThunk"});_(this,R).commands=i,_(this,R).inputs=r,de(this,ot,i),de(this,st,r);function s(l){var y;const a=t[l];if(((y=a.$Intent)==null?void 0:y.name)==="AsyncTransactionThunk"){const p=a.$Intent.data.result;if(p==null)throw new Error("AsyncTransactionThunk has not been resolved");return s(p.Result)}const h=i.indexOf(a);if(h===-1)throw new Error("Unable to find original index for command");return h}_(this,R).mapArguments(l=>{if(l.$kind==="Input"){const a=r.indexOf(e[l.Input]);if(a===-1)throw new Error("Input has not been resolved");return{...l,Input:a}}else if(l.$kind==="Result"){const a=s(l.Result);return{...l,Result:a}}else if(l.$kind==="NestedResult"){const a=s(l.NestedResult[0]);return{...l,NestedResult:[a,l.NestedResult[1]]}}return l})};let Bf=ja;async function Pf(t,e){if(t.features["sui:signTransaction"])return t.features["sui:signTransaction"].signTransaction(e);if(!t.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${t.name}) does not support the signTransaction feature.`);const{signTransactionBlock:n}=t.features["sui:signTransactionBlock"],r=Bf.from(await e.transaction.toJSON()),{transactionBlockBytes:i,signature:s}=await n({transactionBlock:r,account:e.account,chain:e.chain});return{bytes:i,signature:s}}const Rf="Slush",_a=5*10**8,qt=class qt{constructor(){jn(this,"state",{wallet:null,accounts:null,isConnected:!1,suiClient:null});jn(this,"listeners",[]);this.state.wallet=null,this.state.suiClient=new Ql({url:cu("testnet")})}getSuiWallet(){const e=nd().get();console.log({availableWallets:e}),this.state.wallet=e.find(n=>n.name===Rf)||null}static getInstance(){return qt.instance||(qt.instance=new qt),qt.instance}getClient(){return this.state.suiClient}getState(){return{...this.state}}setState(e){this.state={...this.state,...e},this.notifyListeners()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.state))}setAccounts(e){this.setState({accounts:e,isConnected:!!e})}};jn(qt,"instance");let hi=qt;const sn=hi.getInstance();setTimeout(()=>{sn.getSuiWallet()},500);async function Df(){const{wallet:t}=sn.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:connect"])throw Error(`Provided wallet (${t.name}) does not support the connect feature.`);const n=(await t.features["standard:connect"].connect()).accounts.filter(r=>r.chains.some(i=>i.split(":")[0]==="sui"));return sn.setAccounts(n),Ca(n[0].address),n}async function Nf(){const{wallet:t}=sn.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:disconnect"])throw Error(`Provided wallet (${t.name}) does not support the disconnect feature.`);await t.features["standard:disconnect"].disconnect(),sn.setAccounts(null),Ca("")}async function Ff(){const t=new zo;t.setGasBudget(_a);const e=t.splitCoins(t.gas,[10**3]);t.transferObjects([e],"0x0b3fc768f8bb3c772321e3e7781cac4a45585b4bc64043686beb634d65341798");try{await Lf(t)}catch(n){console.error(n)}finally{window.location.href="https://monopoly-frontend-git-main-badukweis-projects.vercel.app/"}}async function Lf(t){const e=sn.getClient();if(!e)throw Error("fail to initlize suiClient");const{wallet:n,accounts:r}=sn.getState();if(!n||!r)throw Error("No Connected wallet account");t.setGasBudget(_a);const{bytes:i,signature:s}=await Pf(n,{transaction:{async toJSON(){return await t.toJSON({supportedIntents:[],client:e})}},account:r[0],chain:"sui:testnet"});return await e.executeTransactionBlock({transactionBlock:i,signature:s})}let Pt;const Vf=t=>Pt=t,Aa=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Aa.decode();let nr=null;function gr(){return(nr===null||nr.byteLength===0)&&(nr=new Uint8Array(Pt.memory.buffer)),nr}function Gf(t,e){return t=t>>>0,Aa.decode(gr().subarray(t,t+e))}let pi=0;const mr=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},zf=typeof mr.encodeInto=="function"?function(t,e){return mr.encodeInto(t,e)}:function(t,e){const n=mr.encode(t);return e.set(n),{read:t.length,written:n.length}};function Wf(t,e,n){if(n===void 0){const a=mr.encode(t),h=e(a.length,1)>>>0;return gr().subarray(h,h+a.length).set(a),pi=a.length,h}let r=t.length,i=e(r,1)>>>0;const s=gr();let l=0;for(;l<r;l++){const a=t.charCodeAt(l);if(a>127)break;s[i+l]=a}if(l!==r){l!==0&&(t=t.slice(l)),i=n(i,r,r=l+t.length*3,1)>>>0;const a=gr().subarray(i+l,i+r),h=zf(t,a);l+=h.written,i=n(i,r,l,1)>>>0}return pi=l,i}function Ca(t){const e=Wf(t,Pt.__wbindgen_malloc,Pt.__wbindgen_realloc),n=pi;Pt.update_sui_address(e,n)}function qf(){const t={};return t.wbg={},t.wbg.__wbg_log_242335a0403ba73a=function(e,n){console.log(Gf(e,n))},t.wbg.__wbg_requestConnect_23f392dbaea78b16=function(){Df()},t.wbg.__wbg_requestDisconnect_5f9126d4b90cbbcd=function(){Nf()},t.wbg.__wbg_requestPaidTransaction_f555f8b073f9944b=function(){Ff()},t.wbg.__wbindgen_init_externref_table=function(){const e=Pt.__wbindgen_export_0,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg}async function Kf(t){return Pt!==void 0?Pt:(typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/Autonomous-World/assets/autonomous-game_bg-D4su9TiL.wasm",import.meta.url)),qf())}const rr=2,Z=document.querySelector("#glcanvas");var O,$n=null,je,vn,ht,m,q,zr,En,br=[];function Xf(t){if(t==1){let e=function(s){var l=s.getExtension("OES_vertex_array_object");l?(s.createVertexArray=function(){return l.createVertexArrayOES()},s.deleteVertexArray=function(a){l.deleteVertexArrayOES(a)},s.bindVertexArray=function(a){l.bindVertexArrayOES(a)},s.isVertexArray=function(a){return l.isVertexArrayOES(a)}):alert("Unable to get OES_vertex_array_object extension")},n=function(s){var l=s.getExtension("ANGLE_instanced_arrays");l&&(s.vertexAttribDivisor=function(a,h){l.vertexAttribDivisorANGLE(a,h)},s.drawArraysInstanced=function(a,h,y,p){l.drawArraysInstancedANGLE(a,h,y,p)},s.drawElementsInstanced=function(a,h,y,p,v){l.drawElementsInstancedANGLE(a,h,y,p,v)})},r=function(s){var l=s.getExtension("EXT_disjoint_timer_query");l&&(s.createQuery=function(){return l.createQueryEXT()},s.beginQuery=function(a,h){return l.beginQueryEXT(a,h)},s.endQuery=function(a){return l.endQueryEXT(a)},s.deleteQuery=function(a){l.deleteQueryEXT(a)},s.getQueryObject=function(a,h){return l.getQueryObjectEXT(a,h)})},i=function(s){var l=s.getExtension("WEBGL_draw_buffers");l&&(s.drawBuffers=function(a){return l.drawBuffersWEBGL(a)})};O=Z.getContext("webgl");try{O.getExtension("EXT_shader_texture_lod"),O.getExtension("OES_standard_derivatives")}catch(s){console.warn(s)}e(O),n(O),r(O),i(O),O.getExtension("WEBGL_depth_texture")==null&&alert("Cant initialize WEBGL_depth_texture extension")}else O=Z.getContext("webgl2");O===null&&alert("Unable to initialize WebGL. Your browser or machine may not support it.")}Z.focus(),Z.requestPointerLock=Z.requestPointerLock||Z.mozRequestPointerLock||function(){},document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||function(){};function Se(t,e){t==!1&&alert(e)}function W(t,e,n){return new e(je.buffer,t,n)}function ye(t,e){let n=new Uint8Array(je.buffer,t);for(var r,i,s,l,a=0,h=a+e,y="";!(a>=h);){if(r=n[a++],!r)return y;if(!(r&128)){y+=String.fromCharCode(r);continue}if(i=n[a++]&63,(r&224)==192){y+=String.fromCharCode((r&31)<<6|i);continue}s=n[a++]&63,(r&240)==224?r=(r&15)<<12|i<<6|s:((r&248)!=240&&console.warn("Invalid UTF-8 leading byte 0x"+r.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),r=(r&7)<<18|i<<12|s<<6|n[a++]&63),r<65536?y+=String.fromCharCode(r):(l=r-65536,y+=String.fromCharCode(55296|l>>10,56320|l&1023))}return y}function Wr(t,e,n,r){for(var i,s,l=n,a=n+r,h=0;h<t.length;++h)if(i=t.charCodeAt(h),i>=55296&&i<=57343&&(s=t.charCodeAt(++h),i=65536+((i&1023)<<10)|s&1023),i<=127){if(n>=a)break;e[n++]=i}else if(i<=2047){if(n+1>=a)break;e[n++]=192|i>>6,e[n++]=128|i&63}else if(i<=65535){if(n+2>=a)break;e[n++]=224|i>>12,e[n++]=128|i>>6&63,e[n++]=128|i&63}else{if(n+3>=a)break;i>=2097152&&console.warn("Invalid Unicode code point 0x"+i.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),e[n++]=240|i>>18,e[n++]=128|i>>12&63,e[n++]=128|i>>6&63,e[n++]=128|i&63}return n-l}ht={loaded_files:[],unique_id:0},m={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],timerQueries:[],contexts:{},programInfos:{},getNewId:function(t){for(var e=m.counter++,n=t.length;n<e;n++)t[n]=null;return e},validateGLObjectID:function(t,e,n,r){e!=0&&(t[e]===null?console.error(n+" called with an already deleted "+r+" ID "+e+"!"):t[e]||console.error(n+" called with an invalid "+r+" ID "+e+"!"))},getSource:function(t,e,n,r){for(var i,s="",l=0;l<e;++l)i=r==0?void 0:W(r+l*4,Uint32Array,1)[0],s+=ye(W(n+l*4,Uint32Array,1)[0],i);return s},populateUniformTable:function(t){m.validateGLObjectID(m.programs,t,"populateUniformTable","program");for(var e,n,r,i,s,l,a=m.programs[t],h=m.programInfos[t]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},y=h.uniforms,p=O.getProgramParameter(a,35718),v=0;v<p;++v)if(i=O.getActiveUniform(a,v),e=i.name,h.maxUniformLength=Math.max(h.maxUniformLength,e.length+1),e.slice(-1)=="]"&&(e=e.slice(0,e.lastIndexOf("["))),n=O.getUniformLocation(a,e),n)for(r=m.getNewId(m.uniforms),y[e]=[i.size,r],m.uniforms[r]=n,s=1;s<i.size;++s)l=e+"["+s+"]",n=O.getUniformLocation(a,l),r=m.getNewId(m.uniforms),m.uniforms[r]=n}};function hn(t,e,n,r,i){for(var s,l,a=0;a<t;a++)s=O[n](),l=s&&m.getNewId(r),s?(s.name=l,r[l]=s):(console.error("GL_INVALID_OPERATION"),m.recordError(1282),alert("GL_INVALID_OPERATION in "+i+": GLctx."+n+" returned null - most likely GL context is lost!")),W(e+a*4,Int32Array,1)[0]=l}function Hf(t,e,n){if(!e){console.error("GL_INVALID_VALUE in glGet"+n+"v(name="+t+": Function called with null out pointer!"),m.recordError(1281);return}var r,i,s,l=void 0;switch(t){case 36346:l=1;break;case 36344:return;case 34814:case 36345:l=0;break;case 34466:i=O.getParameter(34467),l=i?i.length:0;break;case 33309:Se(!1,"unimplemented");break;case 33307:case 33308:Se(!1,"unimplemented");break}if(l===void 0)switch(r=O.getParameter(t),typeof r){case"number":l=r;break;case"boolean":l=r?1:0;break;case"string":m.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v("+t+") on a name which returns a string!");return;case"object":if(r===null)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{l=0;break}default:{m.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v("+t+") and it returns null!");return}}else if(r instanceof Float32Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Array){for(s=0;s<r.length;++s)Se(!1,"unimplemented");return}else try{l=r.name|0}catch(a){m.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+t+")! (error: "+a+")");return}break;default:m.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+t+") and it returns "+r+" of type "+typeof r+"!");return}switch(n){case"EM_FUNC_SIG_PARAM_I64":W(e,Int32Array,1)[0]=l;case"EM_FUNC_SIG_PARAM_I":W(e,Int32Array,1)[0]=l;break;case"EM_FUNC_SIG_PARAM_F":W(e,Float32Array,1)[0]=l;break;case"EM_FUNC_SIG_PARAM_B":W(e,Int8Array,1)[0]=l?1:0;break;default:throw"internal glGet error, bad type: "+n}}function qr(t,e){var n=Tr(),r=t.clientWidth*n,i=t.clientHeight*n;(t.width!=r||t.height!=i)&&(t.width=r,t.height=i,e!=null&&e(Math.floor(r),Math.floor(i)))}function gi(){q.frame(),window.blocking_event_loop||(vn&&window.cancelAnimationFrame(vn),vn=window.requestAnimationFrame(gi))}const Jf=10,Qf=11,Yf=12,Zf=13,Ss=1,Os=2,xs=4;function ks(t){switch(t){case 0:return 0;case 1:return 2;case 2:return 1;default:return t}}function Kr(t){switch(t){case"Space":return 32;case"Quote":return 222;case"Comma":return 44;case"Minus":return 45;case"Period":return 46;case"Slash":return 189;case"Digit0":return 48;case"Digit1":return 49;case"Digit2":return 50;case"Digit3":return 51;case"Digit4":return 52;case"Digit5":return 53;case"Digit6":return 54;case"Digit7":return 55;case"Digit8":return 56;case"Digit9":return 57;case"Semicolon":return 59;case"Equal":return 61;case"KeyA":return 65;case"KeyB":return 66;case"KeyC":return 67;case"KeyD":return 68;case"KeyE":return 69;case"KeyF":return 70;case"KeyG":return 71;case"KeyH":return 72;case"KeyI":return 73;case"KeyJ":return 74;case"KeyK":return 75;case"KeyL":return 76;case"KeyM":return 77;case"KeyN":return 78;case"KeyO":return 79;case"KeyP":return 80;case"KeyQ":return 81;case"KeyR":return 82;case"KeyS":return 83;case"KeyT":return 84;case"KeyU":return 85;case"KeyV":return 86;case"KeyW":return 87;case"KeyX":return 88;case"KeyY":return 89;case"KeyZ":return 90;case"BracketLeft":return 91;case"Backslash":return 92;case"BracketRight":return 93;case"Backquote":return 96;case"Escape":return 256;case"Enter":return 257;case"Tab":return 258;case"Backspace":return 259;case"Insert":return 260;case"Delete":return 261;case"ArrowRight":return 262;case"ArrowLeft":return 263;case"ArrowDown":return 264;case"ArrowUp":return 265;case"PageUp":return 266;case"PageDown":return 267;case"Home":return 268;case"End":return 269;case"CapsLock":return 280;case"ScrollLock":return 281;case"NumLock":return 282;case"PrintScreen":return 283;case"Pause":return 284;case"F1":return 290;case"F2":return 291;case"F3":return 292;case"F4":return 293;case"F5":return 294;case"F6":return 295;case"F7":return 296;case"F8":return 297;case"F9":return 298;case"F10":return 299;case"F11":return 300;case"F12":return 301;case"F13":return 302;case"F14":return 303;case"F15":return 304;case"F16":return 305;case"F17":return 306;case"F18":return 307;case"F19":return 308;case"F20":return 309;case"F21":return 310;case"F22":return 311;case"F23":return 312;case"F24":return 313;case"Numpad0":return 320;case"Numpad1":return 321;case"Numpad2":return 322;case"Numpad3":return 323;case"Numpad4":return 324;case"Numpad5":return 325;case"Numpad6":return 326;case"Numpad7":return 327;case"Numpad8":return 328;case"Numpad9":return 329;case"NumpadDecimal":return 330;case"NumpadDivide":return 331;case"NumpadMultiply":return 332;case"NumpadSubtract":return 333;case"NumpadAdd":return 334;case"NumpadEnter":return 335;case"NumpadEqual":return 336;case"ShiftLeft":return 340;case"ControlLeft":return 341;case"AltLeft":return 342;case"OSLeft":return 343;case"ShiftRight":return 344;case"ControlRight":return 345;case"AltRight":return 346;case"OSRight":return 347;case"ContextMenu":return 348}console.log("Unsupported keyboard key: ",t)}function Tr(){return 1}function Xr(t,e,n){return t==O.ALPHA?e*n:t==O.RGB?e*n*3:t==O.RGBA?e*n*4:e*n*3}function Gt(t,e){var n=Z.getBoundingClientRect(),r=(t-n.left)*Tr(),i=(e-n.top)*Tr();return{x:r,y:i}}zr=!1,En={env:{console_debug:function(t){console.debug(ye(t))},console_log:function(t){console.log(ye(t))},console_info:function(t){console.info(ye(t))},console_warn:function(t){console.warn(ye(t))},console_error:function(t){console.error(ye(t))},set_emscripten_shader_hack:function(t){zr=t},sapp_set_clipboard:function(t,e){$n=ye(t,e)},dpi_scale:Tr,rand:function(){return Math.floor(Math.random()*2147483647)},now:function(){return Date.now()/1e3},canvas_width:function(){return Math.floor(Z.width)},canvas_height:function(){return Math.floor(Z.height)},glClearDepthf:function(t){O.clearDepth(t)},glClearColor:function(t,e,n,r){O.clearColor(t,e,n,r)},glClearStencil:function(t){O.clearStencil(t)},glColorMask:function(t,e,n,r){O.colorMask(t,e,n,r)},glScissor:function(t,e,n,r){O.scissor(t,e,n,r)},glClear:function(t){O.clear(t)},glGenTextures:function(t,e){hn(t,e,"createTexture",m.textures,"glGenTextures")},glActiveTexture:function(t){O.activeTexture(t)},glBindTexture:function(t,e){m.validateGLObjectID(m.textures,e,"glBindTexture","texture"),O.bindTexture(t,m.textures[e])},glTexImage2D:function(t,e,n,r,i,s,l,a,h){O.texImage2D(t,e,n,r,i,s,l,a,h?W(h,Uint8Array,Xr(n,r,i)):null)},glTexSubImage2D:function(t,e,n,r,i,s,l,a,h){O.texSubImage2D(t,e,n,r,i,s,l,a,h?W(h,Uint8Array,Xr(l,i,s)):null)},glReadPixels:function(t,e,n,r,i,s,l){var a=W(l,Uint8Array,Xr(i,n,r));O.readPixels(t,e,n,r,i,s,a)},glTexParameteri:function(t,e,n){O.texParameteri(t,e,n)},glUniform1fv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform1fv","location"),Se((n&3)==0,"Pointer to float data passed to glUniform1fv must be aligned to four bytes!");var r=W(n,Float32Array,1*e);O.uniform1fv(m.uniforms[t],r)},glUniform2fv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform2fv","location"),Se((n&3)==0,"Pointer to float data passed to glUniform2fv must be aligned to four bytes!");var r=W(n,Float32Array,2*e);O.uniform2fv(m.uniforms[t],r)},glUniform3fv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform3fv","location"),Se((n&3)==0,"Pointer to float data passed to glUniform3fv must be aligned to four bytes!");var r=W(n,Float32Array,3*e);O.uniform3fv(m.uniforms[t],r)},glUniform4fv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform4fv","location"),Se((n&3)==0,"Pointer to float data passed to glUniform4fv must be aligned to four bytes!");var r=W(n,Float32Array,4*e);O.uniform4fv(m.uniforms[t],r)},glUniform1iv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform1fv","location"),Se((n&3)==0,"Pointer to i32 data passed to glUniform1iv must be aligned to four bytes!");var r=W(n,Int32Array,1*e);O.uniform1iv(m.uniforms[t],r)},glUniform2iv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform2fv","location"),Se((n&3)==0,"Pointer to i32 data passed to glUniform2iv must be aligned to four bytes!");var r=W(n,Int32Array,2*e);O.uniform2iv(m.uniforms[t],r)},glUniform3iv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform3fv","location"),Se((n&3)==0,"Pointer to i32 data passed to glUniform3iv must be aligned to four bytes!");var r=W(n,Int32Array,3*e);O.uniform3iv(m.uniforms[t],r)},glUniform4iv:function(t,e,n){m.validateGLObjectID(m.uniforms,t,"glUniform4fv","location"),Se((n&3)==0,"Pointer to i32 data passed to glUniform4iv must be aligned to four bytes!");var r=W(n,Int32Array,4*e);O.uniform4iv(m.uniforms[t],r)},glBlendFunc:function(t,e){O.blendFunc(t,e)},glBlendEquationSeparate:function(t,e){O.blendEquationSeparate(t,e)},glDisable:function(t){O.disable(t)},glDrawElements:function(t,e,n,r){O.drawElements(t,e,n,r)},glGetIntegerv:function(t,e){Hf(t,e,"EM_FUNC_SIG_PARAM_I")},glUniform1f:function(t,e){m.validateGLObjectID(m.uniforms,t,"glUniform1f","location"),O.uniform1f(m.uniforms[t],e)},glUniform1i:function(t,e){m.validateGLObjectID(m.uniforms,t,"glUniform1i","location"),O.uniform1i(m.uniforms[t],e)},glGetAttribLocation:function(t,e){return O.getAttribLocation(m.programs[t],ye(e))},glEnableVertexAttribArray:function(t){O.enableVertexAttribArray(t)},glDisableVertexAttribArray:function(t){O.disableVertexAttribArray(t)},glVertexAttribPointer:function(t,e,n,r,i,s){O.vertexAttribPointer(t,e,n,!!r,i,s)},glVertexAttribIPointer:function(t,e,n,r,i){O.vertexAttribIPointer(t,e,n,r,i)},glGetUniformLocation:function(t,e){m.validateGLObjectID(m.programs,t,"glGetUniformLocation","program"),e=ye(e);var n,r,i=0;return e[e.length-1]=="]"&&(n=e.lastIndexOf("["),i=e[n+1]!="]"?parseInt(e.slice(n+1)):0,e=e.slice(0,n)),r=m.programInfos[t]&&m.programInfos[t].uniforms[e],r&&i>=0&&i<r[0]?r[1]+i:-1},glUniformMatrix4fv:function(t,e,n,r){m.validateGLObjectID(m.uniforms,t,"glUniformMatrix4fv","location"),Se((r&3)==0,"Pointer to float data passed to glUniformMatrix4fv must be aligned to four bytes!");var i=W(r,Float32Array,16);O.uniformMatrix4fv(m.uniforms[t],!!n,i)},glUseProgram:function(t){m.validateGLObjectID(m.programs,t,"glUseProgram","program"),O.useProgram(m.programs[t])},glGenVertexArrays:function(t,e){hn(t,e,"createVertexArray",m.vaos,"glGenVertexArrays")},glGenFramebuffers:function(t,e){hn(t,e,"createFramebuffer",m.framebuffers,"glGenFramebuffers")},glGenRenderbuffers:function(t,e){hn(t,e,"createRenderbuffer",m.renderbuffers,"glGenRenderbuffers")},glBindVertexArray:function(t){O.bindVertexArray(m.vaos[t])},glBindFramebuffer:function(t,e){m.validateGLObjectID(m.framebuffers,e,"glBindFramebuffer","framebuffer"),O.bindFramebuffer(t,m.framebuffers[e])},glBindRenderbuffer:function(t,e){m.validateGLObjectID(m.renderbuffers,e,"glBindRenderbuffer","renderbuffer"),O.bindRenderbuffer(t,m.renderbuffers[e])},glGenBuffers:function(t,e){hn(t,e,"createBuffer",m.buffers,"glGenBuffers")},glBindBuffer:function(t,e){m.validateGLObjectID(m.buffers,e,"glBindBuffer","buffer"),O.bindBuffer(t,m.buffers[e])},glBufferData:function(t,e,n,r){O.bufferData(t,n?W(n,Uint8Array,e):e,r)},glBufferSubData:function(t,e,n,r){O.bufferSubData(t,e,r?W(r,Uint8Array,n):n)},glEnable:function(t){O.enable(t)},glFlush:function(){O.flush()},glFinish:function(){O.finish()},glDepthFunc:function(t){O.depthFunc(t)},glBlendFuncSeparate:function(t,e,n,r){O.blendFuncSeparate(t,e,n,r)},glViewport:function(t,e,n,r){O.viewport(t,e,n,r)},glDrawArrays:function(t,e,n){O.drawArrays(t,e,n)},glDrawBuffers:function(t,e){O.drawBuffers(W(e,Int32Array,t))},glCreateProgram:function(){var t=m.getNewId(m.programs),e=O.createProgram();return e.name=t,m.programs[t]=e,t},glAttachShader:function(t,e){m.validateGLObjectID(m.programs,t,"glAttachShader","program"),m.validateGLObjectID(m.shaders,e,"glAttachShader","shader"),O.attachShader(m.programs[t],m.shaders[e])},glDetachShader:function(t,e){m.validateGLObjectID(m.programs,t,"glDetachShader","program"),m.validateGLObjectID(m.shaders,e,"glDetachShader","shader"),O.detachShader(m.programs[t],m.shaders[e])},glLinkProgram:function(t){m.validateGLObjectID(m.programs,t,"glLinkProgram","program"),O.linkProgram(m.programs[t]),m.populateUniformTable(t)},glPixelStorei:function(t,e){O.pixelStorei(t,e)},glFramebufferTexture2D:function(t,e,n,r,i){m.validateGLObjectID(m.textures,r,"glFramebufferTexture2D","texture"),O.framebufferTexture2D(t,e,n,m.textures[r],i)},glGetProgramiv:function(t,e,n){if(Se(n),m.validateGLObjectID(m.programs,t,"glGetProgramiv","program"),t>=m.counter){console.error("GL_INVALID_VALUE in glGetProgramiv");return}var r,i=m.programInfos[t];if(!i){console.error("GL_INVALID_OPERATION in glGetProgramiv(program="+t+", pname="+e+", p=0x"+n.toString(16)+"): The specified GL object name does not refer to a program object!");return}if(e==35716)r=O.getProgramInfoLog(m.programs[t]),Se(r!==null),W(n,Int32Array,1)[0]=r.length+1;else if(e==35719){console.error("unsupported operation");return}else if(e==35722){console.error("unsupported operation");return}else if(e==35381){console.error("unsupported operation");return}else W(n,Int32Array,1)[0]=O.getProgramParameter(m.programs[t],e)},glCreateShader:function(t){var e=m.getNewId(m.shaders);return m.shaders[e]=O.createShader(t),e},glStencilFuncSeparate:function(t,e,n,r){O.stencilFuncSeparate(t,e,n,r)},glStencilMaskSeparate:function(t,e){O.stencilMaskSeparate(t,e)},glStencilOpSeparate:function(t,e,n,r){O.stencilOpSeparate(t,e,n,r)},glFrontFace:function(t){O.frontFace(t)},glCullFace:function(t){O.cullFace(t)},glCopyTexImage2D:function(t,e,n,r,i,s,l,a){O.copyTexImage2D(t,e,n,r,i,s,l,a)},glShaderSource:function(t,e,n,r){m.validateGLObjectID(m.shaders,t,"glShaderSource","shader");var i,s=m.getSource(t,e,n,r);zr&&(s=s.replace(/#extension GL_OES_standard_derivatives : enable/g,""),s=s.replace(/#extension GL_EXT_shader_texture_lod : enable/g,""),i="",s.indexOf("gl_FragColor")!=-1&&(i+=`out mediump vec4 GL_FragColor;
`,s=s.replace(/gl_FragColor/g,"GL_FragColor")),s.indexOf("attribute")!=-1?(s=s.replace(/attribute/g,"in"),s=s.replace(/varying/g,"out")):s=s.replace(/varying/g,"in"),s=s.replace(/textureCubeLodEXT/g,"textureCubeLod"),s=s.replace(/texture2DLodEXT/g,"texture2DLod"),s=s.replace(/texture2DProjLodEXT/g,"texture2DProjLod"),s=s.replace(/texture2DGradEXT/g,"texture2DGrad"),s=s.replace(/texture2DProjGradEXT/g,"texture2DProjGrad"),s=s.replace(/textureCubeGradEXT/g,"textureCubeGrad"),s=s.replace(/textureCube/g,"texture"),s=s.replace(/texture1D/g,"texture"),s=s.replace(/texture2D/g,"texture"),s=s.replace(/texture3D/g,"texture"),s=s.replace(/#version 100/g,`#version 300 es
`+i)),O.shaderSource(m.shaders[t],s)},glGetProgramInfoLog:function(t,e,n,r){m.validateGLObjectID(m.programs,t,"glGetProgramInfoLog","program");var i,s=O.getProgramInfoLog(m.programs[t]);Se(s!==null);let l=W(r,Uint8Array,e);for(i=0;i<e;i++)l[i]=s.charCodeAt(i)},glGetString:function(t){var e=O.getParameter(t).toString(),n=e.length+1,r=q.allocate_vec_u8(n),i=new Uint8Array(je.buffer,r,n);return i[e.length]=0,Wr(e,i,0,n),r},glCompileShader:function(t){m.validateGLObjectID(m.shaders,t,"glCompileShader","shader"),O.compileShader(m.shaders[t])},glGetShaderiv:function(t,e,n){if(Se(n),m.validateGLObjectID(m.shaders,t,"glGetShaderiv","shader"),e==35716){var r,i,s=O.getShaderInfoLog(m.shaders[t]);Se(s!==null),W(n,Int32Array,1)[0]=s.length+1}else e==35720?(r=O.getShaderSource(m.shaders[t]),i=r===null||r.length==0?0:r.length+1,W(n,Int32Array,1)[0]=i):W(n,Int32Array,1)[0]=O.getShaderParameter(m.shaders[t],e)},glGetShaderInfoLog:function(t,e,n,r){m.validateGLObjectID(m.shaders,t,"glGetShaderInfoLog","shader");var i,s=O.getShaderInfoLog(m.shaders[t]);Se(s!==null);let l=W(r,Uint8Array,e);for(i=0;i<e;i++)l[i]=s.charCodeAt(i)},glVertexAttribDivisor:function(t,e){O.vertexAttribDivisor(t,e)},glDrawArraysInstanced:function(t,e,n,r){O.drawArraysInstanced(t,e,n,r)},glDrawElementsInstanced:function(t,e,n,r,i){O.drawElementsInstanced(t,e,n,r,i)},glDeleteShader:function(t){var e=m.shaders[t];e!=null&&(O.deleteShader(e),m.shaders[t]=null)},glDeleteProgram:function(t){var e=m.programs[t];e!=null&&(O.deleteProgram(e),m.programs[t]=null)},glDeleteBuffers:function(t,e){for(var n,r,i=0;i<t;i++)r=W(e+i*4,Uint32Array,1)[0],n=m.buffers[r],n&&(O.deleteBuffer(n),n.name=0,m.buffers[r]=null)},glDeleteFramebuffers:function(t,e){for(var n,r,i=0;i<t;i++)r=W(e+i*4,Uint32Array,1)[0],n=m.framebuffers[r],n&&(O.deleteFramebuffer(n),n.name=0,m.framebuffers[r]=null)},glDeleteTextures:function(t,e){for(var n,r,i=0;i<t;i++)r=W(e+i*4,Uint32Array,1)[0],n=m.textures[r],n&&(O.deleteTexture(n),n.name=0,m.textures[r]=null)},glGenQueries:function(t,e){hn(t,e,"createQuery",m.timerQueries,"glGenQueries")},glDeleteQueries:function(t){for(var e,n,r=0;r<t;r++)n=W(textures+r*4,Uint32Array,1)[0],e=m.timerQueries[n],e&&(O.deleteQuery(e),e.name=0,m.timerQueries[n]=null)},glBeginQuery:function(t,e){m.validateGLObjectID(m.timerQueries,e,"glBeginQuery","id"),O.beginQuery(t,m.timerQueries[e])},glEndQuery:function(t){O.endQuery(t)},glGetQueryObjectiv:function(t,e,n){m.validateGLObjectID(m.timerQueries,t,"glGetQueryObjectiv","id");let r=O.getQueryObject(m.timerQueries[t],e);W(n,Uint32Array,1)[0]=r},glGetQueryObjectui64v:function(t,e,n){m.validateGLObjectID(m.timerQueries,t,"glGetQueryObjectui64v","id");let r=O.getQueryObject(m.timerQueries[t],e),i=W(n,Uint32Array,2);i[0]=r,i[1]=(r-i[0])/4294967296},glGenerateMipmap:function(t){O.generateMipmap(t)},setup_canvas_size:function(t){window.high_dpi=t,qr(Z)},run_animation_loop:function(t){Z.onmousemove=function(r){var i=Gt(r.clientX,r.clientY),s=i.x,l=i.y;q.mouse_move(Math.floor(s),Math.floor(l)),(r.movementX!=0||r.movementY!=0)&&q.raw_mouse_move(Math.floor(r.movementX),Math.floor(r.movementY))},Z.onmousedown=function(r){var i=Gt(r.clientX,r.clientY),s=i.x,l=i.y,a=ks(r.button);q.mouse_down(s,l,a)},Z.addEventListener("wheel",function(r){r.preventDefault(),q.mouse_wheel(-r.deltaX,-r.deltaY)}),Z.onmouseup=function(r){var i=Gt(r.clientX,r.clientY),s=i.x,l=i.y,a=ks(r.button);q.mouse_up(s,l,a)},Z.onkeydown=function(r){var i,s=Kr(r.code);switch(s){case 32:case 262:case 263:case 264:case 265:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 259:case 258:case 39:case 47:r.preventDefault();break}i=0,r.ctrlKey&&(i|=Os),r.shiftKey&&(i|=Ss),r.altKey&&(i|=xs),q.key_down(s,i,r.repeat),(s==32||s==39||s==47)&&q.key_press(s)},Z.onkeyup=function(r){var i=Kr(r.code),s=0;r.ctrlKey&&(s|=Os),r.shiftKey&&(s|=Ss),r.altKey&&(s|=xs),q.key_up(i,s)},Z.onkeypress=function(r){var i=Kr(r.code);(i==261||r.ctrlKey)==!1&&q.key_press(r.charCode)},Z.addEventListener("touchstart",function(r){r.preventDefault();for(const i of r.changedTouches){let s=Gt(i.clientX,i.clientY);q.touch(Jf,i.identifier,s.x,s.y)}}),Z.addEventListener("touchend",function(r){r.preventDefault();for(const i of r.changedTouches){let s=Gt(i.clientX,i.clientY);q.touch(Yf,i.identifier,s.x,s.y)}}),Z.addEventListener("touchcancel",function(r){r.preventDefault();for(const i of r.changedTouches){let s=Gt(i.clientX,i.clientY);q.touch(Zf,i.identifier,s.x,s.y)}}),Z.addEventListener("touchmove",function(r){r.preventDefault();for(const i of r.changedTouches){let s=Gt(i.clientX,i.clientY);q.touch(Qf,i.identifier,s.x,s.y)}}),window.onresize=function(){qr(Z,q.resize)},window.addEventListener("copy",function(){$n!=null&&(event.clipboardData.setData("text/plain",$n),event.preventDefault())}),window.addEventListener("cut",function(){$n!=null&&(event.clipboardData.setData("text/plain",$n),event.preventDefault())}),window.addEventListener("paste",function(r){r.stopPropagation(),r.preventDefault();var i,s,l,a=r.clipboardData||window.clipboardData,h=a.getData("Text");h!=null&&h.length!=0&&(i=new TextEncoder().encode(h).length,s=q.allocate_vec_u8(i),l=new Uint8Array(je.buffer,s,i),Wr(h,l,0,i),q.on_clipboard_paste(s,i))}),window.ondragover=function(r){r.preventDefault()},window.ondrop=async function(r){r.preventDefault(),q.on_files_dropped_start();for(let i of r.dataTransfer.files){const s=i.name.length,l=q.allocate_vec_u8(s),a=new Uint8Array(je.buffer,l,s);Wr(i.name,a,0,s);const h=await i.arrayBuffer(),y=h.byteLength,p=q.allocate_vec_u8(y);new Uint8Array(je.buffer,p,y).set(new Uint8Array(h),0),q.on_file_dropped(l,s,p,y)}q.on_files_dropped_finish()};let e=document.hasFocus();var n=function(){let r=document.hasFocus();e==r&&(q.focus(r),e=r)};document.addEventListener("visibilitychange",n),window.addEventListener("focus",n),window.addEventListener("blur",n),window.blocking_event_loop=t,window.requestAnimationFrame(gi)},fs_load_file:function(t,e){var n,r=ye(t,e),i=ht.unique_id;return ht.unique_id+=1,n=new XMLHttpRequest,n.open("GET",r,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(this.readyState===4)if(this.status===200){var s=new Uint8Array(this.response);ht.loaded_files[i]=s,q.file_loaded(i)}else ht.loaded_files[i]=null,q.file_loaded(i)},n.send(),i},fs_get_buffer_size:function(t){return ht.loaded_files[t]==null?-1:ht.loaded_files[t].length},fs_take_buffer:function(t,e,n){var r,i,s=ht.loaded_files[t];for(console.assert(s.length<=n),i=new Uint8Array(je.buffer,e,n),r=0;r<s.length;r++)i[r]=s[r];delete ht.loaded_files[t]},sapp_set_cursor_grab:function(t){t?Z.requestPointerLock():document.exitPointerLock()},sapp_set_cursor:function(t,e){Z.style.cursor=ye(t,e)},sapp_is_fullscreen:function(){let t=document.fullscreenElement;return t!=null&&t.id==Z.id},sapp_set_fullscreen:function(t){t?Z.requestFullscreen():document.exitFullscreen()},sapp_set_window_size:function(t,e){Z.width=t,Z.height=e,qr(Z,q.resize)},sapp_schedule_update:function(){vn&&window.cancelAnimationFrame(vn),vn=window.requestAnimationFrame(gi)},init_webgl:Xf}};function eh(t){if(t!=null)for(var e=0;e<t.length;e++)t[e].register_plugin!=null&&t[e].register_plugin!=null&&t[e].register_plugin(En)}function Ts(t){if(t!=null)for(var e,n,r=0;r<t.length;r++)t[r].on_init!=null&&t[r].on_init!=null&&t[r].on_init(),t[r].name==null||t[r].name==null||t[r].version==null||t[r].version==null?(console.warn("Some of the registred plugins do not have name or version"),console.warn("Probably old version of the plugin used")):(e=t[r].name+"_crate_version",q[e]==null?console.log("Plugin "+t[r].name+" is present in JS bundle, but is not used in the rust code."):(n=q[e](),t[r].version!=n&&console.error("Plugin "+t[r].name+" version mismatchjs version: "+t[r].version+", crate version: "+n)))}function yr(t){br.push(t)}function js(t){var e=WebAssembly.Module.imports(t);for(const n in e)En.env[e[n].name]==null&&(console.warn("No "+e[n].name+" function in gl.js"),En.env[e[n].name]=function(){console.warn("Missed function: "+e[n].name)})}function th(t){var e=fetch(t);eh(br),typeof WebAssembly.compileStreaming=="function"?WebAssembly.compileStreaming(e).then(n=>(js(n),WebAssembly.instantiate(n,En))).then(n=>{je=n.exports.memory,q=n.exports;var r=q.crate_version();rr!=r&&console.error("Version mismatch: gl.js version is: "+rr+", miniquad crate version is: "+r),Ts(br),n.exports.main()}).catch(n=>{console.error(n)}):e.then(function(n){return n.arrayBuffer()}).then(function(n){return WebAssembly.compile(n)}).then(function(n){return js(n),WebAssembly.instantiate(n,En)}).then(function(n){je=n.exports.memory,q=n.exports;var r=q.crate_version();rr!=r&&console.error("Version mismatch: gl.js version is: "+rr+", rust sapp-wasm crate version is: "+r),Ts(br),n.exports.main()}).catch(n=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(n)})}(function(){const t=window.AudioContext||window.webkitAudioContext;let e,n=new Map,r=[],i=1,s=1;function l(){if(e==null){e=new t,e.listener;{let D=window.AudioContext||window.webkitAudioContext,ne=new D;var T=function(){console.log("fix"),e.resume();var K=ne.createBuffer(1,1,22050),H=ne.createBufferSource();H.buffer=K,H.connect(ne.destination),H.start?H.start(0):H.play?H.play(0):H.noteOn&&H.noteOn(0),document.removeEventListener("touchstart",T),document.removeEventListener("touchend",T),document.removeEventListener("mousedown",T),document.removeEventListener("keydown",T)};document.addEventListener("touchstart",T),document.addEventListener("touchend",T),document.addEventListener("mousedown",T),document.addEventListener("keydown",T)}}}function a(T,D){let ne=je.buffer.slice(T,T+D),K=i;return i+=1,e.decodeAudioData(ne,function(H){n.set(K,H)},function(H){console.error("Failed to decode audio buffer",H)}),K}function h(T){return n.has(T)&&n.get(T)!=null}function y(){let T=r.find(D=>D.sound_key===0);return T!=null?T.source=e.createBufferSource():(T={sound_key:0,playback_key:0,source:e.createBufferSource(),gain_node:e.createGain(),ended:null},r.push(T)),T}function p(T){try{T.source.removeEventListener("ended",T.ended),T.source.disconnect(),T.gain_node.disconnect(),T.sound_key=0,T.playback_key=0}catch(D){console.error("Error stopping sound",D)}}function v(T,D,ne){let K=s++,H=y();H.sound_key=T,H.playback_key=K,H.source.connect(H.gain_node),H.gain_node.connect(e.destination),H.gain_node.gain.value=D,H.source.loop=ne,H.ended=function(){p(H)},H.source.addEventListener("ended",H.ended);try{H.source.buffer=n.get(T),H.source.start(0)}catch(Fe){console.error("Error starting sound",Fe)}return K}function A(T,D){r.forEach(ne=>{ne.sound_key===T&&(ne.gain_node.gain.value=D)})}function E(T){r.forEach(D=>{D.sound_key===T&&p(D)})}function I(T){E(T),n.delete(T)}function U(T){let D=r.find(ne=>ne.playback_key===T);D!=null&&p(D)}function G(T,D){let ne=r.find(K=>K.playback_key===T);ne!=null&&(ne.gain_node.gain.value=D)}function Y(T){T.env.audio_init=l,T.env.audio_add_buffer=a,T.env.audio_play_buffer=v,T.env.audio_source_is_loaded=h,T.env.audio_source_set_volume=A,T.env.audio_source_stop=E,T.env.audio_source_delete=I,T.env.audio_playback_stop=U,T.env.audio_playback_set_volume=G}yr({register_plugin:Y,version:1,name:"macroquad_audio"})})(),function(){var t,e={};e[-1]=null,e[-2]=void 0,t=0;function n(s){s.env.js_create_string=function(l,a){var h=ye(l,a);return i(h)},s.env.js_create_buffer=function(l,a){var h=new Uint8Array(je.buffer,l,a),y=new Uint8Array(new ArrayBuffer(h.byteLength));return y.set(new Uint8Array(h)),i(y)},s.env.js_create_object=function(){var l={};return i(l)},s.env.js_set_field_f32=function(l,a,h,y){var p=ye(a,h);e[l][p]=y},s.env.js_set_field_u32=function(l,a,h,y){var p=ye(a,h);e[l][p]=y},s.env.js_set_field_string=function(l,a,h,y,p){var v=ye(a,h),A=ye(y,p);e[l][v]=A},s.env.js_unwrap_to_str=function(l,a,h){for(var y=e[l],p=r(y),v=p.length,A=new Uint8Array(je.buffer,a,h),E=0;E<v;E++)A[E]=p[E]},s.env.js_unwrap_to_buf=function(l,a,h){for(var y=e[l],p=y.length,v=new Uint8Array(je.buffer,a,h),A=0;A<p;A++)v[A]=y[A]},s.env.js_string_length=function(l){var a=e[l];return r(a).length},s.env.js_buf_length=function(l){var a=e[l];return a.length},s.env.js_free_object=function(l){delete e[l]},s.env.js_have_field=function(l,a,h){var y=ye(a,h);return e[l][y]!==void 0},s.env.js_field_f32=function(l,a,h){var y=ye(a,h);return e[l][y]},s.env.js_field_u32=function(l,a,h){var y=ye(a,h);return e[l][y]},s.env.js_field=function(l,a,h){var y=ye(a,h),p=e[l][y];return i(p)},s.env.js_field_num=function(l,a,h){var y=ye(a,h);return e[l][y]}}yr({register_plugin:n,version:1,name:"sapp_jsutils"});function r(s){for(var l,a=[],h=0;h<s.length;h++)l=s.charCodeAt(h),l<128?a.push(l):l<2048?a.push(192|l>>6,128|l&63):l<55296||l>=57344?a.push(224|l>>12,128|l>>6&63,128|l&63):(h++,l=65536+((l&1023)<<10|s.charCodeAt(h)&1023),a.push(240|l>>18,128|l>>12&63,128|l>>6&63,128|l&63));return a}function i(s){if(s==null)return-2;if(s===null)return-1;var l=t;return e[l]=s,t+=1,l}}(),function(){function t(){}function e(E){E.env.ws_connect=h,E.env.ws_is_connected=a,E.env.ws_send=y,E.env.ws_try_recv=p,E.env.http_make_request=A,E.env.http_try_recv=v}yr({register_plugin:e,on_init:t,version:1,name:"quad_net"});var n,r,i,s=0,l=[];function a(){return s}function h(E){r=new WebSocket(consume_js_object(E)),r.binaryType="arraybuffer",r.onopen=function(){s=1},r.onmessage=function(I){if(typeof I.data=="string")l.push({text:1,data:I.data});else{var U=new Uint8Array(I.data);l.push({text:0,data:U})}}}function y(E){var I=consume_js_object(E);I.buffer!=null?r.send(I.buffer):r.send(I)}function p(){return l.length!=0?js_object(l.shift()):-1}i=0,n={};function v(E){if(n[E]!=null&&n[E]!=null){var I=n[E];return n[E]=null,js_object(I)}return-1}function A(E,I,U,G){var Y,T,D,ne,K,H=i;i+=1,E==0&&(T="POST"),E==1&&(T="PUT"),E==2&&(T="GET"),E==3&&(T="DELETE"),ne=consume_js_object(I),K=consume_js_object(U),D=consume_js_object(G),Y=new XMLHttpRequest,Y.open(T,ne,!0),Y.responseType="arraybuffer";for(const Fe in D)Y.setRequestHeader(Fe,D[Fe]);return Y.onload=function(){if(this.status==200){var Fe=new Uint8Array(this.response);n[H]=Fe}},Y.onerror=function(Fe){console.error("Failed to make a request"),console.error(Fe)},Y.send(K),H}}();window.wasmInitialized=new Promise(async t=>{let e=await Kf();yr({register_plugin:n=>n.wbg=e,on_init:()=>{Vf(q),t()},version:"0.0.1",name:"wbg"}),th("./wasm/autonomous-game_bg.wasm")});var Hr={},Un={},_s;function nh(){if(_s)return Un;_s=1,Un.byteLength=a,Un.toByteArray=y,Un.fromByteArray=A;for(var t=[],e=[],n=typeof Uint8Array<"u"?Uint8Array:Array,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,s=r.length;i<s;++i)t[i]=r[i],e[r.charCodeAt(i)]=i;e[45]=62,e[95]=63;function l(E){var I=E.length;if(I%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var U=E.indexOf("=");U===-1&&(U=I);var G=U===I?0:4-U%4;return[U,G]}function a(E){var I=l(E),U=I[0],G=I[1];return(U+G)*3/4-G}function h(E,I,U){return(I+U)*3/4-U}function y(E){var I,U=l(E),G=U[0],Y=U[1],T=new n(h(E,G,Y)),D=0,ne=Y>0?G-4:G,K;for(K=0;K<ne;K+=4)I=e[E.charCodeAt(K)]<<18|e[E.charCodeAt(K+1)]<<12|e[E.charCodeAt(K+2)]<<6|e[E.charCodeAt(K+3)],T[D++]=I>>16&255,T[D++]=I>>8&255,T[D++]=I&255;return Y===2&&(I=e[E.charCodeAt(K)]<<2|e[E.charCodeAt(K+1)]>>4,T[D++]=I&255),Y===1&&(I=e[E.charCodeAt(K)]<<10|e[E.charCodeAt(K+1)]<<4|e[E.charCodeAt(K+2)]>>2,T[D++]=I>>8&255,T[D++]=I&255),T}function p(E){return t[E>>18&63]+t[E>>12&63]+t[E>>6&63]+t[E&63]}function v(E,I,U){for(var G,Y=[],T=I;T<U;T+=3)G=(E[T]<<16&16711680)+(E[T+1]<<8&65280)+(E[T+2]&255),Y.push(p(G));return Y.join("")}function A(E){for(var I,U=E.length,G=U%3,Y=[],T=16383,D=0,ne=U-G;D<ne;D+=T)Y.push(v(E,D,D+T>ne?ne:D+T));return G===1?(I=E[U-1],Y.push(t[I>>2]+t[I<<4&63]+"==")):G===2&&(I=(E[U-2]<<8)+E[U-1],Y.push(t[I>>10]+t[I>>4&63]+t[I<<2&63]+"=")),Y.join("")}return Un}var ir={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var As;function rh(){return As||(As=1,ir.read=function(t,e,n,r,i){var s,l,a=i*8-r-1,h=(1<<a)-1,y=h>>1,p=-7,v=n?i-1:0,A=n?-1:1,E=t[e+v];for(v+=A,s=E&(1<<-p)-1,E>>=-p,p+=a;p>0;s=s*256+t[e+v],v+=A,p-=8);for(l=s&(1<<-p)-1,s>>=-p,p+=r;p>0;l=l*256+t[e+v],v+=A,p-=8);if(s===0)s=1-y;else{if(s===h)return l?NaN:(E?-1:1)*(1/0);l=l+Math.pow(2,r),s=s-y}return(E?-1:1)*l*Math.pow(2,s-r)},ir.write=function(t,e,n,r,i,s){var l,a,h,y=s*8-i-1,p=(1<<y)-1,v=p>>1,A=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,E=r?0:s-1,I=r?1:-1,U=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,l=p):(l=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-l))<1&&(l--,h*=2),l+v>=1?e+=A/h:e+=A*Math.pow(2,1-v),e*h>=2&&(l++,h/=2),l+v>=p?(a=0,l=p):l+v>=1?(a=(e*h-1)*Math.pow(2,i),l=l+v):(a=e*Math.pow(2,v-1)*Math.pow(2,i),l=0));i>=8;t[n+E]=a&255,E+=I,a/=256,i-=8);for(l=l<<i|a,y+=i;y>0;t[n+E]=l&255,E+=I,l/=256,y-=8);t[n+E-I]|=U*128}),ir}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var Cs;function ih(){return Cs||(Cs=1,function(t){const e=nh(),n=rh(),r=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=a,t.SlowBuffer=T,t.INSPECT_MAX_BYTES=50;const i=2147483647;t.kMaxLength=i,a.TYPED_ARRAY_SUPPORT=s(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function s(){try{const d=new Uint8Array(1),o={foo:function(){return 42}};return Object.setPrototypeOf(o,Uint8Array.prototype),Object.setPrototypeOf(d,o),d.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function l(d){if(d>i)throw new RangeError('The value "'+d+'" is invalid for option "size"');const o=new Uint8Array(d);return Object.setPrototypeOf(o,a.prototype),o}function a(d,o,u){if(typeof d=="number"){if(typeof o=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return v(d)}return h(d,o,u)}a.poolSize=8192;function h(d,o,u){if(typeof d=="string")return A(d,o);if(ArrayBuffer.isView(d))return I(d);if(d==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d);if(Xe(d,ArrayBuffer)||d&&Xe(d.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(Xe(d,SharedArrayBuffer)||d&&Xe(d.buffer,SharedArrayBuffer)))return U(d,o,u);if(typeof d=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const f=d.valueOf&&d.valueOf();if(f!=null&&f!==d)return a.from(f,o,u);const g=G(d);if(g)return g;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof d[Symbol.toPrimitive]=="function")return a.from(d[Symbol.toPrimitive]("string"),o,u);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof d)}a.from=function(d,o,u){return h(d,o,u)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function y(d){if(typeof d!="number")throw new TypeError('"size" argument must be of type number');if(d<0)throw new RangeError('The value "'+d+'" is invalid for option "size"')}function p(d,o,u){return y(d),d<=0?l(d):o!==void 0?typeof u=="string"?l(d).fill(o,u):l(d).fill(o):l(d)}a.alloc=function(d,o,u){return p(d,o,u)};function v(d){return y(d),l(d<0?0:Y(d)|0)}a.allocUnsafe=function(d){return v(d)},a.allocUnsafeSlow=function(d){return v(d)};function A(d,o){if((typeof o!="string"||o==="")&&(o="utf8"),!a.isEncoding(o))throw new TypeError("Unknown encoding: "+o);const u=D(d,o)|0;let f=l(u);const g=f.write(d,o);return g!==u&&(f=f.slice(0,g)),f}function E(d){const o=d.length<0?0:Y(d.length)|0,u=l(o);for(let f=0;f<o;f+=1)u[f]=d[f]&255;return u}function I(d){if(Xe(d,Uint8Array)){const o=new Uint8Array(d);return U(o.buffer,o.byteOffset,o.byteLength)}return E(d)}function U(d,o,u){if(o<0||d.byteLength<o)throw new RangeError('"offset" is outside of buffer bounds');if(d.byteLength<o+(u||0))throw new RangeError('"length" is outside of buffer bounds');let f;return o===void 0&&u===void 0?f=new Uint8Array(d):u===void 0?f=new Uint8Array(d,o):f=new Uint8Array(d,o,u),Object.setPrototypeOf(f,a.prototype),f}function G(d){if(a.isBuffer(d)){const o=Y(d.length)|0,u=l(o);return u.length===0||d.copy(u,0,0,o),u}if(d.length!==void 0)return typeof d.length!="number"||$r(d.length)?l(0):E(d);if(d.type==="Buffer"&&Array.isArray(d.data))return E(d.data)}function Y(d){if(d>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return d|0}function T(d){return+d!=d&&(d=0),a.alloc(+d)}a.isBuffer=function(o){return o!=null&&o._isBuffer===!0&&o!==a.prototype},a.compare=function(o,u){if(Xe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),Xe(u,Uint8Array)&&(u=a.from(u,u.offset,u.byteLength)),!a.isBuffer(o)||!a.isBuffer(u))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(o===u)return 0;let f=o.length,g=u.length;for(let w=0,S=Math.min(f,g);w<S;++w)if(o[w]!==u[w]){f=o[w],g=u[w];break}return f<g?-1:g<f?1:0},a.isEncoding=function(o){switch(String(o).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(o,u){if(!Array.isArray(o))throw new TypeError('"list" argument must be an Array of Buffers');if(o.length===0)return a.alloc(0);let f;if(u===void 0)for(u=0,f=0;f<o.length;++f)u+=o[f].length;const g=a.allocUnsafe(u);let w=0;for(f=0;f<o.length;++f){let S=o[f];if(Xe(S,Uint8Array))w+S.length>g.length?(a.isBuffer(S)||(S=a.from(S)),S.copy(g,w)):Uint8Array.prototype.set.call(g,S,w);else if(a.isBuffer(S))S.copy(g,w);else throw new TypeError('"list" argument must be an Array of Buffers');w+=S.length}return g};function D(d,o){if(a.isBuffer(d))return d.length;if(ArrayBuffer.isView(d)||Xe(d,ArrayBuffer))return d.byteLength;if(typeof d!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof d);const u=d.length,f=arguments.length>2&&arguments[2]===!0;if(!f&&u===0)return 0;let g=!1;for(;;)switch(o){case"ascii":case"latin1":case"binary":return u;case"utf8":case"utf-8":return Cr(d).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return u*2;case"hex":return u>>>1;case"base64":return qi(d).length;default:if(g)return f?-1:Cr(d).length;o=(""+o).toLowerCase(),g=!0}}a.byteLength=D;function ne(d,o,u){let f=!1;if((o===void 0||o<0)&&(o=0),o>this.length||((u===void 0||u>this.length)&&(u=this.length),u<=0)||(u>>>=0,o>>>=0,u<=o))return"";for(d||(d="utf8");;)switch(d){case"hex":return La(this,o,u);case"utf8":case"utf-8":return Ri(this,o,u);case"ascii":return Na(this,o,u);case"latin1":case"binary":return Fa(this,o,u);case"base64":return Ra(this,o,u);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Va(this,o,u);default:if(f)throw new TypeError("Unknown encoding: "+d);d=(d+"").toLowerCase(),f=!0}}a.prototype._isBuffer=!0;function K(d,o,u){const f=d[o];d[o]=d[u],d[u]=f}a.prototype.swap16=function(){const o=this.length;if(o%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let u=0;u<o;u+=2)K(this,u,u+1);return this},a.prototype.swap32=function(){const o=this.length;if(o%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let u=0;u<o;u+=4)K(this,u,u+3),K(this,u+1,u+2);return this},a.prototype.swap64=function(){const o=this.length;if(o%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let u=0;u<o;u+=8)K(this,u,u+7),K(this,u+1,u+6),K(this,u+2,u+5),K(this,u+3,u+4);return this},a.prototype.toString=function(){const o=this.length;return o===0?"":arguments.length===0?Ri(this,0,o):ne.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(o){if(!a.isBuffer(o))throw new TypeError("Argument must be a Buffer");return this===o?!0:a.compare(this,o)===0},a.prototype.inspect=function(){let o="";const u=t.INSPECT_MAX_BYTES;return o=this.toString("hex",0,u).replace(/(.{2})/g,"$1 ").trim(),this.length>u&&(o+=" ... "),"<Buffer "+o+">"},r&&(a.prototype[r]=a.prototype.inspect),a.prototype.compare=function(o,u,f,g,w){if(Xe(o,Uint8Array)&&(o=a.from(o,o.offset,o.byteLength)),!a.isBuffer(o))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof o);if(u===void 0&&(u=0),f===void 0&&(f=o?o.length:0),g===void 0&&(g=0),w===void 0&&(w=this.length),u<0||f>o.length||g<0||w>this.length)throw new RangeError("out of range index");if(g>=w&&u>=f)return 0;if(g>=w)return-1;if(u>=f)return 1;if(u>>>=0,f>>>=0,g>>>=0,w>>>=0,this===o)return 0;let S=w-g,z=f-u;const fe=Math.min(S,z),oe=this.slice(g,w),he=o.slice(u,f);for(let te=0;te<fe;++te)if(oe[te]!==he[te]){S=oe[te],z=he[te];break}return S<z?-1:z<S?1:0};function H(d,o,u,f,g){if(d.length===0)return-1;if(typeof u=="string"?(f=u,u=0):u>2147483647?u=2147483647:u<-2147483648&&(u=-2147483648),u=+u,$r(u)&&(u=g?0:d.length-1),u<0&&(u=d.length+u),u>=d.length){if(g)return-1;u=d.length-1}else if(u<0)if(g)u=0;else return-1;if(typeof o=="string"&&(o=a.from(o,f)),a.isBuffer(o))return o.length===0?-1:Fe(d,o,u,f,g);if(typeof o=="number")return o=o&255,typeof Uint8Array.prototype.indexOf=="function"?g?Uint8Array.prototype.indexOf.call(d,o,u):Uint8Array.prototype.lastIndexOf.call(d,o,u):Fe(d,[o],u,f,g);throw new TypeError("val must be string, number or Buffer")}function Fe(d,o,u,f,g){let w=1,S=d.length,z=o.length;if(f!==void 0&&(f=String(f).toLowerCase(),f==="ucs2"||f==="ucs-2"||f==="utf16le"||f==="utf-16le")){if(d.length<2||o.length<2)return-1;w=2,S/=2,z/=2,u/=2}function fe(he,te){return w===1?he[te]:he.readUInt16BE(te*w)}let oe;if(g){let he=-1;for(oe=u;oe<S;oe++)if(fe(d,oe)===fe(o,he===-1?0:oe-he)){if(he===-1&&(he=oe),oe-he+1===z)return he*w}else he!==-1&&(oe-=oe-he),he=-1}else for(u+z>S&&(u=S-z),oe=u;oe>=0;oe--){let he=!0;for(let te=0;te<z;te++)if(fe(d,oe+te)!==fe(o,te)){he=!1;break}if(he)return oe}return-1}a.prototype.includes=function(o,u,f){return this.indexOf(o,u,f)!==-1},a.prototype.indexOf=function(o,u,f){return H(this,o,u,f,!0)},a.prototype.lastIndexOf=function(o,u,f){return H(this,o,u,f,!1)};function $a(d,o,u,f){u=Number(u)||0;const g=d.length-u;f?(f=Number(f),f>g&&(f=g)):f=g;const w=o.length;f>w/2&&(f=w/2);let S;for(S=0;S<f;++S){const z=parseInt(o.substr(S*2,2),16);if($r(z))return S;d[u+S]=z}return S}function Ua(d,o,u,f){return Yn(Cr(o,d.length-u),d,u,f)}function Ma(d,o,u,f){return Yn(qa(o),d,u,f)}function Ba(d,o,u,f){return Yn(qi(o),d,u,f)}function Pa(d,o,u,f){return Yn(Ka(o,d.length-u),d,u,f)}a.prototype.write=function(o,u,f,g){if(u===void 0)g="utf8",f=this.length,u=0;else if(f===void 0&&typeof u=="string")g=u,f=this.length,u=0;else if(isFinite(u))u=u>>>0,isFinite(f)?(f=f>>>0,g===void 0&&(g="utf8")):(g=f,f=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const w=this.length-u;if((f===void 0||f>w)&&(f=w),o.length>0&&(f<0||u<0)||u>this.length)throw new RangeError("Attempt to write outside buffer bounds");g||(g="utf8");let S=!1;for(;;)switch(g){case"hex":return $a(this,o,u,f);case"utf8":case"utf-8":return Ua(this,o,u,f);case"ascii":case"latin1":case"binary":return Ma(this,o,u,f);case"base64":return Ba(this,o,u,f);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Pa(this,o,u,f);default:if(S)throw new TypeError("Unknown encoding: "+g);g=(""+g).toLowerCase(),S=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Ra(d,o,u){return o===0&&u===d.length?e.fromByteArray(d):e.fromByteArray(d.slice(o,u))}function Ri(d,o,u){u=Math.min(d.length,u);const f=[];let g=o;for(;g<u;){const w=d[g];let S=null,z=w>239?4:w>223?3:w>191?2:1;if(g+z<=u){let fe,oe,he,te;switch(z){case 1:w<128&&(S=w);break;case 2:fe=d[g+1],(fe&192)===128&&(te=(w&31)<<6|fe&63,te>127&&(S=te));break;case 3:fe=d[g+1],oe=d[g+2],(fe&192)===128&&(oe&192)===128&&(te=(w&15)<<12|(fe&63)<<6|oe&63,te>2047&&(te<55296||te>57343)&&(S=te));break;case 4:fe=d[g+1],oe=d[g+2],he=d[g+3],(fe&192)===128&&(oe&192)===128&&(he&192)===128&&(te=(w&15)<<18|(fe&63)<<12|(oe&63)<<6|he&63,te>65535&&te<1114112&&(S=te))}}S===null?(S=65533,z=1):S>65535&&(S-=65536,f.push(S>>>10&1023|55296),S=56320|S&1023),f.push(S),g+=z}return Da(f)}const Di=4096;function Da(d){const o=d.length;if(o<=Di)return String.fromCharCode.apply(String,d);let u="",f=0;for(;f<o;)u+=String.fromCharCode.apply(String,d.slice(f,f+=Di));return u}function Na(d,o,u){let f="";u=Math.min(d.length,u);for(let g=o;g<u;++g)f+=String.fromCharCode(d[g]&127);return f}function Fa(d,o,u){let f="";u=Math.min(d.length,u);for(let g=o;g<u;++g)f+=String.fromCharCode(d[g]);return f}function La(d,o,u){const f=d.length;(!o||o<0)&&(o=0),(!u||u<0||u>f)&&(u=f);let g="";for(let w=o;w<u;++w)g+=Xa[d[w]];return g}function Va(d,o,u){const f=d.slice(o,u);let g="";for(let w=0;w<f.length-1;w+=2)g+=String.fromCharCode(f[w]+f[w+1]*256);return g}a.prototype.slice=function(o,u){const f=this.length;o=~~o,u=u===void 0?f:~~u,o<0?(o+=f,o<0&&(o=0)):o>f&&(o=f),u<0?(u+=f,u<0&&(u=0)):u>f&&(u=f),u<o&&(u=o);const g=this.subarray(o,u);return Object.setPrototypeOf(g,a.prototype),g};function Ee(d,o,u){if(d%1!==0||d<0)throw new RangeError("offset is not uint");if(d+o>u)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(o,u,f){o=o>>>0,u=u>>>0,f||Ee(o,u,this.length);let g=this[o],w=1,S=0;for(;++S<u&&(w*=256);)g+=this[o+S]*w;return g},a.prototype.readUintBE=a.prototype.readUIntBE=function(o,u,f){o=o>>>0,u=u>>>0,f||Ee(o,u,this.length);let g=this[o+--u],w=1;for(;u>0&&(w*=256);)g+=this[o+--u]*w;return g},a.prototype.readUint8=a.prototype.readUInt8=function(o,u){return o=o>>>0,u||Ee(o,1,this.length),this[o]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(o,u){return o=o>>>0,u||Ee(o,2,this.length),this[o]|this[o+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(o,u){return o=o>>>0,u||Ee(o,2,this.length),this[o]<<8|this[o+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),(this[o]|this[o+1]<<8|this[o+2]<<16)+this[o+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),this[o]*16777216+(this[o+1]<<16|this[o+2]<<8|this[o+3])},a.prototype.readBigUInt64LE=jt(function(o){o=o>>>0,dn(o,"offset");const u=this[o],f=this[o+7];(u===void 0||f===void 0)&&Tn(o,this.length-8);const g=u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24,w=this[++o]+this[++o]*2**8+this[++o]*2**16+f*2**24;return BigInt(g)+(BigInt(w)<<BigInt(32))}),a.prototype.readBigUInt64BE=jt(function(o){o=o>>>0,dn(o,"offset");const u=this[o],f=this[o+7];(u===void 0||f===void 0)&&Tn(o,this.length-8);const g=u*2**24+this[++o]*2**16+this[++o]*2**8+this[++o],w=this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f;return(BigInt(g)<<BigInt(32))+BigInt(w)}),a.prototype.readIntLE=function(o,u,f){o=o>>>0,u=u>>>0,f||Ee(o,u,this.length);let g=this[o],w=1,S=0;for(;++S<u&&(w*=256);)g+=this[o+S]*w;return w*=128,g>=w&&(g-=Math.pow(2,8*u)),g},a.prototype.readIntBE=function(o,u,f){o=o>>>0,u=u>>>0,f||Ee(o,u,this.length);let g=u,w=1,S=this[o+--g];for(;g>0&&(w*=256);)S+=this[o+--g]*w;return w*=128,S>=w&&(S-=Math.pow(2,8*u)),S},a.prototype.readInt8=function(o,u){return o=o>>>0,u||Ee(o,1,this.length),this[o]&128?(255-this[o]+1)*-1:this[o]},a.prototype.readInt16LE=function(o,u){o=o>>>0,u||Ee(o,2,this.length);const f=this[o]|this[o+1]<<8;return f&32768?f|4294901760:f},a.prototype.readInt16BE=function(o,u){o=o>>>0,u||Ee(o,2,this.length);const f=this[o+1]|this[o]<<8;return f&32768?f|4294901760:f},a.prototype.readInt32LE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),this[o]|this[o+1]<<8|this[o+2]<<16|this[o+3]<<24},a.prototype.readInt32BE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),this[o]<<24|this[o+1]<<16|this[o+2]<<8|this[o+3]},a.prototype.readBigInt64LE=jt(function(o){o=o>>>0,dn(o,"offset");const u=this[o],f=this[o+7];(u===void 0||f===void 0)&&Tn(o,this.length-8);const g=this[o+4]+this[o+5]*2**8+this[o+6]*2**16+(f<<24);return(BigInt(g)<<BigInt(32))+BigInt(u+this[++o]*2**8+this[++o]*2**16+this[++o]*2**24)}),a.prototype.readBigInt64BE=jt(function(o){o=o>>>0,dn(o,"offset");const u=this[o],f=this[o+7];(u===void 0||f===void 0)&&Tn(o,this.length-8);const g=(u<<24)+this[++o]*2**16+this[++o]*2**8+this[++o];return(BigInt(g)<<BigInt(32))+BigInt(this[++o]*2**24+this[++o]*2**16+this[++o]*2**8+f)}),a.prototype.readFloatLE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),n.read(this,o,!0,23,4)},a.prototype.readFloatBE=function(o,u){return o=o>>>0,u||Ee(o,4,this.length),n.read(this,o,!1,23,4)},a.prototype.readDoubleLE=function(o,u){return o=o>>>0,u||Ee(o,8,this.length),n.read(this,o,!0,52,8)},a.prototype.readDoubleBE=function(o,u){return o=o>>>0,u||Ee(o,8,this.length),n.read(this,o,!1,52,8)};function xe(d,o,u,f,g,w){if(!a.isBuffer(d))throw new TypeError('"buffer" argument must be a Buffer instance');if(o>g||o<w)throw new RangeError('"value" argument is out of bounds');if(u+f>d.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(o,u,f,g){if(o=+o,u=u>>>0,f=f>>>0,!g){const z=Math.pow(2,8*f)-1;xe(this,o,u,f,z,0)}let w=1,S=0;for(this[u]=o&255;++S<f&&(w*=256);)this[u+S]=o/w&255;return u+f},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(o,u,f,g){if(o=+o,u=u>>>0,f=f>>>0,!g){const z=Math.pow(2,8*f)-1;xe(this,o,u,f,z,0)}let w=f-1,S=1;for(this[u+w]=o&255;--w>=0&&(S*=256);)this[u+w]=o/S&255;return u+f},a.prototype.writeUint8=a.prototype.writeUInt8=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,1,255,0),this[u]=o&255,u+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,2,65535,0),this[u]=o&255,this[u+1]=o>>>8,u+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,2,65535,0),this[u]=o>>>8,this[u+1]=o&255,u+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,4,4294967295,0),this[u+3]=o>>>24,this[u+2]=o>>>16,this[u+1]=o>>>8,this[u]=o&255,u+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,4,4294967295,0),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4};function Ni(d,o,u,f,g){Wi(o,f,g,d,u,7);let w=Number(o&BigInt(4294967295));d[u++]=w,w=w>>8,d[u++]=w,w=w>>8,d[u++]=w,w=w>>8,d[u++]=w;let S=Number(o>>BigInt(32)&BigInt(4294967295));return d[u++]=S,S=S>>8,d[u++]=S,S=S>>8,d[u++]=S,S=S>>8,d[u++]=S,u}function Fi(d,o,u,f,g){Wi(o,f,g,d,u,7);let w=Number(o&BigInt(4294967295));d[u+7]=w,w=w>>8,d[u+6]=w,w=w>>8,d[u+5]=w,w=w>>8,d[u+4]=w;let S=Number(o>>BigInt(32)&BigInt(4294967295));return d[u+3]=S,S=S>>8,d[u+2]=S,S=S>>8,d[u+1]=S,S=S>>8,d[u]=S,u+8}a.prototype.writeBigUInt64LE=jt(function(o,u=0){return Ni(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=jt(function(o,u=0){return Fi(this,o,u,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(o,u,f,g){if(o=+o,u=u>>>0,!g){const fe=Math.pow(2,8*f-1);xe(this,o,u,f,fe-1,-fe)}let w=0,S=1,z=0;for(this[u]=o&255;++w<f&&(S*=256);)o<0&&z===0&&this[u+w-1]!==0&&(z=1),this[u+w]=(o/S>>0)-z&255;return u+f},a.prototype.writeIntBE=function(o,u,f,g){if(o=+o,u=u>>>0,!g){const fe=Math.pow(2,8*f-1);xe(this,o,u,f,fe-1,-fe)}let w=f-1,S=1,z=0;for(this[u+w]=o&255;--w>=0&&(S*=256);)o<0&&z===0&&this[u+w+1]!==0&&(z=1),this[u+w]=(o/S>>0)-z&255;return u+f},a.prototype.writeInt8=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,1,127,-128),o<0&&(o=255+o+1),this[u]=o&255,u+1},a.prototype.writeInt16LE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,2,32767,-32768),this[u]=o&255,this[u+1]=o>>>8,u+2},a.prototype.writeInt16BE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,2,32767,-32768),this[u]=o>>>8,this[u+1]=o&255,u+2},a.prototype.writeInt32LE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,4,2147483647,-2147483648),this[u]=o&255,this[u+1]=o>>>8,this[u+2]=o>>>16,this[u+3]=o>>>24,u+4},a.prototype.writeInt32BE=function(o,u,f){return o=+o,u=u>>>0,f||xe(this,o,u,4,2147483647,-2147483648),o<0&&(o=4294967295+o+1),this[u]=o>>>24,this[u+1]=o>>>16,this[u+2]=o>>>8,this[u+3]=o&255,u+4},a.prototype.writeBigInt64LE=jt(function(o,u=0){return Ni(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=jt(function(o,u=0){return Fi(this,o,u,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Li(d,o,u,f,g,w){if(u+f>d.length)throw new RangeError("Index out of range");if(u<0)throw new RangeError("Index out of range")}function Vi(d,o,u,f,g){return o=+o,u=u>>>0,g||Li(d,o,u,4),n.write(d,o,u,f,23,4),u+4}a.prototype.writeFloatLE=function(o,u,f){return Vi(this,o,u,!0,f)},a.prototype.writeFloatBE=function(o,u,f){return Vi(this,o,u,!1,f)};function Gi(d,o,u,f,g){return o=+o,u=u>>>0,g||Li(d,o,u,8),n.write(d,o,u,f,52,8),u+8}a.prototype.writeDoubleLE=function(o,u,f){return Gi(this,o,u,!0,f)},a.prototype.writeDoubleBE=function(o,u,f){return Gi(this,o,u,!1,f)},a.prototype.copy=function(o,u,f,g){if(!a.isBuffer(o))throw new TypeError("argument should be a Buffer");if(f||(f=0),!g&&g!==0&&(g=this.length),u>=o.length&&(u=o.length),u||(u=0),g>0&&g<f&&(g=f),g===f||o.length===0||this.length===0)return 0;if(u<0)throw new RangeError("targetStart out of bounds");if(f<0||f>=this.length)throw new RangeError("Index out of range");if(g<0)throw new RangeError("sourceEnd out of bounds");g>this.length&&(g=this.length),o.length-u<g-f&&(g=o.length-u+f);const w=g-f;return this===o&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(u,f,g):Uint8Array.prototype.set.call(o,this.subarray(f,g),u),w},a.prototype.fill=function(o,u,f,g){if(typeof o=="string"){if(typeof u=="string"?(g=u,u=0,f=this.length):typeof f=="string"&&(g=f,f=this.length),g!==void 0&&typeof g!="string")throw new TypeError("encoding must be a string");if(typeof g=="string"&&!a.isEncoding(g))throw new TypeError("Unknown encoding: "+g);if(o.length===1){const S=o.charCodeAt(0);(g==="utf8"&&S<128||g==="latin1")&&(o=S)}}else typeof o=="number"?o=o&255:typeof o=="boolean"&&(o=Number(o));if(u<0||this.length<u||this.length<f)throw new RangeError("Out of range index");if(f<=u)return this;u=u>>>0,f=f===void 0?this.length:f>>>0,o||(o=0);let w;if(typeof o=="number")for(w=u;w<f;++w)this[w]=o;else{const S=a.isBuffer(o)?o:a.from(o,g),z=S.length;if(z===0)throw new TypeError('The value "'+o+'" is invalid for argument "value"');for(w=0;w<f-u;++w)this[w+u]=S[w%z]}return this};const ln={};function Ar(d,o,u){ln[d]=class extends u{constructor(){super(),Object.defineProperty(this,"message",{value:o.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${d}]`,this.stack,delete this.name}get code(){return d}set code(g){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:g,writable:!0})}toString(){return`${this.name} [${d}]: ${this.message}`}}}Ar("ERR_BUFFER_OUT_OF_BOUNDS",function(d){return d?`${d} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),Ar("ERR_INVALID_ARG_TYPE",function(d,o){return`The "${d}" argument must be of type number. Received type ${typeof o}`},TypeError),Ar("ERR_OUT_OF_RANGE",function(d,o,u){let f=`The value of "${d}" is out of range.`,g=u;return Number.isInteger(u)&&Math.abs(u)>2**32?g=zi(String(u)):typeof u=="bigint"&&(g=String(u),(u>BigInt(2)**BigInt(32)||u<-(BigInt(2)**BigInt(32)))&&(g=zi(g)),g+="n"),f+=` It must be ${o}. Received ${g}`,f},RangeError);function zi(d){let o="",u=d.length;const f=d[0]==="-"?1:0;for(;u>=f+4;u-=3)o=`_${d.slice(u-3,u)}${o}`;return`${d.slice(0,u)}${o}`}function Ga(d,o,u){dn(o,"offset"),(d[o]===void 0||d[o+u]===void 0)&&Tn(o,d.length-(u+1))}function Wi(d,o,u,f,g,w){if(d>u||d<o){const S=typeof o=="bigint"?"n":"";let z;throw o===0||o===BigInt(0)?z=`>= 0${S} and < 2${S} ** ${(w+1)*8}${S}`:z=`>= -(2${S} ** ${(w+1)*8-1}${S}) and < 2 ** ${(w+1)*8-1}${S}`,new ln.ERR_OUT_OF_RANGE("value",z,d)}Ga(f,g,w)}function dn(d,o){if(typeof d!="number")throw new ln.ERR_INVALID_ARG_TYPE(o,"number",d)}function Tn(d,o,u){throw Math.floor(d)!==d?(dn(d,u),new ln.ERR_OUT_OF_RANGE("offset","an integer",d)):o<0?new ln.ERR_BUFFER_OUT_OF_BOUNDS:new ln.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${o}`,d)}const za=/[^+/0-9A-Za-z-_]/g;function Wa(d){if(d=d.split("=")[0],d=d.trim().replace(za,""),d.length<2)return"";for(;d.length%4!==0;)d=d+"=";return d}function Cr(d,o){o=o||1/0;let u;const f=d.length;let g=null;const w=[];for(let S=0;S<f;++S){if(u=d.charCodeAt(S),u>55295&&u<57344){if(!g){if(u>56319){(o-=3)>-1&&w.push(239,191,189);continue}else if(S+1===f){(o-=3)>-1&&w.push(239,191,189);continue}g=u;continue}if(u<56320){(o-=3)>-1&&w.push(239,191,189),g=u;continue}u=(g-55296<<10|u-56320)+65536}else g&&(o-=3)>-1&&w.push(239,191,189);if(g=null,u<128){if((o-=1)<0)break;w.push(u)}else if(u<2048){if((o-=2)<0)break;w.push(u>>6|192,u&63|128)}else if(u<65536){if((o-=3)<0)break;w.push(u>>12|224,u>>6&63|128,u&63|128)}else if(u<1114112){if((o-=4)<0)break;w.push(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}else throw new Error("Invalid code point")}return w}function qa(d){const o=[];for(let u=0;u<d.length;++u)o.push(d.charCodeAt(u)&255);return o}function Ka(d,o){let u,f,g;const w=[];for(let S=0;S<d.length&&!((o-=2)<0);++S)u=d.charCodeAt(S),f=u>>8,g=u%256,w.push(g),w.push(f);return w}function qi(d){return e.toByteArray(Wa(d))}function Yn(d,o,u,f){let g;for(g=0;g<f&&!(g+u>=o.length||g>=d.length);++g)o[g+u]=d[g];return g}function Xe(d,o){return d instanceof o||d!=null&&d.constructor!=null&&d.constructor.name!=null&&d.constructor.name===o.name}function $r(d){return d!==d}const Xa=function(){const d="0123456789abcdef",o=new Array(256);for(let u=0;u<16;++u){const f=u*16;for(let g=0;g<16;++g)o[f+g]=d[u]+d[g]}return o}();function jt(d){return typeof BigInt>"u"?Ha:d}function Ha(){throw new Error("BigInt not supported")}}(Hr)),Hr}var sh=ih();window.Buffer=sh.Buffer;async function oh(){await window.wasmInitialized}oh().catch(console.error);
