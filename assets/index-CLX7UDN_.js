var Ko=Object.defineProperty;var Xo=(t,e,n)=>e in t?Ko(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var cn=(t,e,n)=>Xo(t,typeof e!="symbol"?e+"":e,n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const Ho="1.30.0",Jo="1.50.0",Qo={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class Ks extends Error{}class Xs extends Ks{constructor(e,n){super(e),this.code=n,this.type=Qo[n]??"ServerError"}}class Yo extends Ks{constructor(e,n,r){super(e),this.status=n,this.statusText=r}}var Hs=t=>{throw TypeError(t)},Fr=(t,e,n)=>e.has(t)||Hs("Cannot "+n),K=(t,e,n)=>(Fr(t,e,"read from private field"),n?n.call(t):e.get(t)),jt=(t,e,n)=>e.has(t)?Hs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),en=(t,e,n,r)=>(Fr(t,e,"write to private field"),e.set(t,n),n),Js=(t,e,n)=>(Fr(t,e,"access private method"),n),Zo=(t,e,n,r)=>({set _(s){en(t,e,s)},get _(){return K(t,e,r)}}),pt,mn,Ye,xt,jn,$t,Qn,Qs,Ys;function ea(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const ta={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class na{constructor(e,n={}){if(jt(this,Qn),jt(this,pt,0),jt(this,mn,0),jt(this,Ye,null),jt(this,xt,null),jt(this,jn,new Set),jt(this,$t,new Map),this.endpoint=e,this.options={...ta,...n},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=ea(this.endpoint))}async makeRequest(e,n,r){const s=await Js(this,Qn,Qs).call(this);return new Promise((i,a)=>{en(this,pt,K(this,pt)+1),K(this,$t).set(K(this,pt),{resolve:i,reject:a,timeout:setTimeout(()=>{K(this,$t).delete(K(this,pt)),a(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),r==null||r.addEventListener("abort",()=>{K(this,$t).delete(K(this,pt)),a(r.reason)}),s.send(JSON.stringify({jsonrpc:"2.0",id:K(this,pt),method:e,params:n}))}).then(({error:i,result:a})=>{if(i)throw new Xs(i.message,i.code);return a})}async subscribe(e){const n=new ra(e);return K(this,jn).add(n),await n.subscribe(this),()=>n.unsubscribe(this)}}pt=new WeakMap;mn=new WeakMap;Ye=new WeakMap;xt=new WeakMap;jn=new WeakMap;$t=new WeakMap;Qn=new WeakSet;Qs=function(){return K(this,xt)?K(this,xt):(en(this,xt,new Promise(t=>{var e;(e=K(this,Ye))==null||e.close(),en(this,Ye,new this.options.WebSocketConstructor(this.endpoint)),K(this,Ye).addEventListener("open",()=>{en(this,mn,0),t(K(this,Ye))}),K(this,Ye).addEventListener("close",()=>{Zo(this,mn)._++,K(this,mn)<=this.options.maxReconnects&&setTimeout(()=>{Js(this,Qn,Ys).call(this)},this.options.reconnectTimeout)}),K(this,Ye).addEventListener("message",({data:n})=>{let r;try{r=JSON.parse(n)}catch(s){console.error(new Error(`Failed to parse RPC message: ${n}`,{cause:s}));return}if("id"in r&&r.id!=null&&K(this,$t).has(r.id)){const{resolve:s,timeout:i}=K(this,$t).get(r.id);clearTimeout(i),s(r)}else if("params"in r){const{params:s}=r;K(this,jn).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),K(this,xt))};Ys=async function(){var t;return(t=K(this,Ye))==null||t.close(),en(this,xt,null),Promise.allSettled([...K(this,jn)].map(e=>e.subscribe(this)))};class ra{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:n}=this;return this.subscribed=!1,n==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[n]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const n=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=n)}}var Zs=t=>{throw TypeError(t)},Wr=(t,e,n)=>e.has(t)||Zs("Cannot "+n),je=(t,e,n)=>(Wr(t,e,"read from private field"),n?n.call(t):e.get(t)),$n=(t,e,n)=>e.has(t)?Zs("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),jr=(t,e,n,r)=>(Wr(t,e,"write to private field"),e.set(t,n),n),sa=(t,e,n)=>(Wr(t,e,"access private method"),n),gn,_e,bn,kr,ei;class ia{constructor(e){$n(this,kr),$n(this,gn,0),$n(this,_e),$n(this,bn),jr(this,_e,e)}fetch(e,n){const r=je(this,_e).fetch??fetch;if(!r)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return r(e,n)}async request(e){var s,i;jr(this,gn,je(this,gn)+1);const n=await this.fetch(((s=je(this,_e).rpc)==null?void 0:s.url)??je(this,_e).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Ho,"Client-Target-Api-Version":Jo,"Client-Request-Method":e.method,...(i=je(this,_e).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:je(this,gn),method:e.method,params:e.params})});if(!n.ok)throw new Yo(`Unexpected status code: ${n.status}`,n.status,n.statusText);const r=await n.json();if("error"in r&&r.error!=null)throw new Xs(r.error.message,r.error.code);return r.result}async subscribe(e){const n=await sa(this,kr,ei).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{n()})),async()=>!!await n()}}gn=new WeakMap;_e=new WeakMap;bn=new WeakMap;kr=new WeakSet;ei=function(){var t;if(!je(this,bn)){const e=je(this,_e).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");jr(this,bn,new na(((t=je(this,_e).websocket)==null?void 0:t.url)??je(this,_e).url,{WebSocketConstructor:e,...je(this,_e).websocket}))}return je(this,bn)};function oa(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function aa(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ti(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(n=>typeof n=="string"):e.every(n=>Number.isSafeInteger(n)):!1}function Tr(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function ni(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function Er(t){if(!Array.isArray(t))throw new Error("array expected")}function ri(t,e){if(!ti(!0,e))throw new Error(`${t}: array of strings expected`)}function ua(t,e){if(!ti(!1,e))throw new Error(`${t}: array of numbers expected`)}function ca(...t){const e=i=>i,n=(i,a)=>u=>i(a(u)),r=t.map(i=>i.encode).reduceRight(n,e),s=t.map(i=>i.decode).reduce(n,e);return{encode:r,decode:s}}function la(t){const e=typeof t=="string"?t.split(""):t,n=e.length;ri("alphabet",e);const r=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(Er(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(Er(s),s.map(i=>{Tr("alphabet.decode",i);const a=r.get(i);if(a===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return a}))}}function da(t=""){return Tr("join",t),{encode:e=>(ri("join.decode",e),e.join(t)),decode:e=>(Tr("join.decode",e),e.split(t))}}function ds(t,e,n){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(Er(t),!t.length)return[];let r=0;const s=[],i=Array.from(t,u=>{if(ni(u),u<0||u>=e)throw new Error(`invalid integer: ${u}`);return u}),a=i.length;for(;;){let u=0,c=!0;for(let h=r;h<a;h++){const l=i[h],g=e*u,j=g+l;if(!Number.isSafeInteger(j)||g/e!==u||j-l!==g)throw new Error("convertRadix: carry overflow");const O=j/n;u=j%n;const b=Math.floor(O);if(i[h]=b,!Number.isSafeInteger(b)||b*n+u!==j)throw new Error("convertRadix: carry overflow");if(c)b?c=!1:r=h;else continue}if(s.push(u),c)break}for(let u=0;u<t.length-1&&t[u]===0;u++)s.push(0);return s.reverse()}function fa(t){ni(t);const e=2**8;return{encode:n=>{if(!aa(n))throw new Error("radix.encode input should be Uint8Array");return ds(Array.from(n),e,t)},decode:n=>(ua("radix.decode",n),Uint8Array.from(ds(n,t,e)))}}const ha=t=>ca(fa(58),la(t),da("")),si=ha("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),sn=t=>si.encode(t),Nt=t=>si.decode(t);function Z(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const ur=8192;function F(t){if(t.length<ur)return btoa(String.fromCharCode(...t));let e="";for(var n=0;n<t.length;n+=ur){const r=t.slice(n,n+ur);e+=String.fromCharCode(...r)}return btoa(e)}function qr(t){var s;const e=t.startsWith("0x")?t.slice(2):t,n=e.length%2===0?e:`0${e}`,r=((s=n.match(/[0-9a-fA-F]{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];if(r.length!==n.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(r)}function Ot(t){return t.reduce((e,n)=>e+n.toString(16).padStart(2,"0"),"")}function ii(t,e){return Array.from({length:Math.ceil(t.length/e)},(n,r)=>t.slice(r*e,(r+1)*e))}function Yn(t){const e=[];let n=0;if(t===0)return[0];for(;t>0;)e[n]=t&127,(t>>=7)&&(e[n]|=128),n+=1;return e}function ga(t){let e=0,n=0,r=0;for(;;){const s=t[r];if(r+=1,e|=(s&127)<<n,(s&128)===0)break;n+=7}return{value:e,length:r}}class pa{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength)}shift(e){return this.bytePosition+=e,this}read8(){const e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){const e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){const e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){const e=this.read32(),r=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+r).toString(10)}read128(){const e=BigInt(this.read64()),r=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+r).toString(10)}read256(){const e=BigInt(this.read128()),r=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+r).toString(10)}readBytes(e){const n=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,n,e);return this.shift(e),r}readULEB(){const e=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,e),{value:r,length:s}=ga(n);return this.shift(s),r}readVec(e){const n=this.readULEB(),r=[];for(let s=0;s<n;s++)r.push(e(this,s,n));return r}}function ma(t,e){switch(e){case"base58":return sn(t);case"base64":return F(t);case"hex":return Ot(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Kr(t,e=["<",">"]){const[n,r]=e,s=[];let i="",a=0;for(let u=0;u<t.length;u++){const c=t[u];if(c===n&&a++,c===r&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class ba{constructor({initialSize:e=1024,maxSize:n=1/0,allocateSize:r=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=n,this.allocateSize=r,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const n=this.bytePosition+e;if(n>this.size){const r=Math.min(this.maxSize,this.size+this.allocateSize);if(n>r)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${n}`);this.size=r;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return cr(BigInt(e),8).forEach(n=>this.write8(n)),this}write128(e){return cr(BigInt(e),16).forEach(n=>this.write8(n)),this}write256(e){return cr(BigInt(e),32).forEach(n=>this.write8(n)),this}writeULEB(e){return Yn(e).forEach(n=>this.write8(n)),this}writeVec(e,n){return this.writeULEB(e.length),Array.from(e).forEach((r,s)=>n(this,r,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return ma(this.toBytes(),e)}}function cr(t,e){const n=new Uint8Array(e);let r=0;for(;t>0;)n[r]=Number(t%BigInt(256)),t=t/BigInt(256),r+=1;return n}var oi=t=>{throw TypeError(t)},ai=(t,e,n)=>e.has(t)||oi("Cannot "+n),Ae=(t,e,n)=>(ai(t,e,"read from private field"),n?n.call(t):e.get(t)),Zn=(t,e,n)=>e.has(t)?oi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),er=(t,e,n,r)=>(ai(t,e,"write to private field"),e.set(t,n),n),Ht,pn,Dn,mt;const ya=class ui{constructor(e){Zn(this,Ht),Zn(this,pn),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),er(this,Ht,e.write),er(this,pn,e.serialize??((n,r)=>{const s=new ba({initialSize:this.serializedSize(n)??void 0,...r});return Ae(this,Ht).call(this,n,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,n){this.validate(e),Ae(this,Ht).call(this,e,n)}serialize(e,n){return this.validate(e),new wa(this,Ae(this,pn).call(this,e,n))}parse(e){const n=new pa(e);return this.read(n)}fromHex(e){return this.parse(qr(e))}fromBase58(e){return this.parse(Nt(e))}fromBase64(e){return this.parse(Z(e))}transform({name:e,input:n,output:r,validate:s}){return new ui({name:e??this.name,read:i=>r?r(this.read(i)):this.read(i),write:(i,a)=>Ae(this,Ht).call(this,n?n(i):i,a),serializedSize:i=>this.serializedSize(n?n(i):i),serialize:(i,a)=>Ae(this,pn).call(this,n?n(i):i,a),validate:i=>{s==null||s(i),this.validate(n?n(i):i)}})}};Ht=new WeakMap;pn=new WeakMap;let De=ya;const ci=Symbol.for("@mysten/serialized-bcs");function on(t){return!!t&&typeof t=="object"&&t[ci]===!0}class wa{constructor(e,n){Zn(this,Dn),Zn(this,mt),er(this,Dn,e),er(this,mt,n)}get[ci](){return!0}toBytes(){return Ae(this,mt)}toHex(){return Ot(Ae(this,mt))}toBase64(){return F(Ae(this,mt))}toBase58(){return sn(Ae(this,mt))}parse(){return Ae(this,Dn).parse(Ae(this,mt))}}Dn=new WeakMap;mt=new WeakMap;function tr({size:t,...e}){return new De({...e,serializedSize:()=>t})}function lr({readMethod:t,writeMethod:e,...n}){return tr({...n,read:r=>r[t](),write:(r,s)=>s[e](r),validate:r=>{var s;if(r<0||r>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${r}. Expected value in range 0-${n.maxValue}`);(s=n.validate)==null||s.call(n,r)}})}function dr({readMethod:t,writeMethod:e,...n}){return tr({...n,read:r=>r[t](),write:(r,s)=>s[e](BigInt(r)),validate:r=>{var i;const s=BigInt(r);if(s<0||s>n.maxValue)throw new TypeError(`Invalid ${n.name} value: ${s}. Expected value in range 0-${n.maxValue}`);(i=n.validate)==null||i.call(n,s)}})}function va({serialize:t,...e}){const n=new De({...e,serialize:t,write:(r,s)=>{for(const i of n.serialize(r).toBytes())s.write8(i)}});return n}function Oa({toBytes:t,fromBytes:e,...n}){return new De({...n,read:r=>{const s=r.readULEB(),i=r.readBytes(s);return e(i)},write:(r,s)=>{const i=t(r);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:r=>{const s=t(r),i=Yn(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:r=>{var s;if(typeof r!="string")throw new TypeError(`Invalid ${n.name} value: ${r}. Expected string`);(s=n.validate)==null||s.call(n,r)}})}function Sa(t){let e=null;function n(){return e||(e=t()),e}return new De({name:"lazy",read:r=>n().read(r),serializedSize:r=>n().serializedSize(r),write:(r,s)=>n().write(r,s),serialize:(r,s)=>n().serialize(r,s).toBytes()})}const o={u8(t){return lr({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return lr({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return lr({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return dr({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return dr({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return dr({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return tr({name:"bool",size:1,read:e=>e.read8()===1,write:(e,n)=>n.write8(e?1:0),...t,validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return va({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(Yn(e)),...t})},bytes(t,e){return tr({name:`bytes[${t}]`,size:t,read:n=>n.readBytes(t),write:(n,r)=>{const s=new Uint8Array(n);for(let i=0;i<t;i++)r.write8(s[i]??0)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},byteVector(t){return new De({name:"bytesVector",read:e=>{const n=e.readULEB();return e.readBytes(n)},write:(e,n)=>{const r=new Uint8Array(e);n.writeULEB(r.length);for(let s=0;s<r.length;s++)n.write8(r[s]??0)},...t,serializedSize:e=>{const n="length"in e?e.length:null;return n==null?null:Yn(n).length+n},validate:e=>{var n;if((n=t==null?void 0:t.validate)==null||n.call(t,e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return Oa({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,n){return new De({name:`${e.name}[${t}]`,read:r=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(r);return s},write:(r,s)=>{for(const i of r)e.write(i,s)},...n,validate:r=>{var s;if((s=n==null?void 0:n.validate)==null||s.call(n,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},option(t){return o.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new De({name:`vector<${t.name}>`,read:n=>{const r=n.readULEB(),s=new Array(r);for(let i=0;i<r;i++)s[i]=t.read(n);return s},write:(n,r)=>{r.writeULEB(n.length);for(const s of n)t.write(s,r)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`)}})},tuple(t,e){return new De({name:`(${t.map(n=>n.name).join(", ")})`,serializedSize:n=>{let r=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(n[s]);if(i==null)return null;r+=i}return r},read:n=>{const r=[];for(const s of t)r.push(s.read(n));return r},write:(n,r)=>{for(let s=0;s<t.length;s++)t[s].write(n[s],r)},...e,validate:n=>{var r;if((r=e==null?void 0:e.validate)==null||r.call(e,n),!Array.isArray(n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${n.length}`)}})},struct(t,e,n){const r=Object.entries(e);return new De({name:t,serializedSize:s=>{let i=0;for(const[a,u]of r){const c=u.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,u]of r)i[a]=u.read(s);return i},write:(s,i)=>{for(const[a,u]of r)u.write(s[a],i)},...n,validate:s=>{var i;if((i=n==null?void 0:n.validate)==null||i.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,n){const r=Object.entries(e);return new De({name:t,read:s=>{const i=s.readULEB(),a=r[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[u,c]=a;return{[u]:(c==null?void 0:c.read(s))??!0,$kind:u}},write:(s,i)=>{const[a,u]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<r.length;c++){const[h,l]=r[c];if(h===a){i.writeULEB(c),l==null||l.write(u,i);return}}},...n,validate:s=>{var u;if((u=n==null?void 0:n.validate)==null||u.call(n,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return o.vector(o.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:n=>[...n.entries()],output:n=>{const r=new Map;for(const[s,i]of n)r.set(s,i);return r}})},lazy(t){return Sa(t)}};var li=t=>{throw TypeError(t)},di=(t,e,n)=>e.has(t)||li("Cannot "+n),we=(t,e,n)=>(di(t,e,"read from private field"),e.get(t)),fs=(t,e,n)=>e.has(t)?li("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),hs=(t,e,n,r)=>(di(t,e,"write to private field"),e.set(t,n),n),Jt,Oe;const Ia=class fi{constructor({prefix:e,cache:n}={}){fs(this,Jt),fs(this,Oe),hs(this,Jt,e??[]),hs(this,Oe,n??new Map)}read(e,n){const r=[we(this,Jt),...e].join(":");if(we(this,Oe).has(r))return we(this,Oe).get(r);const s=n();return we(this,Oe).set(r,s),typeof s=="object"&&s!==null&&"then"in s?Promise.resolve(s).then(i=>(we(this,Oe).set(r,i),i)).catch(i=>{throw we(this,Oe).delete(r),i}):s}clear(e){const n=[...we(this,Jt),...e??[]].join(":");if(!n){we(this,Oe).clear();return}for(const r of we(this,Oe).keys())r.startsWith(n)&&we(this,Oe).delete(r)}scope(e){return new fi({prefix:[...we(this,Jt),...Array.isArray(e)?e:[e]],cache:we(this,Oe)})}};Jt=new WeakMap;Oe=new WeakMap;let ja=Ia;class hi{constructor({network:e}){this.cache=new ja,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(n=>{if("experimental_asClientExtension"in n){const{name:r,register:s}=n.experimental_asClientExtension();return[r,{value:s(this)}]}return[n.name,{value:n.register(this)}]})))}}const gi=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,pi=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,ka=235;function Ta(t){return t.length>ka?!1:t.includes("@")?gi.test(t):pi.test(t)}function Ea(t,e="at"){const n=t.toLowerCase();let r;if(n.includes("@")){if(!gi.test(n))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=n.split("@");r=[...s?s.split("."):[],i]}else{if(!pi.test(n))throw new Error(`Invalid SuiNS name ${t}`);r=n.split(".").slice(0,-1)}return e==="dot"?`${r.join(".")}.sui`:`${r.slice(0,-1).join(".")}@${r[r.length-1]}`}const _a=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,Aa=/^\d+$/,Ca=64,xa="/",$a=t=>{const e=t.split(xa);if(e.length<2||e.length>3)return!1;const[n,r,s]=e;return s!==void 0&&!Aa.test(s)||!Ta(n)?!1:_a.test(r)&&r.length<Ca},Ma=32;function gs(t){try{return Nt(t).length===Ma}catch{return!1}}const or=32;function Ze(t){return Pa(t)&&Ra(t)===or}function Mn(t){return Ze(t)}function Ua(t){return t.includes("::")?Xr(t):t}function Xr(t){const[e,n]=t.split("::"),r=$a(e),s=t.slice(e.length+n.length+4),i=s.includes("<")?s.slice(0,s.indexOf("<")):s,a=s.includes("<")?Kr(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(u=>Ua(u.trim())):[];return{address:r?e:z(e),module:n,name:i,typeParams:a}}function _r(t){const{address:e,module:n,name:r,typeParams:s}=typeof t=="string"?Xr(t):t,i=(s==null?void 0:s.length)>0?`<${s.map(a=>typeof a=="string"?a:_r(a)).join(",")}>`:"";return`${e}::${n}::${r}${i}`}function z(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(or*2,"0")}`}function nt(t,e=!1){return z(t,e)}function Pa(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function Ra(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const Da=/^vector<(.+)>$/,Ba=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;let kn=class Qt{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(Da);if(r)return{vector:Qt.parseFromStr(r[1],n)};const s=e.match(Ba);if(s)return{struct:{address:n?z(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Qt.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return Kr(e).map(r=>Qt.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Qt.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(Qt.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}};function Na(t){return o.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Va(t){return o.enum("Option",{None:null,Some:t})}const W=o.bytes(or).transform({validate:t=>{const e=typeof t=="string"?t:Ot(t);if(!e||!Ze(z(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?qr(z(t)):t,output:t=>z(Ot(t))}),Ce=o.vector(o.u8()).transform({name:"ObjectDigest",input:t=>Nt(t),output:t=>sn(new Uint8Array(t)),validate:t=>{if(Nt(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Se=o.struct("SuiObjectRef",{objectId:W,version:o.u64(),digest:Ce}),mi=o.struct("SharedObjectRef",{objectId:W,initialSharedVersion:o.u64(),mutable:o.bool()}),bi=o.enum("ObjectArg",{ImmOrOwnedObject:Se,SharedObject:mi,Receiving:Se}),Mt=o.enum("Owner",{AddressOwner:W,ObjectOwner:W,Shared:o.struct("Shared",{initialSharedVersion:o.u64()}),Immutable:null,ConsensusV2:o.struct("ConsensusV2",{authenticator:o.enum("Authenticator",{SingleOwner:W}),startVersion:o.u64()})}),yi=o.enum("CallArg",{Pure:o.struct("Pure",{bytes:o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})}),Object:bi}),Hr=o.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:o.lazy(()=>Hr),struct:o.lazy(()=>ji),u16:null,u32:null,u256:null}),Jr=Hr.transform({input:t=>typeof t=="string"?kn.parseFromStr(t,!0):t,output:t=>kn.tagToString(t)}),Pe=o.enum("Argument",{GasCoin:null,Input:o.u16(),Result:o.u16(),NestedResult:o.tuple([o.u16(),o.u16()])}),wi=o.struct("ProgrammableMoveCall",{package:W,module:o.string(),function:o.string(),typeArguments:o.vector(Jr),arguments:o.vector(Pe)}),vi=o.enum("Command",{MoveCall:wi,TransferObjects:o.struct("TransferObjects",{objects:o.vector(Pe),address:Pe}),SplitCoins:o.struct("SplitCoins",{coin:Pe,amounts:o.vector(Pe)}),MergeCoins:o.struct("MergeCoins",{destination:Pe,sources:o.vector(Pe)}),Publish:o.struct("Publish",{modules:o.vector(o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})),dependencies:o.vector(W)}),MakeMoveVec:o.struct("MakeMoveVec",{type:Va(Jr).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:o.vector(Pe)}),Upgrade:o.struct("Upgrade",{modules:o.vector(o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})),dependencies:o.vector(W),package:W,ticket:Pe})}),Oi=o.struct("ProgrammableTransaction",{inputs:o.vector(yi),commands:o.vector(vi)}),Si=o.enum("TransactionKind",{ProgrammableTransaction:Oi,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Ii=o.enum("TransactionExpiration",{None:null,Epoch:Na()}),ji=o.struct("StructTag",{address:W,module:o.string(),name:o.string(),typeParams:o.vector(Hr)}),ki=o.struct("GasData",{payment:o.vector(Se),owner:W,price:o.u64(),budget:o.u64()}),Ti=o.struct("TransactionDataV1",{kind:Si,sender:W,gasData:ki,expiration:Ii}),Ei=o.enum("TransactionData",{V1:Ti}),_i=o.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Ai=o.enum("IntentVersion",{V0:null}),Ci=o.enum("AppId",{Sui:null}),xi=o.struct("Intent",{scope:_i,version:Ai,appId:Ci});function $i(t){return o.struct(`IntentMessage<${t.name}>`,{intent:xi,value:t})}const Mi=o.enum("CompressedSignature",{ED25519:o.fixedArray(64,o.u8()),Secp256k1:o.fixedArray(64,o.u8()),Secp256r1:o.fixedArray(64,o.u8()),ZkLogin:o.vector(o.u8())}),Ui=o.enum("PublicKey",{ED25519:o.fixedArray(32,o.u8()),Secp256k1:o.fixedArray(33,o.u8()),Secp256r1:o.fixedArray(33,o.u8()),ZkLogin:o.vector(o.u8())}),Pi=o.struct("MultiSigPkMap",{pubKey:Ui,weight:o.u8()}),Ri=o.struct("MultiSigPublicKey",{pk_map:o.vector(Pi),threshold:o.u16()}),Ga=o.struct("MultiSig",{sigs:o.vector(Mi),bitmap:o.u16(),multisig_pk:Ri}),La=o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))}),Di=o.struct("SenderSignedTransaction",{intentMessage:$i(Ei),txSignatures:o.vector(La)}),za=o.vector(Di,{name:"SenderSignedData"}),Fa=o.struct("PasskeyAuthenticator",{authenticatorData:o.vector(o.u8()),clientDataJson:o.string(),userSignature:o.vector(o.u8())}),Wa=o.enum("PackageUpgradeError",{UnableToFetchPackage:o.struct("UnableToFetchPackage",{packageId:W}),NotAPackage:o.struct("NotAPackage",{objectId:W}),IncompatibleUpgrade:null,DigestDoesNotMatch:o.struct("DigestDoesNotMatch",{digest:o.vector(o.u8())}),UnknownUpgradePolicy:o.struct("UnknownUpgradePolicy",{policy:o.u8()}),PackageIDDoesNotMatch:o.struct("PackageIDDoesNotMatch",{packageId:W,ticketId:W})}),qa=o.struct("ModuleId",{address:W,name:o.string()}),ps=o.struct("MoveLocation",{module:qa,function:o.u16(),instruction:o.u16(),functionName:o.option(o.string())}),Ka=o.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:o.struct("IndexOutOfBounds",{idx:o.u16()}),SecondaryIndexOutOfBounds:o.struct("SecondaryIndexOutOfBounds",{resultIdx:o.u16(),secondaryIdx:o.u16()}),InvalidResultArity:o.struct("InvalidResultArity",{resultIdx:o.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Xa=o.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ha=o.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:o.struct("MoveObjectTooBig",{objectSize:o.u64(),maxObjectSize:o.u64()}),MovePackageTooBig:o.struct("MovePackageTooBig",{objectSize:o.u64(),maxObjectSize:o.u64()}),CircularObjectOwnership:o.struct("CircularObjectOwnership",{object:W}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:o.option(ps),MoveAbort:o.tuple([ps,o.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:o.struct("CommandArgumentError",{argIdx:o.u16(),kind:Ka}),TypeArgumentError:o.struct("TypeArgumentError",{argumentIdx:o.u16(),kind:Xa}),UnusedValueWithoutDrop:o.struct("UnusedValueWithoutDrop",{resultIdx:o.u16(),secondaryIdx:o.u16()}),InvalidPublicFunctionReturnType:o.struct("InvalidPublicFunctionReturnType",{idx:o.u16()}),InvalidTransferObject:null,EffectsTooLarge:o.struct("EffectsTooLarge",{currentSize:o.u64(),maxSize:o.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:o.struct("PackageUpgradeError",{upgradeError:Wa}),WrittenObjectsTooLarge:o.struct("WrittenObjectsTooLarge",{currentSize:o.u64(),maxSize:o.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:o.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:o.vector(W)}),AddressDeniedForCoin:o.struct("AddressDeniedForCoin",{address:W,coinType:o.string()}),CoinTypeGlobalPause:o.struct("CoinTypeGlobalPause",{coinType:o.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),Bi=o.enum("ExecutionStatus",{Success:null,Failed:o.struct("ExecutionFailed",{error:Ha,command:o.option(o.u64())})}),Ni=o.struct("GasCostSummary",{computationCost:o.u64(),storageCost:o.u64(),storageRebate:o.u64(),nonRefundableStorageFee:o.u64()}),Ja=o.struct("TransactionEffectsV1",{status:Bi,executedEpoch:o.u64(),gasUsed:Ni,modifiedAtVersions:o.vector(o.tuple([W,o.u64()])),sharedObjects:o.vector(Se),transactionDigest:Ce,created:o.vector(o.tuple([Se,Mt])),mutated:o.vector(o.tuple([Se,Mt])),unwrapped:o.vector(o.tuple([Se,Mt])),deleted:o.vector(Se),unwrappedThenDeleted:o.vector(Se),wrapped:o.vector(Se),gasObject:o.tuple([Se,Mt]),eventsDigest:o.option(Ce),dependencies:o.vector(Ce)}),Qr=o.tuple([o.u64(),Ce]),Qa=o.enum("ObjectIn",{NotExist:null,Exist:o.tuple([Qr,Mt])}),Ya=o.enum("ObjectOut",{NotExist:null,ObjectWrite:o.tuple([Ce,Mt]),PackageWrite:Qr}),Za=o.enum("IDOperation",{None:null,Created:null,Deleted:null}),eu=o.struct("EffectsObjectChange",{inputState:Qa,outputState:Ya,idOperation:Za}),tu=o.enum("UnchangedSharedKind",{ReadOnlyRoot:Qr,MutateDeleted:o.u64(),ReadDeleted:o.u64(),Cancelled:o.u64(),PerEpochConfig:null}),nu=o.struct("TransactionEffectsV2",{status:Bi,executedEpoch:o.u64(),gasUsed:Ni,transactionDigest:Ce,gasObjectIndex:o.option(o.u32()),eventsDigest:o.option(Ce),dependencies:o.vector(Ce),lamportVersion:o.u64(),changedObjects:o.vector(o.tuple([W,eu])),unchangedSharedObjects:o.vector(o.tuple([W,tu])),auxDataDigest:o.option(Ce)}),ru=o.enum("TransactionEffects",{V1:Ja,V2:nu});function yn(t){switch(t){case"u8":return o.u8();case"u16":return o.u16();case"u32":return o.u32();case"u64":return o.u64();case"u128":return o.u128();case"u256":return o.u256();case"bool":return o.bool();case"string":return o.string();case"id":case"address":return W}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,r]=e.slice(1);return n==="vector"?o.vector(yn(r)):o.option(yn(r))}throw new Error(`Invalid Pure type name: ${t}`)}const M={...o,U8:o.u8(),U16:o.u16(),U32:o.u32(),U64:o.u64(),U128:o.u128(),U256:o.u256(),ULEB128:o.uleb128(),Bool:o.bool(),String:o.string(),Address:W,AppId:Ci,Argument:Pe,CallArg:yi,Command:vi,CompressedSignature:Mi,GasData:ki,Intent:xi,IntentMessage:$i,IntentScope:_i,IntentVersion:Ai,MultiSig:Ga,MultiSigPkMap:Pi,MultiSigPublicKey:Ri,ObjectArg:bi,ObjectDigest:Ce,Owner:Mt,PasskeyAuthenticator:Fa,ProgrammableMoveCall:wi,ProgrammableTransaction:Oi,PublicKey:Ui,SenderSignedData:za,SenderSignedTransaction:Di,SharedObjectRef:mi,StructTag:ji,SuiObjectRef:Se,TransactionData:Ei,TransactionDataV1:Ti,TransactionEffects:ru,TransactionExpiration:Ii,TransactionKind:Si,TypeTag:Jr};function su(t,e){const n=[];for(let r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var We;function iu(t){return{lang:(t==null?void 0:t.lang)??(We==null?void 0:We.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(We==null?void 0:We.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(We==null?void 0:We.abortPipeEarly)}}var fr;function ou(t){return fr==null?void 0:fr.get(t)}var hr;function au(t){return hr==null?void 0:hr.get(t)}var gr;function uu(t,e){var n;return(n=gr==null?void 0:gr.get(t))==null?void 0:n.get(e)}function Vi(t){var n,r;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((r=(n=Object.getPrototypeOf(t))==null?void 0:n.constructor)==null?void 0:r.name))??"null":e}function me(t,e,n,r,s){const i=s&&"input"in s?s.input:n.value,a=(s==null?void 0:s.expected)??t.expects??null,u=(s==null?void 0:s.received)??Vi(i),c={kind:t.kind,type:t.type,input:i,expected:a,received:u,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${u}`,requirement:t.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:r.lang,abortEarly:r.abortEarly,abortPipeEarly:r.abortPipeEarly},h=t.kind==="schema",l=(s==null?void 0:s.message)??t.message??uu(t.reference,c.lang)??(h?au(c.lang):null)??r.message??ou(c.lang);l&&(c.message=typeof l=="function"?l(c):l),h&&(n.typed=!1),n.issues?n.issues.push(c):n.issues=[c]}function cu(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var lu=class extends Error{constructor(e){super(e[0].message);cn(this,"issues");this.name="ValiError",this.issues=e}};function dt(t,e){return{kind:"validation",type:"check",reference:dt,async:!1,expects:null,requirement:t,message:e,_run(n,r){return n.typed&&!this.requirement(n.value)&&me(this,"input",n,r),n}}}function $(t){return{kind:"validation",type:"integer",reference:$,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,n){return e.typed&&!this.requirement(e.value)&&me(this,"integer",e,n),e}}}function zt(t){return{kind:"transformation",type:"transform",reference:zt,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function Yr(t,e,n){return typeof t.default=="function"?t.default(e,n):t.default}function nn(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function m(t,e){return{kind:"schema",type:"array",reference:m,expects:"Array",async:!1,item:t,message:e,_run(n,r){var i;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<s.length;a++){const u=s[a],c=this.item._run({typed:!1,value:u},r);if(c.issues){const h={type:"array",origin:"value",input:s,key:a,value:u};for(const l of c.issues)l.path?l.path.unshift(h):l.path=[h],(i=n.issues)==null||i.push(l);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else me(this,"type",n,r);return n}}}function En(t){return{kind:"schema",type:"bigint",reference:En,expects:"bigint",async:!1,message:t,_run(e,n){return typeof e.value=="bigint"?e.typed=!0:me(this,"type",e,n),e}}}function Ft(t){return{kind:"schema",type:"boolean",reference:Ft,expects:"boolean",async:!1,message:t,_run(e,n){return typeof e.value=="boolean"?e.typed=!0:me(this,"type",e,n),e}}}function at(t){return{kind:"schema",type:"lazy",reference:at,expects:"unknown",async:!1,getter:t,_run(e,n){return this.getter(e.value)._run(e,n)}}}function y(t,e){return{kind:"schema",type:"literal",reference:y,expects:Vi(t),async:!1,literal:t,message:e,_run(n,r){return n.value===this.literal?n.typed=!0:me(this,"type",n,r),n}}}function T(t,...e){const n={kind:"schema",type:"nullable",reference:T,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(r,s){return r.value===null&&("default"in this&&(r.value=Yr(this,r,s)),r.value===null)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function $e(t,...e){const n={kind:"schema",type:"nullish",reference:$e,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(r,s){return(r.value===null||r.value===void 0)&&("default"in this&&(r.value=Yr(this,r,s)),r.value===null||r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function C(t){return{kind:"schema",type:"number",reference:C,expects:"number",async:!1,message:t,_run(e,n){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:me(this,"type",e,n),e}}}function f(t,e){return{kind:"schema",type:"object",reference:f,expects:"Object",async:!1,entries:t,message:e,_run(n,r){var i;const s=n.value;if(s&&typeof s=="object"){n.typed=!0,n.value={};for(const a in this.entries){const u=s[a],c=this.entries[a]._run({typed:!1,value:u},r);if(c.issues){const h={type:"object",origin:"value",input:s,key:a,value:u};for(const l of c.issues)l.path?l.path.unshift(h):l.path=[h],(i=n.issues)==null||i.push(l);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),(c.value!==void 0||a in s)&&(n.value[a]=c.value)}}else me(this,"type",n,r);return n}}}function N(t,...e){const n={kind:"schema",type:"optional",reference:N,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(r,s){return r.value===void 0&&("default"in this&&(r.value=Yr(this,r,s)),r.value===void 0)?(r.typed=!0,r):this.wrapped._run(r,s)}};return 0 in e&&(n.default=e[0]),n}function ut(t,e,n){return{kind:"schema",type:"record",reference:ut,expects:"Object",async:!1,key:t,value:e,message:n,_run(r,s){var a,u;const i=r.value;if(i&&typeof i=="object"){r.typed=!0,r.value={};for(const c in i)if(cu(i,c)){const h=i[c],l=this.key._run({typed:!1,value:c},s);if(l.issues){const j={type:"object",origin:"key",input:i,key:c,value:h};for(const O of l.issues)O.path=[j],(a=r.issues)==null||a.push(O);if(r.issues||(r.issues=l.issues),s.abortEarly){r.typed=!1;break}}const g=this.value._run({typed:!1,value:h},s);if(g.issues){const j={type:"object",origin:"value",input:i,key:c,value:h};for(const O of g.issues)O.path?O.path.unshift(j):O.path=[j],(u=r.issues)==null||u.push(O);if(r.issues||(r.issues=g.issues),s.abortEarly){r.typed=!1;break}}(!l.typed||!g.typed)&&(r.typed=!1),l.typed&&(r.value[l.value]=g.value)}}else me(this,"type",r,s);return r}}}function S(t){return{kind:"schema",type:"string",reference:S,expects:"string",async:!1,message:t,_run(e,n){return typeof e.value=="string"?e.typed=!0:me(this,"type",e,n),e}}}function _n(t,e){return{kind:"schema",type:"tuple",reference:_n,expects:"Array",async:!1,items:t,message:e,_run(n,r){var i;const s=n.value;if(Array.isArray(s)){n.typed=!0,n.value=[];for(let a=0;a<this.items.length;a++){const u=s[a],c=this.items[a]._run({typed:!1,value:u},r);if(c.issues){const h={type:"array",origin:"value",input:s,key:a,value:u};for(const l of c.issues)l.path?l.path.unshift(h):l.path=[h],(i=n.issues)==null||i.push(l);if(n.issues||(n.issues=c.issues),r.abortEarly){n.typed=!1;break}}c.typed||(n.typed=!1),n.value.push(c.value)}}else me(this,"type",n,r);return n}}}function ms(t){let e;if(t)for(const n of t)e?e.push(...n.issues):e=n.issues;return e}function D(t,e){return{kind:"schema",type:"union",reference:D,expects:[...new Set(t.map(n=>n.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(n,r){let s,i,a;for(const u of this.options){const c=u._run({typed:!1,value:n.value},r);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];me(this,"type",n,r,{issues:ms(i)}),n.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];me(this,"type",n,r,{issues:ms(a)})}return n}}}function be(){return{kind:"schema",type:"unknown",reference:be,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function x(t,e,n){const r=t._run({typed:!1,value:e},iu(n));if(r.issues)throw new lu(r.issues);return r.value}function E(...t){return{...t[0],pipe:t,_run(e,n){for(let r=0;r<t.length;r++){if(e.issues&&(t[r].kind==="schema"||t[r].kind==="transformation")){e.typed=!1;break}(!e.issues||!n.abortEarly&&!n.abortPipeEarly)&&(e=t[r]._run(e,n))}return e}}}function Wt(t){const e=Object.entries(t).map(([n,r])=>f({[n]:r}));return E(D(e),zt(n=>({...n,$kind:Object.keys(n)[0]})))}const an=E(S(),zt(t=>z(t)),dt(Ze)),ge=an,Vt=S(),le=E(D([S(),E(C(),$())]),dt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),St=f({objectId:an,version:le,digest:S()}),X=E(D([f({GasCoin:y(!0)}),f({Input:E(C(),$()),type:N(y("pure"))}),f({Input:E(C(),$()),type:N(y("object"))}),f({Result:E(C(),$())}),f({NestedResult:_n([E(C(),$()),E(C(),$())])})]),zt(t=>({...t,$kind:Object.keys(t)[0]}))),du=f({budget:T(le),price:T(le),owner:T(an),payment:T(m(St))}),Ar=D([y("address"),y("bool"),y("u8"),y("u16"),y("u32"),y("u64"),y("u128"),y("u256"),f({vector:at(()=>Ar)}),f({datatype:f({package:S(),module:S(),type:S(),typeParameters:m(at(()=>Ar))})}),f({typeParameter:E(C(),$())})]),fu=f({ref:T(D([y("&"),y("&mut")])),body:Ar}),hu=f({package:ge,module:S(),function:S(),typeArguments:m(S()),arguments:m(X),_argumentTypes:N(T(m(fu)))}),gu=f({name:S(),inputs:ut(S(),D([X,m(X)])),data:ut(S(),be())}),pu=Wt({MoveCall:hu,TransferObjects:f({objects:m(X),address:X}),SplitCoins:f({coin:X,amounts:m(X)}),MergeCoins:f({destination:X,sources:m(X)}),Publish:f({modules:m(Vt),dependencies:m(ge)}),MakeMoveVec:f({type:T(S()),elements:m(X)}),Upgrade:f({modules:m(Vt),dependencies:m(ge),package:ge,ticket:X}),$Intent:gu}),Gi=Wt({ImmOrOwnedObject:St,SharedObject:f({objectId:ge,initialSharedVersion:le,mutable:Ft()}),Receiving:St}),mu=Wt({Object:Gi,Pure:f({bytes:Vt}),UnresolvedPure:f({value:be()}),UnresolvedObject:f({objectId:ge,version:N(T(le)),digest:N(T(S())),initialSharedVersion:N(T(le))})}),bs=Wt({Object:Gi,Pure:f({bytes:Vt})}),Li=Wt({None:y(!0),Epoch:le}),Bn=f({version:y(2),sender:$e(an),expiration:$e(Li),gasData:du,inputs:m(mu),commands:m(pu)}),kt={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>x(X,n)),address:x(X,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:x(X,t),amounts:e.map(n=>x(X,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:x(X,t),sources:e.map(n=>x(X,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:F(new Uint8Array(n))),dependencies:e.map(n=>nt(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:F(new Uint8Array(s))),dependencies:e.map(s=>nt(s)),package:n,ticket:x(X,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>x(X,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,s])=>[r,Array.isArray(s)?s.map(i=>x(X,i)):x(X,s)])),data:n}}}},Cr=f({digest:S(),objectId:S(),version:D([E(C(),$()),S(),En()])}),bu=Wt({ImmOrOwned:Cr,Shared:f({objectId:ge,initialSharedVersion:le,mutable:Ft()}),Receiving:Cr}),ys=Wt({Object:bu,Pure:m(E(C(),$()))}),zi=D([f({kind:y("Input"),index:E(C(),$()),value:be(),type:N(y("object"))}),f({kind:y("Input"),index:E(C(),$()),value:be(),type:y("pure")})]),yu=D([f({Epoch:E(C(),$())}),f({None:T(y(!0))})]),ws=E(D([C(),S(),En()]),dt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Zr=D([f({bool:T(y(!0))}),f({u8:T(y(!0))}),f({u64:T(y(!0))}),f({u128:T(y(!0))}),f({address:T(y(!0))}),f({signer:T(y(!0))}),f({vector:at(()=>Zr)}),f({struct:at(()=>wu)}),f({u16:T(y(!0))}),f({u32:T(y(!0))}),f({u256:T(y(!0))})]),wu=f({address:S(),module:S(),name:S(),typeParams:m(Zr)}),vu=f({budget:N(ws),price:N(ws),payment:N(m(Cr)),owner:N(S())}),Ou=[zi,f({kind:y("GasCoin")}),f({kind:y("Result"),index:E(C(),$())}),f({kind:y("NestedResult"),index:E(C(),$()),resultIndex:E(C(),$())})],ct=D([...Ou]),Su=f({kind:y("MoveCall"),target:E(S(),dt(t=>t.split("::").length===3)),typeArguments:m(S()),arguments:m(ct)}),Iu=f({kind:y("TransferObjects"),objects:m(ct),address:ct}),ju=f({kind:y("SplitCoins"),coin:ct,amounts:m(ct)}),ku=f({kind:y("MergeCoins"),destination:ct,sources:m(ct)}),Tu=f({kind:y("MakeMoveVec"),type:D([f({Some:Zr}),f({None:T(y(!0))})]),objects:m(ct)}),Eu=f({kind:y("Publish"),modules:m(m(E(C(),$()))),dependencies:m(S())}),_u=f({kind:y("Upgrade"),modules:m(m(E(C(),$()))),dependencies:m(S()),packageId:S(),ticket:ct}),Au=[Su,Iu,ju,ku,Eu,_u,Tu],Cu=D([...Au]);f({version:y(1),sender:N(S()),expiration:$e(yu),gasConfig:vu,inputs:m(zi),transactions:m(Cu)});function vs(t){var n;const e=t.inputs.map((r,s)=>{if(r.Object)return{kind:"Input",index:s,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(Z(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:kn.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(s=>qe(s,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:qe(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(s=>qe(s,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(s=>qe(s,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(s=>Array.from(Z(s))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:qe(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(s=>qe(s,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(s=>qe(s,e)),address:qe(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(s=>Array.from(Z(s))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:qe(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function qe(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function xu(t){var e,n,r;return x(Bn,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((r=t.gasConfig.payment)==null?void 0:r.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(nn(ys,s.value)){const i=x(ys,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:F(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?kn.tagToString(s.type.Some):null,elements:s.objects.map(i=>Ke(i))}};case"MergeCoins":return{MergeCoins:{destination:Ke(s.destination),sources:s.sources.map(i=>Ke(i))}};case"MoveCall":{const[i,a,u]=s.target.split("::");return{MoveCall:{package:i,module:a,function:u,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>Ke(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>F(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:Ke(s.coin),amounts:s.amounts.map(i=>Ke(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>Ke(i)),address:Ke(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>F(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:Ke(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function Ke(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function An(t){return D(Object.entries(t).map(([e,n])=>f({[e]:n})))}const Te=An({GasCoin:y(!0),Input:E(C(),$()),Result:E(C(),$()),NestedResult:_n([E(C(),$()),E(C(),$())])}),$u=f({budget:T(le),price:T(le),owner:T(an),payment:T(m(St))}),Mu=f({package:ge,module:S(),function:S(),typeArguments:m(S()),arguments:m(Te)}),Uu=f({name:S(),inputs:ut(S(),D([Te,m(Te)])),data:ut(S(),be())}),Pu=An({MoveCall:Mu,TransferObjects:f({objects:m(Te),address:Te}),SplitCoins:f({coin:Te,amounts:m(Te)}),MergeCoins:f({destination:Te,sources:m(Te)}),Publish:f({modules:m(Vt),dependencies:m(ge)}),MakeMoveVec:f({type:T(S()),elements:m(Te)}),Upgrade:f({modules:m(Vt),dependencies:m(ge),package:ge,ticket:Te}),$Intent:Uu}),Ru=An({ImmOrOwnedObject:St,SharedObject:f({objectId:ge,initialSharedVersion:le,mutable:Ft()}),Receiving:St}),Du=An({Object:Ru,Pure:f({bytes:Vt}),UnresolvedPure:f({value:be()}),UnresolvedObject:f({objectId:ge,version:N(T(le)),digest:N(T(S())),initialSharedVersion:N(T(le))})}),Bu=An({None:y(!0),Epoch:le}),Nu=f({version:y(2),sender:$e(an),expiration:$e(Bu),gasData:$u,inputs:m(Du),commands:m(Pu)});function Vu(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?F(t):t.toBase64()}}}const rt={Pure:Vu,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:z(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:z(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:z(t)}}}}};function Gu(t,e){return!!(t.inputs.some(n=>n.UnresolvedObject||n.UnresolvedPure)||!e.onlyTransactionKind&&(!t.gasConfig.price||!t.gasConfig.budget||!t.gasConfig.payment))}async function Lu(t,e,n){return Fu(t),Gu(t,e)?zu(e).core.resolveTransactionPlugin()(t,e,async()=>{await Os(t),await n()}):(await Os(t),n())}function Os(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function zu(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Fu(t){for(const e of t.commands)switch(e.$kind){case"SplitCoins":e.SplitCoins.amounts.forEach(n=>{Ss(n,M.U64,t)});break;case"TransferObjects":Ss(e.TransferObjects.address,M.Address,t);break}}function Ss(t,e,n){if(t.$kind!=="Input")return;const r=n.inputs[t.Input];r.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=rt.Pure(e.serialize(r.UnresolvedPure.value)))}function Wu(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:r})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[s.object(r)]}),e}function qu(t){function e(n,r){if(typeof n=="string")return t(yn(n).serialize(r));if(n instanceof Uint8Array||on(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(M.U8.serialize(n)),e.u16=n=>t(M.U16.serialize(n)),e.u32=n=>t(M.U32.serialize(n)),e.u64=n=>t(M.U64.serialize(n)),e.u128=n=>t(M.U128.serialize(n)),e.u256=n=>t(M.U256.serialize(n)),e.bool=n=>t(M.Bool.serialize(n)),e.string=n=>t(M.String.serialize(n)),e.address=n=>t(M.Address.serialize(n)),e.id=e.address,e.vector=(n,r)=>t(M.vector(yn(n)).serialize(r)),e.option=(n,r)=>t(M.option(yn(n)).serialize(r)),e}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ku(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function xr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function es(t,...e){if(!Ku(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function Is(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function Xu(t,e){es(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function nr(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}function $r(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}const Fi=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function Wi(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Je=Fi?t=>t:t=>Wi(t);function Hu(t){for(let e=0;e<t.length;e++)t[e]=Wi(t[e]);return t}const Kt=Fi?t=>t:Hu;function Ju(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function wn(t){return typeof t=="string"&&(t=Ju(t)),es(t),t}class Qu{}function Yu(t){const e=(r,s)=>t(s).update(wn(r)).digest(),n=t({});return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=r=>t(r),e}const Zu=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]),Un=BigInt(2**32-1),js=BigInt(32);function ec(t,e=!1){return e?{h:Number(t&Un),l:Number(t>>js&Un)}:{h:Number(t>>js&Un)|0,l:Number(t&Un)|0}}const qi=(t,e,n)=>t>>>n|e<<32-n,Ki=(t,e,n)=>t<<32-n|e>>>n,tc=(t,e,n)=>t<<64-n|e>>>n-32,nc=(t,e,n)=>t>>>n-32|e<<64-n,rc=(t,e)=>e,sc=(t,e)=>t;function Xi(t,e,n,r){const s=(e>>>0)+(r>>>0);return{h:t+n+(s/2**32|0)|0,l:s|0}}const Hi=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),Ji=(t,e,n,r)=>e+n+r+(t/2**32|0)|0,se=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),I=new Uint32Array(32);function ht(t,e,n,r,s,i){const a=s[i],u=s[i+1];let c=I[2*t],h=I[2*t+1],l=I[2*e],g=I[2*e+1],j=I[2*n],O=I[2*n+1],b=I[2*r],U=I[2*r+1],re=Hi(c,l,a);h=Ji(re,h,g,u),c=re|0,{Dh:U,Dl:b}={Dh:U^h,Dl:b^c},{Dh:U,Dl:b}={Dh:rc(U,b),Dl:sc(U)},{h:O,l:j}=Xi(O,j,U,b),{Bh:g,Bl:l}={Bh:g^O,Bl:l^j},{Bh:g,Bl:l}={Bh:qi(g,l,24),Bl:Ki(g,l,24)},I[2*t]=c,I[2*t+1]=h,I[2*e]=l,I[2*e+1]=g,I[2*n]=j,I[2*n+1]=O,I[2*r]=b,I[2*r+1]=U}function gt(t,e,n,r,s,i){const a=s[i],u=s[i+1];let c=I[2*t],h=I[2*t+1],l=I[2*e],g=I[2*e+1],j=I[2*n],O=I[2*n+1],b=I[2*r],U=I[2*r+1],re=Hi(c,l,a);h=Ji(re,h,g,u),c=re|0,{Dh:U,Dl:b}={Dh:U^h,Dl:b^c},{Dh:U,Dl:b}={Dh:qi(U,b,16),Dl:Ki(U,b,16)},{h:O,l:j}=Xi(O,j,U,b),{Bh:g,Bl:l}={Bh:g^O,Bl:l^j},{Bh:g,Bl:l}={Bh:tc(g,l,63),Bl:nc(g,l,63)},I[2*t]=c,I[2*t+1]=h,I[2*e]=l,I[2*e+1]=g,I[2*n]=j,I[2*n+1]=O,I[2*r]=b,I[2*r+1]=U}function ic(t,e={},n,r,s){if(xr(n),t<0||t>n)throw new Error("outputLen bigger than keyLen");const{key:i,salt:a,personalization:u}=e;if(i!==void 0&&(i.length<1||i.length>n))throw new Error("key length must be undefined or 1.."+n);if(a!==void 0&&a.length!==r)throw new Error("salt must be undefined or "+r);if(u!==void 0&&u.length!==s)throw new Error("personalization must be undefined or "+s)}class oc extends Qu{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,xr(e),xr(n),this.blockLen=e,this.outputLen=n,this.buffer=new Uint8Array(e),this.buffer32=nr(this.buffer)}update(e){Is(this),e=wn(e),es(e);const{blockLen:n,buffer:r,buffer32:s}=this,i=e.length,a=e.byteOffset,u=e.buffer;for(let c=0;c<i;){this.pos===n&&(Kt(s),this.compress(s,0,!1),Kt(s),this.pos=0);const h=Math.min(n-this.pos,i-c),l=a+c;if(h===n&&!(l%4)&&c+h<i){const g=new Uint32Array(u,l,Math.floor((i-c)/4));Kt(g);for(let j=0;c+n<i;j+=s.length,c+=n)this.length+=n,this.compress(g,j,!1);Kt(g);continue}r.set(e.subarray(c,c+h),this.pos),this.pos+=h,this.length+=h,c+=h}return this}digestInto(e){Is(this),Xu(e,this);const{pos:n,buffer32:r}=this;this.finished=!0,$r(this.buffer.subarray(n)),Kt(r),this.compress(r,0,!0),Kt(r);const s=nr(e);this.get().forEach((i,a)=>s[a]=Je(i))}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const r=e.slice(0,n);return this.destroy(),r}_cloneInto(e){const{buffer:n,length:r,finished:s,destroyed:i,outputLen:a,pos:u}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.buffer.set(n),e.destroyed=i,e.finished=s,e.length=r,e.pos=u,e.outputLen=a,e}clone(){return this._cloneInto()}}class ac extends oc{constructor(e={}){const n=e.dkLen===void 0?64:e.dkLen;super(128,n),this.v0l=se[0]|0,this.v0h=se[1]|0,this.v1l=se[2]|0,this.v1h=se[3]|0,this.v2l=se[4]|0,this.v2h=se[5]|0,this.v3l=se[6]|0,this.v3h=se[7]|0,this.v4l=se[8]|0,this.v4h=se[9]|0,this.v5l=se[10]|0,this.v5h=se[11]|0,this.v6l=se[12]|0,this.v6h=se[13]|0,this.v7l=se[14]|0,this.v7h=se[15]|0,ic(n,e,64,16,16);let{key:r,personalization:s,salt:i}=e,a=0;if(r!==void 0&&(r=wn(r),a=r.length),this.v0l^=this.outputLen|a<<8|65536|1<<24,i!==void 0){i=wn(i);const u=nr(i);this.v4l^=Je(u[0]),this.v4h^=Je(u[1]),this.v5l^=Je(u[2]),this.v5h^=Je(u[3])}if(s!==void 0){s=wn(s);const u=nr(s);this.v6l^=Je(u[0]),this.v6h^=Je(u[1]),this.v7l^=Je(u[2]),this.v7h^=Je(u[3])}if(r!==void 0){const u=new Uint8Array(this.blockLen);u.set(r),this.update(u)}}get(){let{v0l:e,v0h:n,v1l:r,v1h:s,v2l:i,v2h:a,v3l:u,v3h:c,v4l:h,v4h:l,v5l:g,v5h:j,v6l:O,v6h:b,v7l:U,v7h:re}=this;return[e,n,r,s,i,a,u,c,h,l,g,j,O,b,U,re]}set(e,n,r,s,i,a,u,c,h,l,g,j,O,b,U,re){this.v0l=e|0,this.v0h=n|0,this.v1l=r|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=u|0,this.v3h=c|0,this.v4l=h|0,this.v4h=l|0,this.v5l=g|0,this.v5h=j|0,this.v6l=O|0,this.v6h=b|0,this.v7l=U|0,this.v7h=re|0}compress(e,n,r){this.get().forEach((c,h)=>I[h]=c),I.set(se,16);let{h:s,l:i}=ec(BigInt(this.length));I[24]=se[8]^i,I[25]=se[9]^s,r&&(I[28]=~I[28],I[29]=~I[29]);let a=0;const u=Zu;for(let c=0;c<12;c++)ht(0,4,8,12,e,n+2*u[a++]),gt(0,4,8,12,e,n+2*u[a++]),ht(1,5,9,13,e,n+2*u[a++]),gt(1,5,9,13,e,n+2*u[a++]),ht(2,6,10,14,e,n+2*u[a++]),gt(2,6,10,14,e,n+2*u[a++]),ht(3,7,11,15,e,n+2*u[a++]),gt(3,7,11,15,e,n+2*u[a++]),ht(0,5,10,15,e,n+2*u[a++]),gt(0,5,10,15,e,n+2*u[a++]),ht(1,6,11,12,e,n+2*u[a++]),gt(1,6,11,12,e,n+2*u[a++]),ht(2,7,8,13,e,n+2*u[a++]),gt(2,7,8,13,e,n+2*u[a++]),ht(3,4,9,14,e,n+2*u[a++]),gt(3,4,9,14,e,n+2*u[a++]);this.v0l^=I[0]^I[16],this.v0h^=I[1]^I[17],this.v1l^=I[2]^I[18],this.v1h^=I[3]^I[19],this.v2l^=I[4]^I[20],this.v2h^=I[5]^I[21],this.v3l^=I[6]^I[22],this.v3h^=I[7]^I[23],this.v4l^=I[8]^I[24],this.v4h^=I[9]^I[25],this.v5l^=I[10]^I[26],this.v5h^=I[11]^I[27],this.v6l^=I[12]^I[28],this.v6h^=I[13]^I[29],this.v7l^=I[14]^I[30],this.v7h^=I[15]^I[31],$r(I)}destroy(){this.destroyed=!0,$r(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const uc=Yu(t=>new ac(t)),ts=uc;function cc(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+e.length);return r.set(n),r.set(e,n.length),ts(r,{dkLen:32})}function ks(t){return z(t).replace("0x","")}let At=class _t{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=M.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return _t.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const n=M.TransactionData.parse(e),r=n==null?void 0:n.V1,s=r.kind.ProgrammableTransaction;if(!r||!s)throw new Error("Unable to deserialize from bytes.");return _t.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new _t(x(Bn,e)):new _t(x(Bn,xu(e)))}static getDigestFromBytes(e){const n=cc("TransactionData",e);return sn(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:r}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(r)return M.TransactionKind.serialize(a,{maxSize:e}).toBytes();const u=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,h={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!h.budget)throw new Error("Missing gas budget");if(!h.payment)throw new Error("Missing gas payment");if(!h.price)throw new Error("Missing gas price");const l={sender:ks(c),expiration:u||{None:!0},gasData:{payment:h.payment,owner:ks(this.gasData.owner??c),price:BigInt(h.price),budget:BigInt(h.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return M.TransactionData.serialize({V1:l},{maxSize:e}).toBytes()}addInput(e,n){const r=this.inputs.length;return this.inputs.push(n),{Input:r,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((r,s)=>(r.$kind==="Input"&&r.Input===e&&n(r,s),r))}mapCommandArguments(e,n){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>n(i,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>n(i,r,e)),r.TransferObjects.address=n(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=n(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>n(i,r,e));break;case"MergeCoins":r.MergeCoins.destination=n(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>n(i,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>n(i,r,e));break;case"Upgrade":r.Upgrade.ticket=n(r.Upgrade.ticket,r,e);break;case"$Intent":const s=r.$Intent.inputs;r.$Intent.inputs={};for(const[i,a]of Object.entries(s))r.$Intent.inputs[i]=Array.isArray(a)?a.map(u=>n(u,r,e)):n(a,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const n of this.commands.keys())this.mapCommandArguments(n,e)}replaceCommand(e,n,r=e){if(!Array.isArray(n)){this.commands[e]=n;return}const s=n.length-1;this.commands.splice(e,1,...n),s!==0&&this.mapArguments((i,a,u)=>{if(u<e+n.length)return i;switch(i.$kind){case"Result":i.Result===e&&(i.Result=r),i.Result>e&&(i.Result+=s);break;case"NestedResult":i.NestedResult[0]===e&&(i.NestedResult[0]=r),i.NestedResult[0]>e&&(i.NestedResult[0]+=s);break}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return _t.getDigestFromBytes(e)}snapshot(){return x(Bn,this)}shallowClone(){return new _t({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}};function Ts(t){if(typeof t=="string")return z(t);if(t.Object)return t.Object.ImmOrOwnedObject?z(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?z(t.Object.Receiving.objectId):z(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return z(t.UnresolvedObject.objectId)}var Qi=t=>{throw TypeError(t)},ns=(t,e,n)=>e.has(t)||Qi("Cannot "+n),w=(t,e,n)=>(ns(t,e,"read from private field"),n?n.call(t):e.get(t)),Me=(t,e,n)=>e.has(t)?Qi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),J=(t,e,n,r)=>(ns(t,e,"write to private field"),e.set(t,n),n),ie=(t,e,n)=>(ns(t,e,"access private method"),n),Ut,Dt,et,Ge,Le,it,Be,bt,_,ee,Yi,Nn,Vn,Gn,rr,Mr,rs,Zi,eo;function pr(t,e=1/0){const n={$kind:"Result",Result:t},r=[],s=i=>r[i]??(r[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,a){if(a in i)return Reflect.get(i,a);if(a===Symbol.iterator)return function*(){let c=0;for(;c<e;)yield s(c),c++};if(typeof a=="symbol")return;const u=parseInt(a,10);if(!(Number.isNaN(u)||u<0))return s(u)}})}const to=Symbol.for("@mysten/transaction");function no(t){return!!t&&typeof t=="object"&&t[to]===!0}const Es={buildPlugins:new Map,serializationPlugins:new Map},mr=Symbol.for("@mysten/transaction/registry");function ln(){try{const t=globalThis;return t[mr]||(t[mr]=Es),t[mr]}catch{return Es}}const ro=class Ur{constructor(){Me(this,ee),Me(this,Ut),Me(this,Dt),Me(this,et,new Map),Me(this,Ge,[]),Me(this,Le,[]),Me(this,it,new Set),Me(this,Be,new Set),Me(this,bt,new Map),Me(this,_),this.object=Wu(n=>{var i,a;if(typeof n=="function")return this.object(this.add(n));if(typeof n=="object"&&nn(X,n))return n;const r=Ts(n),s=w(this,_).inputs.find(u=>r===Ts(u));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof n=="object"&&((a=n.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:w(this,_).inputs.indexOf(s),type:"object"}:ie(this,ee,Vn).call(this,"object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:z(n)}}:n)});const e=ln();J(this,_,new At),J(this,Dt,[...e.buildPlugins.values()]),J(this,Ut,[...e.serializationPlugins.values()])}static fromKind(e){const n=new Ur;return J(n,_,At.fromKindBytes(typeof e=="string"?Z(e):e)),J(n,Ge,w(n,_).inputs),J(n,Le,w(n,_).commands),n}static from(e){const n=new Ur;return no(e)?J(n,_,new At(e.getData())):typeof e!="string"||!e.startsWith("{")?J(n,_,At.fromBytes(typeof e=="string"?Z(e):e)):J(n,_,At.restore(JSON.parse(e))),J(n,Ge,w(n,_).inputs),J(n,Le,w(n,_).commands),n}static registerGlobalSerializationPlugin(e,n){ln().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){ln().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){ln().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){ln().buildPlugins.delete(e)}addSerializationPlugin(e){w(this,Ut).push(e)}addBuildPlugin(e){w(this,Dt).push(e)}addIntentResolver(e,n){if(w(this,et).has(e)&&w(this,et).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);w(this,et).set(e,n)}setSender(e){w(this,_).sender=e}setSenderIfNotSet(e){w(this,_).sender||(w(this,_).sender=e)}setExpiration(e){w(this,_).expiration=e?x(Li,e):null}setGasPrice(e){w(this,_).gasConfig.price=String(e)}setGasBudget(e){w(this,_).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){w(this,_).gasData.budget==null&&(w(this,_).gasConfig.budget=String(e))}setGasOwner(e){w(this,_).gasConfig.owner=e}setGasPayment(e){w(this,_).gasConfig.payment=e.map(n=>x(St,n))}get blockData(){return vs(w(this,_).snapshot())}getData(){return w(this,_).snapshot()}get[to](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:qu(e=>on(e)?ie(this,ee,Vn).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):ie(this,ee,Vn).call(this,"pure",nn(bs,e)?x(bs,e):e instanceof Uint8Array?rt.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(rt.ObjectRef(...e))}receivingRef(...e){return this.object(rt.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(rt.SharedObjectRef(...e))}add(e){if(typeof e=="function"){if(w(this,bt).has(e))return w(this,bt).get(e);const n=ie(this,ee,Yi).call(this),r=e(n);if(!(r&&typeof r=="object"&&"then"in r))return J(this,it,w(n,it)),w(this,bt).set(e,r),r;const s=ie(this,ee,Nn).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{result:null}}});w(this,Be).add(Promise.resolve(r).then(a=>{s.$Intent.data.result=a}));const i=pr(w(this,_).commands.length-1);return w(this,bt).set(e,i),i}else ie(this,ee,Nn).call(this,e);return pr(w(this,_).commands.length-1)}splitCoins(e,n){const r=kt.SplitCoins(typeof e=="string"?this.object(e):ie(this,ee,rr).call(this,e),n.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):ie(this,ee,Gn).call(this,s)));return ie(this,ee,Nn).call(this,r),pr(w(this,_).commands.length-1,n.length)}mergeCoins(e,n){return this.add(kt.MergeCoins(this.object(e),n.map(r=>this.object(r))))}publish({modules:e,dependencies:n}){return this.add(kt.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:r,ticket:s}){return this.add(kt.Upgrade({modules:e,dependencies:n,package:r,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(kt.MoveCall({...n,arguments:e==null?void 0:e.map(r=>ie(this,ee,Gn).call(this,r))}))}transferObjects(e,n){return this.add(kt.TransferObjects(e.map(r=>this.object(r)),typeof n=="string"?this.pure.address(n):ie(this,ee,Gn).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(kt.MakeMoveVec({type:e,elements:n.map(r=>this.object(r))}))}serialize(){return JSON.stringify(vs(w(this,_).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(x(Nu,w(this,_).snapshot()),(n,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){const{signer:n,...r}=e,s=await this.build(r);return n.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await ie(this,ee,Mr).call(this,e),w(this,_).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await ie(this,ee,Mr).call(this,e),w(this,_).getDigest()}async prepareForSerialization(e){var s;await ie(this,ee,Zi).call(this),ie(this,ee,eo).call(this);const n=new Set;for(const i of w(this,_).commands)i.$Intent&&n.add(i.$Intent.name);const r=[...w(this,Ut)];for(const i of n)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!w(this,et).has(i))throw new Error(`Missing intent resolver for ${i}`);r.push(w(this,et).get(i))}await ie(this,ee,rs).call(this,r,e)}};Ut=new WeakMap;Dt=new WeakMap;et=new WeakMap;Ge=new WeakMap;Le=new WeakMap;it=new WeakMap;Be=new WeakMap;bt=new WeakMap;_=new WeakMap;ee=new WeakSet;Yi=function(){const t=new ro;return J(t,_,w(this,_)),J(t,Ut,w(this,Ut)),J(t,Dt,w(this,Dt)),J(t,et,w(this,et)),J(t,Be,w(this,Be)),J(t,it,new Set(w(this,it))),J(t,bt,w(this,bt)),w(this,Ge).push(w(t,Ge)),w(this,Le).push(w(t,Le)),t};Nn=function(t){const e=w(this,_).commands.length;return w(this,Le).push(t),w(this,it).add(e),w(this,_).commands.push(t),w(this,_).mapCommandArguments(e,n=>{if(n.$kind==="Result"&&!w(this,it).has(n.Result))throw new Error(`Result { Result: ${n.Result} } is not available to use the current transaction`);if(n.$kind==="NestedResult"&&!w(this,it).has(n.NestedResult[0]))throw new Error(`Result { NestedResult: [${n.NestedResult[0]}, ${n.NestedResult[1]}] } is not available to use the current transaction`);if(n.$kind==="Input"&&n.Input>=w(this,_).inputs.length)throw new Error(`Input { Input: ${n.Input} } references an input that does not exist in the current transaction`);return n}),t};Vn=function(t,e){return w(this,Ge).push(e),w(this,_).addInput(t,e)};Gn=function(t){return on(t)?this.pure(t):ie(this,ee,rr).call(this,t)};rr=function(t){if(typeof t=="function"){const e=this.add(t);return typeof e=="function"?ie(this,ee,rr).call(this,e):x(X,e)}return x(X,t)};Mr=async function(t){if(!t.onlyTransactionKind&&!w(this,_).sender)throw new Error("Missing transaction sender");await ie(this,ee,rs).call(this,[...w(this,Dt),Lu],t)};rs=async function(t,e){const n=r=>{if(r>=t.length)return()=>{};const s=t[r];return async()=>{const i=n(r+1);let a=!1,u=!1;if(await s(w(this,_),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);a=!0,await i(),u=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)(),J(this,Ge,w(this,_).inputs),J(this,Le,w(this,_).commands)};Zi=async function(){for(;w(this,Be).size>0;){const t=Promise.all(w(this,Be));w(this,Be).clear(),w(this,Be).add(t),await t,w(this,Be).delete(t)}};eo=function(){const t=w(this,_).commands,e=w(this,_).inputs,n=w(this,Le).flat(1/0),r=w(this,Ge).flat(1/0);if(n.length!==t.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==e.length)throw new Error("Unexpected number of inputs found in transaction data");const s=n.filter(a=>{var u;return((u=a.$Intent)==null?void 0:u.name)!=="AsyncTransactionThunk"});w(this,_).commands=s,w(this,_).inputs=r,J(this,Le,s),J(this,Ge,r);function i(a){var h;const u=t[a];if(((h=u.$Intent)==null?void 0:h.name)==="AsyncTransactionThunk"){const l=u.$Intent.data.result;if(l==null)throw new Error("AsyncTransactionThunk has not been resolved");return i(l.Result)}const c=s.indexOf(u);if(c===-1)throw new Error("Unable to find original index for command");return c}w(this,_).mapArguments(a=>{if(a.$kind==="Input"){const u=r.indexOf(e[a.Input]);if(u===-1)throw new Error("Input has not been resolved");return{...a,Input:u}}else if(a.$kind==="Result"){const u=i(a.Result);return{...a,Result:u}}else if(a.$kind==="NestedResult"){const u=i(a.NestedResult[0]);return{...a,NestedResult:[u,a.NestedResult[1]]}}return a})};let so=ro;function lc(t,e,n){const r=M.Address.serialize(t).toBytes(),s=M.TypeTag.serialize(e).toBytes(),i=M.u64().serialize(n.length).toBytes(),a=ts.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(r),a.update(i),a.update(n),a.update(s),`0x${Ot(a.digest().slice(0,32))}`}class dc extends hi{constructor(){super(...arguments),this.core=this}async getObject(e){const{objectId:n}=e,{objects:[r]}=await this.getObjects({objectIds:[n],signal:e.signal});if(r instanceof Error)throw r;return{object:r}}async getDynamicField(e){const n=lc(e.parentId,kn.parseFromStr(e.name.type),e.name.bcs),{objects:[r]}=await this.getObjects({objectIds:[n],signal:e.signal});if(r instanceof Error)throw r;const s=Xr(r.type);return{dynamicField:{id:r.id,digest:r.digest,version:r.version,type:r.type,name:{type:typeof s.typeParams[0]=="string"?s.typeParams[0]:_r(s.typeParams[0]),bcs:e.name.bcs},value:{type:typeof s.typeParams[1]=="string"?s.typeParams[1]:_r(s.typeParams[1]),bcs:r.content.slice(or+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:n=60*1e3,...r}){const s=e?AbortSignal.any([AbortSignal.timeout(n),e]):AbortSignal.timeout(n),i=new Promise((a,u)=>{s.addEventListener("abort",()=>u(s.reason))});for(i.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({...r,signal:s})}catch{await Promise.race([new Promise(u=>setTimeout(u,2e3)),i])}}}}class fc extends Error{}class yt extends fc{constructor(e,n){super(n),this.code=e}static fromResponse(e,n){switch(e.code){case"notExists":return new yt(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new yt(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new yt(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new yt(e.code,`Display error: ${e.error}`);case"unknown":default:return new yt(e.code,`Unknown error while loading object${n?` ${n}`:""}`)}}}BigInt(1e9);const hc="0x1",io="0x2";nt("0x6");const gc=`${io}::sui::SUI`;nt("0x5");const pc="object",mc="ID",bc="ascii",yc="String",wc="string",vc="String",Oc="option",Sc="Option";function Ic(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&z(e.package)===z("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function Pr(t){if(typeof t=="string")switch(t){case"address":return M.Address;case"bool":return M.Bool;case"u8":return M.U8;case"u16":return M.U16;case"u32":return M.U32;case"u64":return M.U64;case"u128":return M.U128;case"u256":return M.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return M.vector(M.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=Pr(t.vector);return e?M.vector(e):null}if("datatype"in t){const e=z(t.datatype.package);if(e===z(hc)){if(t.datatype.module===bc&&t.datatype.type===yc||t.datatype.module===wc&&t.datatype.type===vc)return M.String;if(t.datatype.module===Oc&&t.datatype.type===Sc){const n=Pr(t.datatype.typeParameters[0]);return n?M.vector(n):null}}if(e===z(io)&&t.datatype.module===pc&&t.datatype.type===mc)return M.Address}return null}function jc(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:vn(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:vn(t.MutableReference)}:{ref:null,body:vn(t)}}function vn(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:vn(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(vn)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function kc(t){return{...At.fromBytes(t).snapshot(),bcs:t}}function Tc(t){const e=M.TransactionEffects.parse(t);switch(e.$kind){case"V1":return Ec({effects:e.V1});case"V2":return _c({bytes:t,effects:e.V2});default:throw new Error(`Unknown transaction effects version: ${e.$kind}`)}}function Ec(t){throw new Error("V1 effects are not supported yet")}function _c({bytes:t,effects:e}){const n=e.changedObjects.map(([r,s])=>{var i,a,u,c,h,l;return{id:r,inputState:s.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((i=s.inputState.Exist)==null?void 0:i[0][0])??null,inputDigest:((a=s.inputState.Exist)==null?void 0:a[0][1])??null,inputOwner:((u=s.inputState.Exist)==null?void 0:u[1])??null,outputState:s.outputState.$kind==="NotExist"?"DoesNotExist":s.outputState.$kind,outputVersion:s.outputState.$kind==="PackageWrite"?(c=s.outputState.PackageWrite)==null?void 0:c[0]:s.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:s.outputState.$kind==="PackageWrite"?(h=s.outputState.PackageWrite)==null?void 0:h[1]:((l=s.outputState.ObjectWrite)==null?void 0:l[0])??null,outputOwner:s.outputState.ObjectWrite?s.outputState.ObjectWrite[1]:null,idOperation:s.idOperation.$kind}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:n[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:n,unchangedSharedObjects:e.unchangedSharedObjects.map(([r,s])=>({kind:s.$kind,objectId:r,version:s.$kind==="ReadOnlyRoot"?s.ReadOnlyRoot[0]:s[s.$kind],digest:s.$kind==="ReadOnlyRoot"?s.ReadOnlyRoot[1]:null})),auxiliaryDataDigest:e.auxDataDigest}}const Ac=50,Cc=1000n,xc=5e10;function $c(t){return async function(n,r,s){return await Dc(n,t),await Rc(n,t),r.onlyTransactionKind||(await Mc(n,t),await Uc(n,t),await Pc(n,t)),await s()}}async function Mc(t,e){t.gasConfig.price||(t.gasConfig.price=String(await e.getReferenceGasPrice()))}async function Uc(t,e){if(t.gasConfig.budget)return;const n=await e.dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(xc),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=Cc*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+r,i=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function Pc(t,e){if(!t.gasConfig.payment){const r=(await e.getCoins({owner:t.gasConfig.owner||t.sender,coinType:gc})).data.filter(s=>!t.inputs.find(a=>{var u;return(u=a.Object)!=null&&u.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(s=>x(St,s))}}async function Rc(t,e){const n=t.inputs.filter(l=>{var g;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(g=l.UnresolvedObject)!=null&&g.initialSharedVersion)}),r=[...new Set(n.map(l=>nt(l.UnresolvedObject.objectId)))],s=r.length?ii(r,Ac):[],i=(await Promise.all(s.map(l=>e.multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),a=new Map(r.map((l,g)=>[l,i[g]])),u=Array.from(a).filter(([l,g])=>g.error).map(([l,g])=>JSON.stringify(g.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);const c=i.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const g=l.data.owner,j=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:j}}),h=new Map(r.map((l,g)=>[l,c[g]]));for(const[l,g]of t.inputs.entries()){if(!g.UnresolvedObject)continue;let j;const O=z(g.UnresolvedObject.objectId),b=h.get(O);g.UnresolvedObject.initialSharedVersion??(b==null?void 0:b.initialSharedVersion)?j=rt.SharedObjectRef({objectId:O,initialSharedVersion:g.UnresolvedObject.initialSharedVersion||(b==null?void 0:b.initialSharedVersion),mutable:Bc(t,l)}):Nc(t,l)&&(j=rt.ReceivingRef({objectId:O,digest:g.UnresolvedObject.digest??(b==null?void 0:b.digest),version:g.UnresolvedObject.version??(b==null?void 0:b.version)})),t.inputs[t.inputs.indexOf(g)]=j??rt.ObjectRef({objectId:O,digest:g.UnresolvedObject.digest??(b==null?void 0:b.digest),version:g.UnresolvedObject.version??(b==null?void 0:b.version)})}}async function Dc(t,e){const{inputs:n,commands:r}=t,s=[],i=new Set;r.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(l=>l.$kind==="Input"?t.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;i.add(l),s.push(u.MoveCall)}}});const a=new Map;i.size>0&&await Promise.all([...i].map(async u=>{const[c,h,l]=u.split("::"),g=await e.getNormalizedMoveFunction({package:c,module:h,function:l});a.set(u,g.parameters.map(j=>jc(j)))})),s.length&&await Promise.all(s.map(async u=>{const c=a.get(`${u.package}::${u.module}::${u.function}`);if(!c)return;const l=c.length>0&&Ic(c.at(-1))?c.slice(0,c.length-1):c;u._argumentTypes=l})),r.forEach(u=>{if(!u.MoveCall)return;const c=u.MoveCall,h=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${h}`);l.forEach((g,j)=>{var k,V;const O=c.arguments[j];if(O.$kind!=="Input")return;const b=n[O.Input];if(!b.UnresolvedPure&&!b.UnresolvedObject)return;const U=((k=b.UnresolvedPure)==null?void 0:k.value)??((V=b.UnresolvedObject)==null?void 0:V.objectId),re=Pr(g.body);if(re){O.type="pure",n[n.indexOf(b)]=rt.Pure(re.serialize(U));return}if(typeof U!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(U,null,2)}`);O.type="object";const fe=b.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:U}}:b;n[O.Input]=fe})}})}function Bc(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=s.MoveCall._argumentTypes[i].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(n=!0)}),n}function Nc(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=Vc(s.MoveCall._argumentTypes[i])||n}}),n}function Vc(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}var oo=t=>{throw TypeError(t)},ao=(t,e,n)=>e.has(t)||oo("Cannot "+n),ve=(t,e,n)=>(ao(t,e,"read from private field"),n?n.call(t):e.get(t)),Gc=(t,e,n)=>e.has(t)?oo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Lc=(t,e,n,r)=>(ao(t,e,"write to private field"),e.set(t,n),n),ce;class zc extends dc{constructor(e){super({network:e.network}),Gc(this,ce),Lc(this,ce,e)}async getObjects(e){const n=su(e.objectIds,50),r=[];for(const s of n){const i=await ve(this,ce).multiGetObjects({ids:s,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});for(const[a,u]of i.entries())u.error?r.push(yt.fromResponse(u.error,s[a])):r.push(_s(u.data))}return{objects:r}}async getOwnedObjects(e){const n=await ve(this,ce).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0},signal:e.signal});return{objects:n.data.map(r=>{if(r.error)throw yt.fromResponse(r.error);return _s(r.data)}),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getCoins(e){const n=await ve(this,ce).getCoins({owner:e.address,coinType:e.coinType,limit:e.limit,cursor:e.cursor,signal:e.signal});return{objects:n.data.map(r=>({id:r.coinObjectId,version:r.version,digest:r.digest,balance:r.balance,type:`0x2::coin::Coin<${r.coinType}>`,content:qc.serialize({id:r.coinObjectId,balance:{value:r.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor??null}}async getBalance(e){const n=await ve(this,ce).getBalance({owner:e.address,coinType:e.coinType,signal:e.signal});return{balance:{coinType:n.coinType,balance:n.totalBalance}}}async getAllBalances(e){return{balances:(await ve(this,ce).getAllBalances({owner:e.address,signal:e.signal})).map(r=>({coinType:r.coinType,balance:r.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const n=await ve(this,ce).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0},signal:e.signal});return{transaction:As(n)}}async executeTransaction(e){const n=await ve(this,ce).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0},signal:e.signal});return{transaction:As(n)}}async dryRunTransaction(e){const n=so.from(e.transaction),r=await ve(this,ce).dryRunTransactionBlock({transactionBlock:e.transaction,signal:e.signal}),{effects:s,objectTypes:i}=Fc({effects:r.effects,objectChanges:r.objectChanges});return{transaction:{digest:await n.getDigest(),epoch:null,effects:s,objectTypes:Promise.resolve(i),signatures:[],transaction:kc(e.transaction)}}}async getReferenceGasPrice(e){const n=await ve(this,ce).getReferenceGasPrice({signal:e==null?void 0:e.signal});return{referenceGasPrice:String(n)}}async getDynamicFields(e){const n=await ve(this,ce).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:n.data.map(r=>({id:r.objectId,type:r.objectType,name:{type:r.name.type,bcs:Z(r.bcsName)}})),hasNextPage:n.hasNextPage,cursor:n.nextCursor}}async verifyZkLoginSignature(e){const n=await ve(this,ce).verifyZkLoginSignature({bytes:e.bytes,signature:e.signature,intentScope:e.intentScope,author:e.author});return{success:n.success,errors:n.errors}}resolveTransactionPlugin(){return $c(ve(this,ce))}}ce=new WeakMap;function _s(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?Z(t.bcs.bcsBytes):new Uint8Array,owner:Yt(t.owner)}}function Yt(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function As(t){var i,a;const e=M.SenderSignedData.parse(Z(t.rawTransaction))[0],n={};(i=t.objectChanges)==null||i.forEach(u=>{u.type!=="published"&&(n[u.objectId]=u.objectType)});const r=M.TransactionData.serialize(e.intentMessage.value).toBytes(),s=At.restore({version:2,sender:e.intentMessage.value.V1.sender,expiration:e.intentMessage.value.V1.expiration,gasData:e.intentMessage.value.V1.gasData,inputs:e.intentMessage.value.V1.kind.ProgrammableTransaction.inputs,commands:e.intentMessage.value.V1.kind.ProgrammableTransaction.commands});return{digest:t.digest,epoch:((a=t.effects)==null?void 0:a.executedEpoch)??null,effects:Tc(new Uint8Array(t.rawEffects)),objectTypes:Promise.resolve(n),transaction:{...s,bcs:r},signatures:e.txSignatures}}function Fc({bytes:t,effects:e,objectChanges:n}){var a;const r=[],s=[],i={};return n==null||n.forEach(u=>{var c,h,l,g;switch(u.type){case"published":r.push({id:u.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:u.version,outputDigest:u.digest,outputOwner:null,idOperation:"Created"});break;case"transferred":r.push({id:u.objectId,inputState:"Exists",inputVersion:u.version,inputDigest:u.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:u.sender},outputState:"ObjectWrite",outputVersion:u.version,outputDigest:u.digest,outputOwner:Yt(u.recipient),idOperation:"None"}),i[u.objectId]=u.objectType;break;case"mutated":r.push({id:u.objectId,inputState:"Exists",inputVersion:u.previousVersion,inputDigest:null,inputOwner:Yt(u.owner),outputState:"ObjectWrite",outputVersion:u.version,outputDigest:u.digest,outputOwner:Yt(u.owner),idOperation:"None"}),i[u.objectId]=u.objectType;break;case"deleted":r.push({id:u.objectId,inputState:"Exists",inputVersion:u.version,inputDigest:((h=(c=e.deleted)==null?void 0:c.find(j=>j.objectId===u.objectId))==null?void 0:h.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted"}),i[u.objectId]=u.objectType;break;case"wrapped":r.push({id:u.objectId,inputState:"Exists",inputVersion:u.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:u.sender},outputState:"ObjectWrite",outputVersion:u.version,outputDigest:((g=(l=e.wrapped)==null?void 0:l.find(j=>j.objectId===u.objectId))==null?void 0:g.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:u.sender},idOperation:"None"}),i[u.objectId]=u.objectType;break;case"created":r.push({id:u.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:u.version,outputDigest:u.digest,outputOwner:Yt(u.owner),idOperation:"Created"}),i[u.objectId]=u.objectType;break}}),{objectTypes:i,effects:{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(a=e.gasObject)==null?void 0:a.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:Yt(e.gasObject.owner),idOperation:"None"},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:r,unchangedSharedObjects:s,auxiliaryDataDigest:null}}}const Wc=M.struct("Balance",{value:M.u64()}),qc=M.struct("Coin",{id:M.Address,balance:Wc}),Kc=Symbol.for("@mysten/SuiClient");class Xc extends hi{constructor(e){super({network:e.network??"unknown"}),this.core=new zc(this),this.jsonRpc=this,this.transport=e.transport??new ia({url:e.url})}get[Kc](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,n,{signal:r}={}){return await this.transport.request({method:e,params:n,signal:r})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!Mn(nt(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(r=>{if(!r||!Mn(nt(r)))throw new Error(`Invalid Sui Object id ${r}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!gs(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(r=>{if(!gs(r))throw new Error(`Invalid Transaction digest ${r}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:n,options:r,requestType:s,signal:i}){const a=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:F(e),Array.isArray(n)?n:[n],r],signal:i});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:a.digest})}catch{}return a}async signAndExecuteTransaction({transaction:e,signer:n,...r}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(n.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await n.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...r})}async getTotalTransactionBlocks({signal:e}={}){const n=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(n)}async getReferenceGasPrice({signal:e}={}){const n=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(n)}async getStakes(e){if(!e.owner||!Ze(z(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(n=>{if(!n||!Mn(nt(n)))throw new Error(`Invalid Sui Stake id ${n}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var r,s;let n;if(no(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),n=F(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")n=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)n=F(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(r=e.signal)==null||r.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,n,(s=e.gasPrice)==null?void 0:s.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:F(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!Mn(nt(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const n=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(n)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const n=await this.getCheckpoint({id:"0",signal:e}),r=Nt(n.digest);return Ot(r.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...n}){const{nextCursor:r,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[n.address,n.cursor,n.limit],signal:n.signal});return{hasNextPage:s,nextCursor:r,data:i.map(a=>Ea(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async verifyZkLoginSignature(e){return await this.transport.request({method:"sui_verifyZkLoginSignature",params:[e.bytes,e.signature,e.intentScope,e.author],signal:e.signal})}async waitForTransaction({signal:e,timeout:n=60*1e3,pollInterval:r=2*1e3,...s}){const i=AbortSignal.timeout(n),a=new Promise((u,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,r)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}}var Hc=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Jc=function(t,e,n,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(t,n):s?s.value=n:e.set(t,n),n},Ln;let dn;const ar=new Set;function Qc(t){On=void 0,ar.add(t)}function Yc(t){On=void 0,ar.delete(t)}const Zt={};function Zc(){if(dn||(dn=Object.freeze({register:Cs,get:el,on:tl}),typeof window>"u"))return dn;const t=Object.freeze({register:Cs});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new nl(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return dn}function Cs(...t){var e;return t=t.filter(n=>!ar.has(n)),t.length?(t.forEach(n=>Qc(n)),(e=Zt.register)==null||e.forEach(n=>xs(()=>n(...t))),function(){var r;t.forEach(s=>Yc(s)),(r=Zt.unregister)==null||r.forEach(s=>xs(()=>s(...t)))}):()=>{}}let On;function el(){return On||(On=[...ar]),On}function tl(t,e){var n;return(n=Zt[t])!=null&&n.push(e)||(Zt[t]=[e]),function(){var s;Zt[t]=(s=Zt[t])==null?void 0:s.filter(i=>e!==i)}}function xs(t){try{t()}catch(e){console.error(e)}}class nl extends Event{get detail(){return Hc(this,Ln,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Ln.set(this,void 0),Jc(this,Ln,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Ln=new WeakMap;const ss=32;function uo(t){return rl(t)&&sl(t)===ss}function Y(t,e=!1){let n=t.toLowerCase();return!e&&n.startsWith("0x")&&(n=n.slice(2)),`0x${n.padStart(ss*2,"0")}`}function Tn(t,e=!1){return Y(t,e)}function rl(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function sl(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const il=/^vector<(.+)>$/,ol=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class Ne{static parseFromStr(e,n=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const r=e.match(il);if(r)return{vector:Ne.parseFromStr(r[1],n)};const s=e.match(ol);if(s)return{struct:{address:n?Y(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:Ne.parseStructTypeArgs(s[5],n)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,n=!1){return Kr(e).map(r=>Ne.parseFromStr(r,n))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${Ne.tagToString(e.vector)}>`;if("struct"in e){const n=e.struct,r=n.typeParams.map(Ne.tagToString).join(", ");return`${n.address}::${n.module}::${n.name}${r?`<${r}>`:""}`}throw new Error("Invalid TypeTag")}}function al(t){return o.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function ul(t){return o.enum("Option",{None:null,Some:t})}const q=o.bytes(ss).transform({validate:t=>{const e=typeof t=="string"?t:Ot(t);if(!e||!uo(Y(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?qr(Y(t)):t,output:t=>Y(Ot(t))}),xe=o.vector(o.u8()).transform({name:"ObjectDigest",input:t=>Nt(t),output:t=>sn(new Uint8Array(t)),validate:t=>{if(Nt(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),Ie=o.struct("SuiObjectRef",{objectId:q,version:o.u64(),digest:xe}),co=o.struct("SharedObjectRef",{objectId:q,initialSharedVersion:o.u64(),mutable:o.bool()}),lo=o.enum("ObjectArg",{ImmOrOwnedObject:Ie,SharedObject:co,Receiving:Ie}),Pt=o.enum("Owner",{AddressOwner:q,ObjectOwner:q,Shared:o.struct("Shared",{initialSharedVersion:o.u64()}),Immutable:null,ConsensusV2:o.struct("ConsensusV2",{authenticator:o.enum("Authenticator",{SingleOwner:q}),startVersion:o.u64()})}),fo=o.enum("CallArg",{Pure:o.struct("Pure",{bytes:o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})}),Object:lo}),is=o.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:o.lazy(()=>is),struct:o.lazy(()=>yo),u16:null,u32:null,u256:null}),os=is.transform({input:t=>typeof t=="string"?Ne.parseFromStr(t,!0):t,output:t=>Ne.tagToString(t)}),Re=o.enum("Argument",{GasCoin:null,Input:o.u16(),Result:o.u16(),NestedResult:o.tuple([o.u16(),o.u16()])}),ho=o.struct("ProgrammableMoveCall",{package:q,module:o.string(),function:o.string(),typeArguments:o.vector(os),arguments:o.vector(Re)}),go=o.enum("Command",{MoveCall:ho,TransferObjects:o.struct("TransferObjects",{objects:o.vector(Re),address:Re}),SplitCoins:o.struct("SplitCoins",{coin:Re,amounts:o.vector(Re)}),MergeCoins:o.struct("MergeCoins",{destination:Re,sources:o.vector(Re)}),Publish:o.struct("Publish",{modules:o.vector(o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})),dependencies:o.vector(q)}),MakeMoveVec:o.struct("MakeMoveVec",{type:ul(os).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:o.vector(Re)}),Upgrade:o.struct("Upgrade",{modules:o.vector(o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))})),dependencies:o.vector(q),package:q,ticket:Re})}),po=o.struct("ProgrammableTransaction",{inputs:o.vector(fo),commands:o.vector(go)}),mo=o.enum("TransactionKind",{ProgrammableTransaction:po,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),bo=o.enum("TransactionExpiration",{None:null,Epoch:al()}),yo=o.struct("StructTag",{address:q,module:o.string(),name:o.string(),typeParams:o.vector(is)}),wo=o.struct("GasData",{payment:o.vector(Ie),owner:q,price:o.u64(),budget:o.u64()}),vo=o.struct("TransactionDataV1",{kind:mo,sender:q,gasData:wo,expiration:bo}),Oo=o.enum("TransactionData",{V1:vo}),So=o.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),Io=o.enum("IntentVersion",{V0:null}),jo=o.enum("AppId",{Sui:null}),ko=o.struct("Intent",{scope:So,version:Io,appId:jo});function To(t){return o.struct(`IntentMessage<${t.name}>`,{intent:ko,value:t})}const Eo=o.enum("CompressedSignature",{ED25519:o.fixedArray(64,o.u8()),Secp256k1:o.fixedArray(64,o.u8()),Secp256r1:o.fixedArray(64,o.u8()),ZkLogin:o.vector(o.u8())}),_o=o.enum("PublicKey",{ED25519:o.fixedArray(32,o.u8()),Secp256k1:o.fixedArray(33,o.u8()),Secp256r1:o.fixedArray(33,o.u8()),ZkLogin:o.vector(o.u8())}),Ao=o.struct("MultiSigPkMap",{pubKey:_o,weight:o.u8()}),Co=o.struct("MultiSigPublicKey",{pk_map:o.vector(Ao),threshold:o.u16()}),cl=o.struct("MultiSig",{sigs:o.vector(Eo),bitmap:o.u16(),multisig_pk:Co}),ll=o.vector(o.u8()).transform({input:t=>typeof t=="string"?Z(t):t,output:t=>F(new Uint8Array(t))}),xo=o.struct("SenderSignedTransaction",{intentMessage:To(Oo),txSignatures:o.vector(ll)}),dl=o.vector(xo,{name:"SenderSignedData"}),fl=o.struct("PasskeyAuthenticator",{authenticatorData:o.vector(o.u8()),clientDataJson:o.string(),userSignature:o.vector(o.u8())}),hl=o.enum("PackageUpgradeError",{UnableToFetchPackage:o.struct("UnableToFetchPackage",{packageId:q}),NotAPackage:o.struct("NotAPackage",{objectId:q}),IncompatibleUpgrade:null,DigestDoesNotMatch:o.struct("DigestDoesNotMatch",{digest:o.vector(o.u8())}),UnknownUpgradePolicy:o.struct("UnknownUpgradePolicy",{policy:o.u8()}),PackageIDDoesNotMatch:o.struct("PackageIDDoesNotMatch",{packageId:q,ticketId:q})}),gl=o.struct("ModuleId",{address:q,name:o.string()}),$s=o.struct("MoveLocation",{module:gl,function:o.u16(),instruction:o.u16(),functionName:o.option(o.string())}),pl=o.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:o.struct("IndexOutOfBounds",{idx:o.u16()}),SecondaryIndexOutOfBounds:o.struct("SecondaryIndexOutOfBounds",{resultIdx:o.u16(),secondaryIdx:o.u16()}),InvalidResultArity:o.struct("InvalidResultArity",{resultIdx:o.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),ml=o.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),bl=o.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:o.struct("MoveObjectTooBig",{objectSize:o.u64(),maxObjectSize:o.u64()}),MovePackageTooBig:o.struct("MovePackageTooBig",{objectSize:o.u64(),maxObjectSize:o.u64()}),CircularObjectOwnership:o.struct("CircularObjectOwnership",{object:q}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:o.option($s),MoveAbort:o.tuple([$s,o.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:o.struct("CommandArgumentError",{argIdx:o.u16(),kind:pl}),TypeArgumentError:o.struct("TypeArgumentError",{argumentIdx:o.u16(),kind:ml}),UnusedValueWithoutDrop:o.struct("UnusedValueWithoutDrop",{resultIdx:o.u16(),secondaryIdx:o.u16()}),InvalidPublicFunctionReturnType:o.struct("InvalidPublicFunctionReturnType",{idx:o.u16()}),InvalidTransferObject:null,EffectsTooLarge:o.struct("EffectsTooLarge",{currentSize:o.u64(),maxSize:o.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:o.struct("PackageUpgradeError",{upgradeError:hl}),WrittenObjectsTooLarge:o.struct("WrittenObjectsTooLarge",{currentSize:o.u64(),maxSize:o.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:o.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:o.vector(q)}),AddressDeniedForCoin:o.struct("AddressDeniedForCoin",{address:q,coinType:o.string()}),CoinTypeGlobalPause:o.struct("CoinTypeGlobalPause",{coinType:o.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),$o=o.enum("ExecutionStatus",{Success:null,Failed:o.struct("ExecutionFailed",{error:bl,command:o.option(o.u64())})}),Mo=o.struct("GasCostSummary",{computationCost:o.u64(),storageCost:o.u64(),storageRebate:o.u64(),nonRefundableStorageFee:o.u64()}),yl=o.struct("TransactionEffectsV1",{status:$o,executedEpoch:o.u64(),gasUsed:Mo,modifiedAtVersions:o.vector(o.tuple([q,o.u64()])),sharedObjects:o.vector(Ie),transactionDigest:xe,created:o.vector(o.tuple([Ie,Pt])),mutated:o.vector(o.tuple([Ie,Pt])),unwrapped:o.vector(o.tuple([Ie,Pt])),deleted:o.vector(Ie),unwrappedThenDeleted:o.vector(Ie),wrapped:o.vector(Ie),gasObject:o.tuple([Ie,Pt]),eventsDigest:o.option(xe),dependencies:o.vector(xe)}),as=o.tuple([o.u64(),xe]),wl=o.enum("ObjectIn",{NotExist:null,Exist:o.tuple([as,Pt])}),vl=o.enum("ObjectOut",{NotExist:null,ObjectWrite:o.tuple([xe,Pt]),PackageWrite:as}),Ol=o.enum("IDOperation",{None:null,Created:null,Deleted:null}),Sl=o.struct("EffectsObjectChange",{inputState:wl,outputState:vl,idOperation:Ol}),Il=o.enum("UnchangedSharedKind",{ReadOnlyRoot:as,MutateDeleted:o.u64(),ReadDeleted:o.u64(),Cancelled:o.u64(),PerEpochConfig:null}),jl=o.struct("TransactionEffectsV2",{status:$o,executedEpoch:o.u64(),gasUsed:Mo,transactionDigest:xe,gasObjectIndex:o.option(o.u32()),eventsDigest:o.option(xe),dependencies:o.vector(xe),lamportVersion:o.u64(),changedObjects:o.vector(o.tuple([q,Sl])),unchangedSharedObjects:o.vector(o.tuple([q,Il])),auxDataDigest:o.option(xe)}),kl=o.enum("TransactionEffects",{V1:yl,V2:jl});function Sn(t){switch(t){case"u8":return o.u8();case"u16":return o.u16();case"u32":return o.u32();case"u64":return o.u64();case"u128":return o.u128();case"u256":return o.u256();case"bool":return o.bool();case"string":return o.string();case"id":case"address":return q}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[n,r]=e.slice(1);return n==="vector"?o.vector(Sn(r)):o.option(Sn(r))}throw new Error(`Invalid Pure type name: ${t}`)}const B={...o,U8:o.u8(),U16:o.u16(),U32:o.u32(),U64:o.u64(),U128:o.u128(),U256:o.u256(),ULEB128:o.uleb128(),Bool:o.bool(),String:o.string(),Address:q,AppId:jo,Argument:Re,CallArg:fo,Command:go,CompressedSignature:Eo,GasData:wo,Intent:ko,IntentMessage:To,IntentScope:So,IntentVersion:Io,MultiSig:cl,MultiSigPkMap:Ao,MultiSigPublicKey:Co,ObjectArg:lo,ObjectDigest:xe,Owner:Pt,PasskeyAuthenticator:fl,ProgrammableMoveCall:ho,ProgrammableTransaction:po,PublicKey:_o,SenderSignedData:dl,SenderSignedTransaction:xo,SharedObjectRef:co,StructTag:yo,SuiObjectRef:Ie,TransactionData:Oo,TransactionDataV1:vo,TransactionEffects:kl,TransactionExpiration:bo,TransactionKind:mo,TypeTag:os};BigInt(1e9);const Tl="0x1",Uo="0x2";Tn("0x6");const El=`${Uo}::sui::SUI`;Tn("0x5");const _l="object",Al="ID",Cl="ascii",xl="String",$l="string",Ml="String",Ul="option",Pl="Option";function Rl(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&Y(e.package)===Y("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function Rr(t){if(typeof t=="string")switch(t){case"address":return B.Address;case"bool":return B.Bool;case"u8":return B.U8;case"u16":return B.U16;case"u32":return B.U32;case"u64":return B.U64;case"u128":return B.U128;case"u256":return B.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return B.vector(B.U8).transform({input:n=>typeof n=="string"?new TextEncoder().encode(n):n,output:n=>n});const e=Rr(t.vector);return e?B.vector(e):null}if("datatype"in t){const e=Y(t.datatype.package);if(e===Y(Tl)){if(t.datatype.module===Cl&&t.datatype.type===xl||t.datatype.module===$l&&t.datatype.type===Ml)return B.String;if(t.datatype.module===Ul&&t.datatype.type===Pl){const n=Rr(t.datatype.typeParameters[0]);return n?B.vector(n):null}}if(e===Y(Uo)&&t.datatype.module===_l&&t.datatype.type===Al)return B.Address}return null}function Dl(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:In(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:In(t.MutableReference)}:{ref:null,body:In(t)}}function In(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:In(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(In)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function Bl(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?F(t):t.toBase64()}}}const st={Pure:Bl,ObjectRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:n,objectId:Y(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:n}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:n,objectId:Y(t)}}}},ReceivingRef({objectId:t,digest:e,version:n}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:n,objectId:Y(t)}}}}};function qt(t){const e=Object.entries(t).map(([n,r])=>f({[n]:r}));return E(D(e),zt(n=>({...n,$kind:Object.keys(n)[0]})))}const un=E(S(),zt(t=>Y(t)),dt(uo)),pe=un,Gt=S(),de=E(D([S(),E(C(),$())]),dt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),It=f({objectId:un,version:de,digest:S()}),H=E(D([f({GasCoin:y(!0)}),f({Input:E(C(),$()),type:N(y("pure"))}),f({Input:E(C(),$()),type:N(y("object"))}),f({Result:E(C(),$())}),f({NestedResult:_n([E(C(),$()),E(C(),$())])})]),zt(t=>({...t,$kind:Object.keys(t)[0]}))),Nl=f({budget:T(de),price:T(de),owner:T(un),payment:T(m(It))}),Dr=D([y("address"),y("bool"),y("u8"),y("u16"),y("u32"),y("u64"),y("u128"),y("u256"),f({vector:at(()=>Dr)}),f({datatype:f({package:S(),module:S(),type:S(),typeParameters:m(at(()=>Dr))})}),f({typeParameter:E(C(),$())})]),Vl=f({ref:T(D([y("&"),y("&mut")])),body:Dr}),Gl=f({package:pe,module:S(),function:S(),typeArguments:m(S()),arguments:m(H),_argumentTypes:N(T(m(Vl)))}),Ll=f({name:S(),inputs:ut(S(),D([H,m(H)])),data:ut(S(),be())}),zl=qt({MoveCall:Gl,TransferObjects:f({objects:m(H),address:H}),SplitCoins:f({coin:H,amounts:m(H)}),MergeCoins:f({destination:H,sources:m(H)}),Publish:f({modules:m(Gt),dependencies:m(pe)}),MakeMoveVec:f({type:T(S()),elements:m(H)}),Upgrade:f({modules:m(Gt),dependencies:m(pe),package:pe,ticket:H}),$Intent:Ll}),Po=qt({ImmOrOwnedObject:It,SharedObject:f({objectId:pe,initialSharedVersion:de,mutable:Ft()}),Receiving:It}),Fl=qt({Object:Po,Pure:f({bytes:Gt}),UnresolvedPure:f({value:be()}),UnresolvedObject:f({objectId:pe,version:N(T(de)),digest:N(T(S())),initialSharedVersion:N(T(de))})}),Ms=qt({Object:Po,Pure:f({bytes:Gt})}),Ro=qt({None:y(!0),Epoch:de}),zn=f({version:y(2),sender:$e(un),expiration:$e(Ro),gasData:Nl,inputs:m(Fl),commands:m(zl)}),Tt={MoveCall(t){const[e,n="",r=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:n,function:r,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(n=>x(H,n)),address:x(H,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:x(H,t),amounts:e.map(n=>x(H,n))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:x(H,t),sources:e.map(n=>x(H,n))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(n=>typeof n=="string"?n:F(new Uint8Array(n))),dependencies:e.map(n=>Tn(n))}}},Upgrade({modules:t,dependencies:e,package:n,ticket:r}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:F(new Uint8Array(s))),dependencies:e.map(s=>Tn(s)),package:n,ticket:x(H,r)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(n=>x(H,n))}}},Intent({name:t,inputs:e={},data:n={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([r,s])=>[r,Array.isArray(s)?s.map(i=>x(H,i)):x(H,s)])),data:n}}}},Br=f({digest:S(),objectId:S(),version:D([E(C(),$()),S(),En()])}),Wl=qt({ImmOrOwned:Br,Shared:f({objectId:pe,initialSharedVersion:de,mutable:Ft()}),Receiving:Br}),Us=qt({Object:Wl,Pure:m(E(C(),$()))}),Do=D([f({kind:y("Input"),index:E(C(),$()),value:be(),type:N(y("object"))}),f({kind:y("Input"),index:E(C(),$()),value:be(),type:y("pure")})]),ql=D([f({Epoch:E(C(),$())}),f({None:T(y(!0))})]),Ps=E(D([C(),S(),En()]),dt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),us=D([f({bool:T(y(!0))}),f({u8:T(y(!0))}),f({u64:T(y(!0))}),f({u128:T(y(!0))}),f({address:T(y(!0))}),f({signer:T(y(!0))}),f({vector:at(()=>us)}),f({struct:at(()=>Kl)}),f({u16:T(y(!0))}),f({u32:T(y(!0))}),f({u256:T(y(!0))})]),Kl=f({address:S(),module:S(),name:S(),typeParams:m(us)}),Xl=f({budget:N(Ps),price:N(Ps),payment:N(m(Br)),owner:N(S())}),Hl=[Do,f({kind:y("GasCoin")}),f({kind:y("Result"),index:E(C(),$())}),f({kind:y("NestedResult"),index:E(C(),$()),resultIndex:E(C(),$())})],lt=D([...Hl]),Jl=f({kind:y("MoveCall"),target:E(S(),dt(t=>t.split("::").length===3)),typeArguments:m(S()),arguments:m(lt)}),Ql=f({kind:y("TransferObjects"),objects:m(lt),address:lt}),Yl=f({kind:y("SplitCoins"),coin:lt,amounts:m(lt)}),Zl=f({kind:y("MergeCoins"),destination:lt,sources:m(lt)}),ed=f({kind:y("MakeMoveVec"),type:D([f({Some:us}),f({None:T(y(!0))})]),objects:m(lt)}),td=f({kind:y("Publish"),modules:m(m(E(C(),$()))),dependencies:m(S())}),nd=f({kind:y("Upgrade"),modules:m(m(E(C(),$()))),dependencies:m(S()),packageId:S(),ticket:lt}),rd=[Jl,Ql,Yl,Zl,td,nd,ed],sd=D([...rd]);f({version:y(1),sender:N(S()),expiration:$e(ql),gasConfig:Xl,inputs:m(Do),transactions:m(sd)});function Rs(t){var n;const e=t.inputs.map((r,s)=>{if(r.Object)return{kind:"Input",index:s,value:{Object:r.Object.ImmOrOwnedObject?{ImmOrOwned:r.Object.ImmOrOwnedObject}:r.Object.Receiving?{Receiving:{digest:r.Object.Receiving.digest,version:r.Object.Receiving.version,objectId:r.Object.Receiving.objectId}}:{Shared:{mutable:r.Object.SharedObject.mutable,initialSharedVersion:r.Object.SharedObject.initialSharedVersion,objectId:r.Object.SharedObject.objectId}}},type:"object"};if(r.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(Z(r.Pure.bytes))},type:"pure"};if(r.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:r.UnresolvedPure.value};if(r.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:r.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((n=t.expiration)==null?void 0:n.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(r=>{if(r.MakeMoveVec)return{kind:"MakeMoveVec",type:r.MakeMoveVec.type===null?{None:!0}:{Some:Ne.parseFromStr(r.MakeMoveVec.type)},objects:r.MakeMoveVec.elements.map(s=>Xe(s,e))};if(r.MergeCoins)return{kind:"MergeCoins",destination:Xe(r.MergeCoins.destination,e),sources:r.MergeCoins.sources.map(s=>Xe(s,e))};if(r.MoveCall)return{kind:"MoveCall",target:`${r.MoveCall.package}::${r.MoveCall.module}::${r.MoveCall.function}`,typeArguments:r.MoveCall.typeArguments,arguments:r.MoveCall.arguments.map(s=>Xe(s,e))};if(r.Publish)return{kind:"Publish",modules:r.Publish.modules.map(s=>Array.from(Z(s))),dependencies:r.Publish.dependencies};if(r.SplitCoins)return{kind:"SplitCoins",coin:Xe(r.SplitCoins.coin,e),amounts:r.SplitCoins.amounts.map(s=>Xe(s,e))};if(r.TransferObjects)return{kind:"TransferObjects",objects:r.TransferObjects.objects.map(s=>Xe(s,e)),address:Xe(r.TransferObjects.address,e)};if(r.Upgrade)return{kind:"Upgrade",modules:r.Upgrade.modules.map(s=>Array.from(Z(s))),dependencies:r.Upgrade.dependencies,packageId:r.Upgrade.package,ticket:Xe(r.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(r)}`)})}}function Xe(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function id(t){var e,n,r;return x(zn,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((n=t.gasConfig.price)==null?void 0:n.toString())??null,payment:((r=t.gasConfig.payment)==null?void 0:r.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(nn(Us,s.value)){const i=x(Us,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:F(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?Ne.tagToString(s.type.Some):null,elements:s.objects.map(i=>He(i))}};case"MergeCoins":return{MergeCoins:{destination:He(s.destination),sources:s.sources.map(i=>He(i))}};case"MoveCall":{const[i,a,u]=s.target.split("::");return{MoveCall:{package:i,module:a,function:u,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>He(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>F(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:He(s.coin),amounts:s.amounts.map(i=>He(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>He(i)),address:He(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>F(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:He(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function He(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function Cn(t){return D(Object.entries(t).map(([e,n])=>f({[e]:n})))}const Ee=Cn({GasCoin:y(!0),Input:E(C(),$()),Result:E(C(),$()),NestedResult:_n([E(C(),$()),E(C(),$())])}),od=f({budget:T(de),price:T(de),owner:T(un),payment:T(m(It))}),ad=f({package:pe,module:S(),function:S(),typeArguments:m(S()),arguments:m(Ee)}),ud=f({name:S(),inputs:ut(S(),D([Ee,m(Ee)])),data:ut(S(),be())}),cd=Cn({MoveCall:ad,TransferObjects:f({objects:m(Ee),address:Ee}),SplitCoins:f({coin:Ee,amounts:m(Ee)}),MergeCoins:f({destination:Ee,sources:m(Ee)}),Publish:f({modules:m(Gt),dependencies:m(pe)}),MakeMoveVec:f({type:T(S()),elements:m(Ee)}),Upgrade:f({modules:m(Gt),dependencies:m(pe),package:pe,ticket:Ee}),$Intent:ud}),ld=Cn({ImmOrOwnedObject:It,SharedObject:f({objectId:pe,initialSharedVersion:de,mutable:Ft()}),Receiving:It}),dd=Cn({Object:ld,Pure:f({bytes:Gt}),UnresolvedPure:f({value:be()}),UnresolvedObject:f({objectId:pe,version:N(T(de)),digest:N(T(S())),initialSharedVersion:N(T(de))})}),fd=Cn({None:y(!0),Epoch:de}),hd=f({version:y(2),sender:$e(un),expiration:$e(fd),gasData:od,inputs:m(dd),commands:m(cd)}),gd=50,pd=1000n,md=5e10;async function bd(t,e,n){return await Sd(t,e),await Od(t,e),e.onlyTransactionKind||(await yd(t,e),await wd(t,e),await vd(t,e)),await Id(t),await n()}async function yd(t,e){t.gasConfig.price||(t.gasConfig.price=String(await xn(e).getReferenceGasPrice()))}async function wd(t,e){if(t.gasConfig.budget)return;const n=await xn(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(md),payment:[]}}})});if(n.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${n.effects.status.error}`,{cause:n});const r=pd*BigInt(t.gasConfig.price||1n),s=BigInt(n.effects.gasUsed.computationCost)+r,i=s+BigInt(n.effects.gasUsed.storageCost)-BigInt(n.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function vd(t,e){if(!t.gasConfig.payment){const r=(await xn(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:El})).data.filter(s=>!t.inputs.find(a=>{var u;return(u=a.Object)!=null&&u.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!r.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=r.map(s=>x(It,s))}}async function Od(t,e){const n=t.inputs.filter(l=>{var g;return l.UnresolvedObject&&!(l.UnresolvedObject.version||(g=l.UnresolvedObject)!=null&&g.initialSharedVersion)}),r=[...new Set(n.map(l=>Tn(l.UnresolvedObject.objectId)))],s=r.length?ii(r,gd):[],i=(await Promise.all(s.map(l=>xn(e).multiGetObjects({ids:l,options:{showOwner:!0}})))).flat(),a=new Map(r.map((l,g)=>[l,i[g]])),u=Array.from(a).filter(([l,g])=>g.error).map(([l,g])=>JSON.stringify(g.error));if(u.length)throw new Error(`The following input objects are invalid: ${u.join(", ")}`);const c=i.map(l=>{if(l.error||!l.data)throw new Error(`Failed to fetch object: ${l.error}`);const g=l.data.owner,j=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:null;return{objectId:l.data.objectId,digest:l.data.digest,version:l.data.version,initialSharedVersion:j}}),h=new Map(r.map((l,g)=>[l,c[g]]));for(const[l,g]of t.inputs.entries()){if(!g.UnresolvedObject)continue;let j;const O=Y(g.UnresolvedObject.objectId),b=h.get(O);g.UnresolvedObject.initialSharedVersion??(b==null?void 0:b.initialSharedVersion)?j=st.SharedObjectRef({objectId:O,initialSharedVersion:g.UnresolvedObject.initialSharedVersion||(b==null?void 0:b.initialSharedVersion),mutable:jd(t,l)}):kd(t,l)&&(j=st.ReceivingRef({objectId:O,digest:g.UnresolvedObject.digest??(b==null?void 0:b.digest),version:g.UnresolvedObject.version??(b==null?void 0:b.version)})),t.inputs[t.inputs.indexOf(g)]=j??st.ObjectRef({objectId:O,digest:g.UnresolvedObject.digest??(b==null?void 0:b.digest),version:g.UnresolvedObject.version??(b==null?void 0:b.version)})}}async function Sd(t,e){const{inputs:n,commands:r}=t,s=[],i=new Set;r.forEach(u=>{if(u.MoveCall){if(u.MoveCall._argumentTypes)return;if(u.MoveCall.arguments.map(l=>l.$kind==="Input"?t.inputs[l.Input]:null).some(l=>(l==null?void 0:l.UnresolvedPure)||(l==null?void 0:l.UnresolvedObject))){const l=`${u.MoveCall.package}::${u.MoveCall.module}::${u.MoveCall.function}`;i.add(l),s.push(u.MoveCall)}}switch(u.$kind){case"SplitCoins":u.SplitCoins.amounts.forEach(c=>{Ds(c,B.U64,t)});break;case"TransferObjects":Ds(u.TransferObjects.address,B.Address,t);break}});const a=new Map;if(i.size>0){const u=xn(e);await Promise.all([...i].map(async c=>{const[h,l,g]=c.split("::"),j=await u.getNormalizedMoveFunction({package:h,module:l,function:g});a.set(c,j.parameters.map(O=>Dl(O)))}))}s.length&&await Promise.all(s.map(async u=>{const c=a.get(`${u.package}::${u.module}::${u.function}`);if(!c)return;const l=c.length>0&&Rl(c.at(-1))?c.slice(0,c.length-1):c;u._argumentTypes=l})),r.forEach(u=>{if(!u.MoveCall)return;const c=u.MoveCall,h=`${c.package}::${c.module}::${c.function}`,l=c._argumentTypes;if(l){if(l.length!==u.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${h}`);l.forEach((g,j)=>{var k,V;const O=c.arguments[j];if(O.$kind!=="Input")return;const b=n[O.Input];if(!b.UnresolvedPure&&!b.UnresolvedObject)return;const U=((k=b.UnresolvedPure)==null?void 0:k.value)??((V=b.UnresolvedObject)==null?void 0:V.objectId),re=Rr(g.body);if(re){O.type="pure",n[n.indexOf(b)]=st.Pure(re.serialize(U));return}if(typeof U!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(U,null,2)}`);O.type="object";const fe=b.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:U}}:b;n[O.Input]=fe})}})}function Id(t){t.inputs.forEach((e,n)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${n} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function Ds(t,e,n){if(t.$kind!=="Input")return;const r=n.inputs[t.Input];r.$kind==="UnresolvedPure"&&(n.inputs[t.Input]=st.Pure(e.serialize(r.UnresolvedPure.value)))}function jd(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=s.MoveCall._argumentTypes[i].ref!=="&"||n}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(n=!0)}),n}function kd(t,e){let n=!1;return t.getInputUses(e,(r,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(r);n=Td(s.MoveCall._argumentTypes[i])||n}}),n}function Td(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function xn(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function Ed(t){function e(n){return t(n)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:n,value:r})=>s=>s.moveCall({typeArguments:[n],target:`0x1::option::${r===null?"none":"some"}`,arguments:r===null?[]:[s.object(r)]}),e}function _d(t){function e(n,r){if(typeof n=="string")return t(Sn(n).serialize(r));if(n instanceof Uint8Array||on(n))return t(n);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=n=>t(B.U8.serialize(n)),e.u16=n=>t(B.U16.serialize(n)),e.u32=n=>t(B.U32.serialize(n)),e.u64=n=>t(B.U64.serialize(n)),e.u128=n=>t(B.U128.serialize(n)),e.u256=n=>t(B.U256.serialize(n)),e.bool=n=>t(B.Bool.serialize(n)),e.string=n=>t(B.String.serialize(n)),e.address=n=>t(B.Address.serialize(n)),e.id=e.address,e.vector=(n,r)=>t(B.vector(Sn(n)).serialize(r)),e.option=(n,r)=>t(B.option(Sn(n)).serialize(r)),e}function Ad(t,e){const n=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),r=new Uint8Array(n.length+e.length);return r.set(n),r.set(e,n.length),ts(r,{dkLen:32})}function Bs(t){return Y(t).replace("0x","")}class ke{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const r=B.TransactionKind.parse(e).ProgrammableTransaction;if(!r)throw new Error("Unable to deserialize from bytes.");return ke.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:r.inputs,commands:r.commands})}static fromBytes(e){const n=B.TransactionData.parse(e),r=n==null?void 0:n.V1,s=r.kind.ProgrammableTransaction;if(!r||!s)throw new Error("Unable to deserialize from bytes.");return ke.restore({version:2,sender:r.sender,expiration:r.expiration,gasData:r.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new ke(x(zn,e)):new ke(x(zn,id(e)))}static getDigestFromBytes(e){const n=Ad("TransactionData",e);return sn(n)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:n,onlyTransactionKind:r}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(r)return B.TransactionKind.serialize(a,{maxSize:e}).toBytes();const u=(n==null?void 0:n.expiration)??this.expiration,c=(n==null?void 0:n.sender)??this.sender,h={...this.gasData,...n==null?void 0:n.gasConfig,...n==null?void 0:n.gasData};if(!c)throw new Error("Missing transaction sender");if(!h.budget)throw new Error("Missing gas budget");if(!h.payment)throw new Error("Missing gas payment");if(!h.price)throw new Error("Missing gas price");const l={sender:Bs(c),expiration:u||{None:!0},gasData:{payment:h.payment,owner:Bs(this.gasData.owner??c),price:BigInt(h.price),budget:BigInt(h.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return B.TransactionData.serialize({V1:l},{maxSize:e}).toBytes()}addInput(e,n){const r=this.inputs.length;return this.inputs.push(n),{Input:r,type:e,$kind:"Input"}}getInputUses(e,n){this.mapArguments((r,s)=>(r.$kind==="Input"&&r.Input===e&&n(r,s),r))}mapCommandArguments(e,n){const r=this.commands[e];switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(i=>n(i,r,e));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(i=>n(i,r,e)),r.TransferObjects.address=n(r.TransferObjects.address,r,e);break;case"SplitCoins":r.SplitCoins.coin=n(r.SplitCoins.coin,r,e),r.SplitCoins.amounts=r.SplitCoins.amounts.map(i=>n(i,r,e));break;case"MergeCoins":r.MergeCoins.destination=n(r.MergeCoins.destination,r,e),r.MergeCoins.sources=r.MergeCoins.sources.map(i=>n(i,r,e));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(i=>n(i,r,e));break;case"Upgrade":r.Upgrade.ticket=n(r.Upgrade.ticket,r,e);break;case"$Intent":const s=r.$Intent.inputs;r.$Intent.inputs={};for(const[i,a]of Object.entries(s))r.$Intent.inputs[i]=Array.isArray(a)?a.map(u=>n(u,r,e)):n(a,r,e);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}mapArguments(e){for(const n of this.commands.keys())this.mapCommandArguments(n,e)}replaceCommand(e,n,r=e){if(!Array.isArray(n)){this.commands[e]=n;return}const s=n.length-1;this.commands.splice(e,1,...n),s!==0&&this.mapArguments((i,a,u)=>{if(u<e+n.length)return i;switch(i.$kind){case"Result":i.Result===e&&(i.Result=r),i.Result>e&&(i.Result+=s);break;case"NestedResult":i.NestedResult[0]===e&&(i.NestedResult[0]=r),i.NestedResult[0]>e&&(i.NestedResult[0]+=s);break}return i})}getDigest(){const e=this.build({onlyTransactionKind:!1});return ke.getDigestFromBytes(e)}snapshot(){return x(zn,this)}shallowClone(){return new ke({version:this.version,sender:this.sender,expiration:this.expiration,gasData:{...this.gasData},inputs:[...this.inputs],commands:[...this.commands]})}}function Ns(t){if(typeof t=="string")return Y(t);if(t.Object)return t.Object.ImmOrOwnedObject?Y(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?Y(t.Object.Receiving.objectId):Y(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return Y(t.UnresolvedObject.objectId)}var Bo=t=>{throw TypeError(t)},cs=(t,e,n)=>e.has(t)||Bo("Cannot "+n),v=(t,e,n)=>(cs(t,e,"read from private field"),n?n.call(t):e.get(t)),Ue=(t,e,n)=>e.has(t)?Bo("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Q=(t,e,n,r)=>(cs(t,e,"write to private field"),e.set(t,n),n),oe=(t,e,n)=>(cs(t,e,"access private method"),n),Rt,Bt,tt,ze,Fe,ot,Ve,wt,A,te,No,Fn,Wn,qn,sr,Nr,ls,Vo,Go;function br(t,e=1/0){const n={$kind:"Result",Result:t},r=[],s=i=>r[i]??(r[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(n,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,a){if(a in i)return Reflect.get(i,a);if(a===Symbol.iterator)return function*(){let c=0;for(;c<e;)yield s(c),c++};if(typeof a=="symbol")return;const u=parseInt(a,10);if(!(Number.isNaN(u)||u<0))return s(u)}})}const Lo=Symbol.for("@mysten/transaction");function Cd(t){return!!t&&typeof t=="object"&&t[Lo]===!0}const Vs={buildPlugins:new Map,serializationPlugins:new Map},yr=Symbol.for("@mysten/transaction/registry");function fn(){try{const t=globalThis;return t[yr]||(t[yr]=Vs),t[yr]}catch{return Vs}}const zo=class Vr{constructor(){Ue(this,te),Ue(this,Rt),Ue(this,Bt),Ue(this,tt,new Map),Ue(this,ze,[]),Ue(this,Fe,[]),Ue(this,ot,new Set),Ue(this,Ve,new Set),Ue(this,wt,new Map),Ue(this,A),this.object=Ed(n=>{var i,a;if(typeof n=="function")return this.object(this.add(n));if(typeof n=="object"&&nn(H,n))return n;const r=Ns(n),s=v(this,A).inputs.find(u=>r===Ns(u));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof n=="object"&&((a=n.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||n.Object.SharedObject.mutable),s?{$kind:"Input",Input:v(this,A).inputs.indexOf(s),type:"object"}:oe(this,te,Wn).call(this,"object",typeof n=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:Y(n)}}:n)});const e=fn();Q(this,A,new ke),Q(this,Bt,[...e.buildPlugins.values()]),Q(this,Rt,[...e.serializationPlugins.values()])}static fromKind(e){const n=new Vr;return Q(n,A,ke.fromKindBytes(typeof e=="string"?Z(e):e)),Q(n,ze,v(n,A).inputs),Q(n,Fe,v(n,A).commands),n}static from(e){const n=new Vr;return Cd(e)?Q(n,A,new ke(e.getData())):typeof e!="string"||!e.startsWith("{")?Q(n,A,ke.fromBytes(typeof e=="string"?Z(e):e)):Q(n,A,ke.restore(JSON.parse(e))),Q(n,ze,v(n,A).inputs),Q(n,Fe,v(n,A).commands),n}static registerGlobalSerializationPlugin(e,n){fn().serializationPlugins.set(e,n??e)}static unregisterGlobalSerializationPlugin(e){fn().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,n){fn().buildPlugins.set(e,n??e)}static unregisterGlobalBuildPlugin(e){fn().buildPlugins.delete(e)}addSerializationPlugin(e){v(this,Rt).push(e)}addBuildPlugin(e){v(this,Bt).push(e)}addIntentResolver(e,n){if(v(this,tt).has(e)&&v(this,tt).get(e)!==n)throw new Error(`Intent resolver for ${e} already exists`);v(this,tt).set(e,n)}setSender(e){v(this,A).sender=e}setSenderIfNotSet(e){v(this,A).sender||(v(this,A).sender=e)}setExpiration(e){v(this,A).expiration=e?x(Ro,e):null}setGasPrice(e){v(this,A).gasConfig.price=String(e)}setGasBudget(e){v(this,A).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){v(this,A).gasData.budget==null&&(v(this,A).gasConfig.budget=String(e))}setGasOwner(e){v(this,A).gasConfig.owner=e}setGasPayment(e){v(this,A).gasConfig.payment=e.map(n=>x(It,n))}get blockData(){return Rs(v(this,A).snapshot())}getData(){return v(this,A).snapshot()}get[Lo](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:_d(e=>on(e)?oe(this,te,Wn).call(this,"pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):oe(this,te,Wn).call(this,"pure",nn(Ms,e)?x(Ms,e):e instanceof Uint8Array?st.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(st.ObjectRef(...e))}receivingRef(...e){return this.object(st.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(st.SharedObjectRef(...e))}add(e){if(typeof e=="function"){if(v(this,wt).has(e))return v(this,wt).get(e);const n=oe(this,te,No).call(this),r=e(n);if(!(r&&typeof r=="object"&&"then"in r))return Q(this,ot,v(n,ot)),v(this,wt).set(e,r),r;const s=oe(this,te,Fn).call(this,{$kind:"$Intent",$Intent:{name:"AsyncTransactionThunk",inputs:{},data:{result:null}}});v(this,Ve).add(Promise.resolve(r).then(a=>{s.$Intent.data.result=a}));const i=br(v(this,A).commands.length-1);return v(this,wt).set(e,i),i}else oe(this,te,Fn).call(this,e);return br(v(this,A).commands.length-1)}splitCoins(e,n){const r=Tt.SplitCoins(typeof e=="string"?this.object(e):oe(this,te,sr).call(this,e),n.map(s=>typeof s=="number"||typeof s=="bigint"||typeof s=="string"?this.pure.u64(s):oe(this,te,qn).call(this,s)));return oe(this,te,Fn).call(this,r),br(v(this,A).commands.length-1,n.length)}mergeCoins(e,n){return this.add(Tt.MergeCoins(this.object(e),n.map(r=>this.object(r))))}publish({modules:e,dependencies:n}){return this.add(Tt.Publish({modules:e,dependencies:n}))}upgrade({modules:e,dependencies:n,package:r,ticket:s}){return this.add(Tt.Upgrade({modules:e,dependencies:n,package:r,ticket:this.object(s)}))}moveCall({arguments:e,...n}){return this.add(Tt.MoveCall({...n,arguments:e==null?void 0:e.map(r=>oe(this,te,qn).call(this,r))}))}transferObjects(e,n){return this.add(Tt.TransferObjects(e.map(r=>this.object(r)),typeof n=="string"?this.pure.address(n):oe(this,te,qn).call(this,n)))}makeMoveVec({type:e,elements:n}){return this.add(Tt.MakeMoveVec({type:e,elements:n.map(r=>this.object(r))}))}serialize(){return JSON.stringify(Rs(v(this,A).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(x(hd,v(this,A).snapshot()),(n,r)=>typeof r=="bigint"?r.toString():r,2)}async sign(e){const{signer:n,...r}=e,s=await this.build(r);return n.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await oe(this,te,Nr).call(this,e),v(this,A).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await oe(this,te,Nr).call(this,e),v(this,A).getDigest()}async prepareForSerialization(e){var s;await oe(this,te,Vo).call(this),oe(this,te,Go).call(this);const n=new Set;for(const i of v(this,A).commands)i.$Intent&&n.add(i.$Intent.name);const r=[...v(this,Rt)];for(const i of n)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!v(this,tt).has(i))throw new Error(`Missing intent resolver for ${i}`);r.push(v(this,tt).get(i))}await oe(this,te,ls).call(this,r,e)}};Rt=new WeakMap;Bt=new WeakMap;tt=new WeakMap;ze=new WeakMap;Fe=new WeakMap;ot=new WeakMap;Ve=new WeakMap;wt=new WeakMap;A=new WeakMap;te=new WeakSet;No=function(){const t=new zo;return Q(t,A,v(this,A)),Q(t,Rt,v(this,Rt)),Q(t,Bt,v(this,Bt)),Q(t,tt,v(this,tt)),Q(t,Ve,v(this,Ve)),Q(t,ot,new Set(v(this,ot))),Q(t,wt,v(this,wt)),v(this,ze).push(v(t,ze)),v(this,Fe).push(v(t,Fe)),t};Fn=function(t){const e=v(this,A).commands.length;return v(this,Fe).push(t),v(this,ot).add(e),v(this,A).commands.push(t),v(this,A).mapCommandArguments(e,n=>{if(n.$kind==="Result"&&!v(this,ot).has(n.Result))throw new Error(`Result { Result: ${n.Result} } is not available to use the current transaction`);if(n.$kind==="NestedResult"&&!v(this,ot).has(n.NestedResult[0]))throw new Error(`Result { NestedResult: [${n.NestedResult[0]}, ${n.NestedResult[1]}] } is not available to use the current transaction`);if(n.$kind==="Input"&&n.Input>=v(this,A).inputs.length)throw new Error(`Input { Input: ${n.Input} } references an input that does not exist in the current transaction`);return n}),t};Wn=function(t,e){return v(this,ze).push(e),v(this,A).addInput(t,e)};qn=function(t){return on(t)?this.pure(t):oe(this,te,sr).call(this,t)};sr=function(t){if(typeof t=="function"){const e=this.add(t);return typeof e=="function"?oe(this,te,sr).call(this,e):x(H,e)}return x(H,t)};Nr=async function(t){if(!t.onlyTransactionKind&&!v(this,A).sender)throw new Error("Missing transaction sender");await oe(this,te,ls).call(this,[...v(this,Bt),bd],t)};ls=async function(t,e){const n=r=>{if(r>=t.length)return()=>{};const s=t[r];return async()=>{const i=n(r+1);let a=!1,u=!1;if(await s(v(this,A),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${r}`);a=!0,await i(),u=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${r}`);if(!u)throw new Error(`next() was not awaited in TransactionPlugin ${r}`)}};await n(0)(),Q(this,ze,v(this,A).inputs),Q(this,Fe,v(this,A).commands)};Vo=async function(){for(;v(this,Ve).size>0;){const t=Promise.all(v(this,Ve));v(this,Ve).clear(),v(this,Ve).add(t),await t,v(this,Ve).delete(t)}};Go=function(){const t=v(this,A).commands,e=v(this,A).inputs,n=v(this,Fe).flat(1/0),r=v(this,ze).flat(1/0);if(n.length!==t.length)throw new Error("Unexpected number of commands found in transaction data");if(r.length!==e.length)throw new Error("Unexpected number of inputs found in transaction data");const s=n.filter(a=>{var u;return((u=a.$Intent)==null?void 0:u.name)!=="AsyncTransactionThunk"});v(this,A).commands=s,v(this,A).inputs=r,Q(this,Fe,s),Q(this,ze,r);function i(a){var h;const u=t[a];if(((h=u.$Intent)==null?void 0:h.name)==="AsyncTransactionThunk"){const l=u.$Intent.data.result;if(l==null)throw new Error("AsyncTransactionThunk has not been resolved");return i(l.Result)}const c=s.indexOf(u);if(c===-1)throw new Error("Unable to find original index for command");return c}v(this,A).mapArguments(a=>{if(a.$kind==="Input"){const u=r.indexOf(e[a.Input]);if(u===-1)throw new Error("Input has not been resolved");return{...a,Input:u}}else if(a.$kind==="Result"){const u=i(a.Result);return{...a,Result:u}}else if(a.$kind==="NestedResult"){const u=i(a.NestedResult[0]);return{...a,NestedResult:[u,a.NestedResult[1]]}}return a})};let xd=zo;async function $d(t,e){if(t.features["sui:signTransaction"])return t.features["sui:signTransaction"].signTransaction(e);if(!t.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${t.name}) does not support the signTransaction feature.`);const{signTransactionBlock:n}=t.features["sui:signTransactionBlock"],r=xd.from(await e.transaction.toJSON()),{transactionBlockBytes:s,signature:i}=await n({transactionBlock:r,account:e.account,chain:e.chain});return{bytes:s,signature:i}}const Md="Slush",Fo=5*10**8,Ct=class Ct{constructor(){cn(this,"state",{wallet:null,accounts:null,isConnected:!1,suiClient:null});cn(this,"listeners",[]);this.state.wallet=null,this.state.suiClient=new Xc({url:oa("testnet")})}getSuiWallet(){const e=Zc().get();console.log({availableWallets:e}),this.state.wallet=e.find(n=>n.name===Md)||null}static getInstance(){return Ct.instance||(Ct.instance=new Ct),Ct.instance}getClient(){return this.state.suiClient}getState(){return{...this.state}}setState(e){this.state={...this.state,...e},this.notifyListeners()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(n=>n!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.state))}setAccounts(e){this.setState({accounts:e,isConnected:!!e})}};cn(Ct,"instance");let Gr=Ct;const Lt=Gr.getInstance();setTimeout(()=>{Lt.getSuiWallet()},500);async function Ud(){const{wallet:t}=Lt.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:connect"])throw Error(`Provided wallet (${t.name}) does not support the connect feature.`);const n=(await t.features["standard:connect"].connect()).accounts.filter(r=>r.chains.some(s=>s.split(":")[0]==="sui"));return Lt.setAccounts(n),qo(n[0].address),n}async function Pd(){const{wallet:t}=Lt.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:disconnect"])throw Error(`Provided wallet (${t.name}) does not support the disconnect feature.`);await t.features["standard:disconnect"].disconnect(),Lt.setAccounts(null),qo("")}async function Rd(){const t=new so;t.setGasBudget(Fo);const e=t.splitCoins(t.gas,[10**3]);t.transferObjects([e],"0x0b3fc768f8bb3c772321e3e7781cac4a45585b4bc64043686beb634d65341798"),await Dd(t)}async function Dd(t){const e=Lt.getClient();if(!e)throw Error("fail to initlize suiClient");const{wallet:n,accounts:r}=Lt.getState();if(!n||!r)throw Error("No Connected wallet account");t.setGasBudget(Fo);const{bytes:s,signature:i}=await $d(n,{transaction:{async toJSON(){return await t.toJSON({supportedIntents:[],client:e})}},account:r[0],chain:"sui:testnet"}),a=await e.executeTransactionBlock({transactionBlock:s,signature:i});console.log({result:a})}let vt;const Bd=t=>vt=t,Wo=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Wo.decode();let Pn=null;function Kn(){return(Pn===null||Pn.byteLength===0)&&(Pn=new Uint8Array(vt.memory.buffer)),Pn}function Nd(t,e){return t=t>>>0,Wo.decode(Kn().subarray(t,t+e))}let Lr=0;const Xn=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},Vd=typeof Xn.encodeInto=="function"?function(t,e){return Xn.encodeInto(t,e)}:function(t,e){const n=Xn.encode(t);return e.set(n),{read:t.length,written:n.length}};function Gd(t,e,n){if(n===void 0){const u=Xn.encode(t),c=e(u.length,1)>>>0;return Kn().subarray(c,c+u.length).set(u),Lr=u.length,c}let r=t.length,s=e(r,1)>>>0;const i=Kn();let a=0;for(;a<r;a++){const u=t.charCodeAt(a);if(u>127)break;i[s+a]=u}if(a!==r){a!==0&&(t=t.slice(a)),s=n(s,r,r=a+t.length*3,1)>>>0;const u=Kn().subarray(s+a,s+r),c=Vd(t,u);a+=c.written,s=n(s,r,a,1)>>>0}return Lr=a,s}function qo(t){const e=Gd(t,vt.__wbindgen_malloc,vt.__wbindgen_realloc),n=Lr;vt.update_sui_address(e,n)}function Ld(){const t={};return t.wbg={},t.wbg.__wbg_log_242335a0403ba73a=function(e,n){console.log(Nd(e,n))},t.wbg.__wbg_requestConnect_23f392dbaea78b16=function(){Ud()},t.wbg.__wbg_requestDisconnect_5f9126d4b90cbbcd=function(){Pd()},t.wbg.__wbg_requestPaidTransaction_f555f8b073f9944b=function(){Rd()},t.wbg.__wbindgen_init_externref_table=function(){const e=vt.__wbindgen_export_0,n=e.grow(4);e.set(0,void 0),e.set(n+0,void 0),e.set(n+1,null),e.set(n+2,!0),e.set(n+3,!1)},t.wbg}async function zd(t){return vt!==void 0?vt:(typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/Autonomous-World/assets/autonomous-game_bg-DMiAKhGU.wasm",import.meta.url)),Ld())}const Rn=2,L=document.querySelector("#glcanvas");var p,hn=null,he,tn,Qe,d,R,wr,rn,Hn=[];function Fd(t){if(t==1){let e=function(i){var a=i.getExtension("OES_vertex_array_object");a?(i.createVertexArray=function(){return a.createVertexArrayOES()},i.deleteVertexArray=function(u){a.deleteVertexArrayOES(u)},i.bindVertexArray=function(u){a.bindVertexArrayOES(u)},i.isVertexArray=function(u){return a.isVertexArrayOES(u)}):alert("Unable to get OES_vertex_array_object extension")},n=function(i){var a=i.getExtension("ANGLE_instanced_arrays");a&&(i.vertexAttribDivisor=function(u,c){a.vertexAttribDivisorANGLE(u,c)},i.drawArraysInstanced=function(u,c,h,l){a.drawArraysInstancedANGLE(u,c,h,l)},i.drawElementsInstanced=function(u,c,h,l,g){a.drawElementsInstancedANGLE(u,c,h,l,g)})},r=function(i){var a=i.getExtension("EXT_disjoint_timer_query");a&&(i.createQuery=function(){return a.createQueryEXT()},i.beginQuery=function(u,c){return a.beginQueryEXT(u,c)},i.endQuery=function(u){return a.endQueryEXT(u)},i.deleteQuery=function(u){a.deleteQueryEXT(u)},i.getQueryObject=function(u,c){return a.getQueryObjectEXT(u,c)})},s=function(i){var a=i.getExtension("WEBGL_draw_buffers");a&&(i.drawBuffers=function(u){return a.drawBuffersWEBGL(u)})};p=L.getContext("webgl");try{p.getExtension("EXT_shader_texture_lod"),p.getExtension("OES_standard_derivatives")}catch(i){console.warn(i)}e(p),n(p),r(p),s(p),p.getExtension("WEBGL_depth_texture")==null&&alert("Cant initialize WEBGL_depth_texture extension")}else p=L.getContext("webgl2");p===null&&alert("Unable to initialize WebGL. Your browser or machine may not support it.")}L.focus(),L.requestPointerLock=L.requestPointerLock||L.mozRequestPointerLock||function(){},document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||function(){};function ue(t,e){t==!1&&alert(e)}function P(t,e,n){return new e(he.buffer,t,n)}function ne(t,e){let n=new Uint8Array(he.buffer,t);for(var r,s,i,a,u=0,c=u+e,h="";!(u>=c);){if(r=n[u++],!r)return h;if(!(r&128)){h+=String.fromCharCode(r);continue}if(s=n[u++]&63,(r&224)==192){h+=String.fromCharCode((r&31)<<6|s);continue}i=n[u++]&63,(r&240)==224?r=(r&15)<<12|s<<6|i:((r&248)!=240&&console.warn("Invalid UTF-8 leading byte 0x"+r.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),r=(r&7)<<18|s<<12|i<<6|n[u++]&63),r<65536?h+=String.fromCharCode(r):(a=r-65536,h+=String.fromCharCode(55296|a>>10,56320|a&1023))}return h}function vr(t,e,n,r){for(var s,i,a=n,u=n+r,c=0;c<t.length;++c)if(s=t.charCodeAt(c),s>=55296&&s<=57343&&(i=t.charCodeAt(++c),s=65536+((s&1023)<<10)|i&1023),s<=127){if(n>=u)break;e[n++]=s}else if(s<=2047){if(n+1>=u)break;e[n++]=192|s>>6,e[n++]=128|s&63}else if(s<=65535){if(n+2>=u)break;e[n++]=224|s>>12,e[n++]=128|s>>6&63,e[n++]=128|s&63}else{if(n+3>=u)break;s>=2097152&&console.warn("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),e[n++]=240|s>>18,e[n++]=128|s>>12&63,e[n++]=128|s>>6&63,e[n++]=128|s&63}return n-a}Qe={loaded_files:[],unique_id:0},d={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],timerQueries:[],contexts:{},programInfos:{},getNewId:function(t){for(var e=d.counter++,n=t.length;n<e;n++)t[n]=null;return e},validateGLObjectID:function(t,e,n,r){e!=0&&(t[e]===null?console.error(n+" called with an already deleted "+r+" ID "+e+"!"):t[e]||console.error(n+" called with an invalid "+r+" ID "+e+"!"))},getSource:function(t,e,n,r){for(var s,i="",a=0;a<e;++a)s=r==0?void 0:P(r+a*4,Uint32Array,1)[0],i+=ne(P(n+a*4,Uint32Array,1)[0],s);return i},populateUniformTable:function(t){d.validateGLObjectID(d.programs,t,"populateUniformTable","program");for(var e,n,r,s,i,a,u=d.programs[t],c=d.programInfos[t]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},h=c.uniforms,l=p.getProgramParameter(u,35718),g=0;g<l;++g)if(s=p.getActiveUniform(u,g),e=s.name,c.maxUniformLength=Math.max(c.maxUniformLength,e.length+1),e.slice(-1)=="]"&&(e=e.slice(0,e.lastIndexOf("["))),n=p.getUniformLocation(u,e),n)for(r=d.getNewId(d.uniforms),h[e]=[s.size,r],d.uniforms[r]=n,i=1;i<s.size;++i)a=e+"["+i+"]",n=p.getUniformLocation(u,a),r=d.getNewId(d.uniforms),d.uniforms[r]=n}};function Xt(t,e,n,r,s){for(var i,a,u=0;u<t;u++)i=p[n](),a=i&&d.getNewId(r),i?(i.name=a,r[a]=i):(console.error("GL_INVALID_OPERATION"),d.recordError(1282),alert("GL_INVALID_OPERATION in "+s+": GLctx."+n+" returned null - most likely GL context is lost!")),P(e+u*4,Int32Array,1)[0]=a}function Wd(t,e,n){if(!e){console.error("GL_INVALID_VALUE in glGet"+n+"v(name="+t+": Function called with null out pointer!"),d.recordError(1281);return}var r,s,i,a=void 0;switch(t){case 36346:a=1;break;case 36344:return;case 34814:case 36345:a=0;break;case 34466:s=p.getParameter(34467),a=s?s.length:0;break;case 33309:ue(!1,"unimplemented");break;case 33307:case 33308:ue(!1,"unimplemented");break}if(a===void 0)switch(r=p.getParameter(t),typeof r){case"number":a=r;break;case"boolean":a=r?1:0;break;case"string":d.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v("+t+") on a name which returns a string!");return;case"object":if(r===null)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{a=0;break}default:{d.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v("+t+") and it returns null!");return}}else if(r instanceof Float32Array||r instanceof Uint32Array||r instanceof Int32Array||r instanceof Array){for(i=0;i<r.length;++i)ue(!1,"unimplemented");return}else try{a=r.name|0}catch(u){d.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v: Unknown object returned from WebGL getParameter("+t+")! (error: "+u+")");return}break;default:d.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+n+"v: Native code calling glGet"+n+"v("+t+") and it returns "+r+" of type "+typeof r+"!");return}switch(n){case"EM_FUNC_SIG_PARAM_I64":P(e,Int32Array,1)[0]=a;case"EM_FUNC_SIG_PARAM_I":P(e,Int32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_F":P(e,Float32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_B":P(e,Int8Array,1)[0]=a?1:0;break;default:throw"internal glGet error, bad type: "+n}}function Or(t,e){var n=ir(),r=t.clientWidth*n,s=t.clientHeight*n;(t.width!=r||t.height!=s)&&(t.width=r,t.height=s,e!=null&&e(Math.floor(r),Math.floor(s)))}function zr(){R.frame(),window.blocking_event_loop||(tn&&window.cancelAnimationFrame(tn),tn=window.requestAnimationFrame(zr))}const qd=10,Kd=11,Xd=12,Hd=13,Gs=1,Ls=2,zs=4;function Fs(t){switch(t){case 0:return 0;case 1:return 2;case 2:return 1;default:return t}}function Sr(t){switch(t){case"Space":return 32;case"Quote":return 222;case"Comma":return 44;case"Minus":return 45;case"Period":return 46;case"Slash":return 189;case"Digit0":return 48;case"Digit1":return 49;case"Digit2":return 50;case"Digit3":return 51;case"Digit4":return 52;case"Digit5":return 53;case"Digit6":return 54;case"Digit7":return 55;case"Digit8":return 56;case"Digit9":return 57;case"Semicolon":return 59;case"Equal":return 61;case"KeyA":return 65;case"KeyB":return 66;case"KeyC":return 67;case"KeyD":return 68;case"KeyE":return 69;case"KeyF":return 70;case"KeyG":return 71;case"KeyH":return 72;case"KeyI":return 73;case"KeyJ":return 74;case"KeyK":return 75;case"KeyL":return 76;case"KeyM":return 77;case"KeyN":return 78;case"KeyO":return 79;case"KeyP":return 80;case"KeyQ":return 81;case"KeyR":return 82;case"KeyS":return 83;case"KeyT":return 84;case"KeyU":return 85;case"KeyV":return 86;case"KeyW":return 87;case"KeyX":return 88;case"KeyY":return 89;case"KeyZ":return 90;case"BracketLeft":return 91;case"Backslash":return 92;case"BracketRight":return 93;case"Backquote":return 96;case"Escape":return 256;case"Enter":return 257;case"Tab":return 258;case"Backspace":return 259;case"Insert":return 260;case"Delete":return 261;case"ArrowRight":return 262;case"ArrowLeft":return 263;case"ArrowDown":return 264;case"ArrowUp":return 265;case"PageUp":return 266;case"PageDown":return 267;case"Home":return 268;case"End":return 269;case"CapsLock":return 280;case"ScrollLock":return 281;case"NumLock":return 282;case"PrintScreen":return 283;case"Pause":return 284;case"F1":return 290;case"F2":return 291;case"F3":return 292;case"F4":return 293;case"F5":return 294;case"F6":return 295;case"F7":return 296;case"F8":return 297;case"F9":return 298;case"F10":return 299;case"F11":return 300;case"F12":return 301;case"F13":return 302;case"F14":return 303;case"F15":return 304;case"F16":return 305;case"F17":return 306;case"F18":return 307;case"F19":return 308;case"F20":return 309;case"F21":return 310;case"F22":return 311;case"F23":return 312;case"F24":return 313;case"Numpad0":return 320;case"Numpad1":return 321;case"Numpad2":return 322;case"Numpad3":return 323;case"Numpad4":return 324;case"Numpad5":return 325;case"Numpad6":return 326;case"Numpad7":return 327;case"Numpad8":return 328;case"Numpad9":return 329;case"NumpadDecimal":return 330;case"NumpadDivide":return 331;case"NumpadMultiply":return 332;case"NumpadSubtract":return 333;case"NumpadAdd":return 334;case"NumpadEnter":return 335;case"NumpadEqual":return 336;case"ShiftLeft":return 340;case"ControlLeft":return 341;case"AltLeft":return 342;case"OSLeft":return 343;case"ShiftRight":return 344;case"ControlRight":return 345;case"AltRight":return 346;case"OSRight":return 347;case"ContextMenu":return 348}console.log("Unsupported keyboard key: ",t)}function ir(){return 1}function Ir(t,e,n){return t==p.ALPHA?e*n:t==p.RGB?e*n*3:t==p.RGBA?e*n*4:e*n*3}function Et(t,e){var n=L.getBoundingClientRect(),r=(t-n.left)*ir(),s=(e-n.top)*ir();return{x:r,y:s}}wr=!1,rn={env:{console_debug:function(t){console.debug(ne(t))},console_log:function(t){console.log(ne(t))},console_info:function(t){console.info(ne(t))},console_warn:function(t){console.warn(ne(t))},console_error:function(t){console.error(ne(t))},set_emscripten_shader_hack:function(t){wr=t},sapp_set_clipboard:function(t,e){hn=ne(t,e)},dpi_scale:ir,rand:function(){return Math.floor(Math.random()*2147483647)},now:function(){return Date.now()/1e3},canvas_width:function(){return Math.floor(L.width)},canvas_height:function(){return Math.floor(L.height)},glClearDepthf:function(t){p.clearDepth(t)},glClearColor:function(t,e,n,r){p.clearColor(t,e,n,r)},glClearStencil:function(t){p.clearStencil(t)},glColorMask:function(t,e,n,r){p.colorMask(t,e,n,r)},glScissor:function(t,e,n,r){p.scissor(t,e,n,r)},glClear:function(t){p.clear(t)},glGenTextures:function(t,e){Xt(t,e,"createTexture",d.textures,"glGenTextures")},glActiveTexture:function(t){p.activeTexture(t)},glBindTexture:function(t,e){d.validateGLObjectID(d.textures,e,"glBindTexture","texture"),p.bindTexture(t,d.textures[e])},glTexImage2D:function(t,e,n,r,s,i,a,u,c){p.texImage2D(t,e,n,r,s,i,a,u,c?P(c,Uint8Array,Ir(n,r,s)):null)},glTexSubImage2D:function(t,e,n,r,s,i,a,u,c){p.texSubImage2D(t,e,n,r,s,i,a,u,c?P(c,Uint8Array,Ir(a,s,i)):null)},glReadPixels:function(t,e,n,r,s,i,a){var u=P(a,Uint8Array,Ir(s,n,r));p.readPixels(t,e,n,r,s,i,u)},glTexParameteri:function(t,e,n){p.texParameteri(t,e,n)},glUniform1fv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform1fv","location"),ue((n&3)==0,"Pointer to float data passed to glUniform1fv must be aligned to four bytes!");var r=P(n,Float32Array,1*e);p.uniform1fv(d.uniforms[t],r)},glUniform2fv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform2fv","location"),ue((n&3)==0,"Pointer to float data passed to glUniform2fv must be aligned to four bytes!");var r=P(n,Float32Array,2*e);p.uniform2fv(d.uniforms[t],r)},glUniform3fv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform3fv","location"),ue((n&3)==0,"Pointer to float data passed to glUniform3fv must be aligned to four bytes!");var r=P(n,Float32Array,3*e);p.uniform3fv(d.uniforms[t],r)},glUniform4fv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform4fv","location"),ue((n&3)==0,"Pointer to float data passed to glUniform4fv must be aligned to four bytes!");var r=P(n,Float32Array,4*e);p.uniform4fv(d.uniforms[t],r)},glUniform1iv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform1fv","location"),ue((n&3)==0,"Pointer to i32 data passed to glUniform1iv must be aligned to four bytes!");var r=P(n,Int32Array,1*e);p.uniform1iv(d.uniforms[t],r)},glUniform2iv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform2fv","location"),ue((n&3)==0,"Pointer to i32 data passed to glUniform2iv must be aligned to four bytes!");var r=P(n,Int32Array,2*e);p.uniform2iv(d.uniforms[t],r)},glUniform3iv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform3fv","location"),ue((n&3)==0,"Pointer to i32 data passed to glUniform3iv must be aligned to four bytes!");var r=P(n,Int32Array,3*e);p.uniform3iv(d.uniforms[t],r)},glUniform4iv:function(t,e,n){d.validateGLObjectID(d.uniforms,t,"glUniform4fv","location"),ue((n&3)==0,"Pointer to i32 data passed to glUniform4iv must be aligned to four bytes!");var r=P(n,Int32Array,4*e);p.uniform4iv(d.uniforms[t],r)},glBlendFunc:function(t,e){p.blendFunc(t,e)},glBlendEquationSeparate:function(t,e){p.blendEquationSeparate(t,e)},glDisable:function(t){p.disable(t)},glDrawElements:function(t,e,n,r){p.drawElements(t,e,n,r)},glGetIntegerv:function(t,e){Wd(t,e,"EM_FUNC_SIG_PARAM_I")},glUniform1f:function(t,e){d.validateGLObjectID(d.uniforms,t,"glUniform1f","location"),p.uniform1f(d.uniforms[t],e)},glUniform1i:function(t,e){d.validateGLObjectID(d.uniforms,t,"glUniform1i","location"),p.uniform1i(d.uniforms[t],e)},glGetAttribLocation:function(t,e){return p.getAttribLocation(d.programs[t],ne(e))},glEnableVertexAttribArray:function(t){p.enableVertexAttribArray(t)},glDisableVertexAttribArray:function(t){p.disableVertexAttribArray(t)},glVertexAttribPointer:function(t,e,n,r,s,i){p.vertexAttribPointer(t,e,n,!!r,s,i)},glVertexAttribIPointer:function(t,e,n,r,s){p.vertexAttribIPointer(t,e,n,r,s)},glGetUniformLocation:function(t,e){d.validateGLObjectID(d.programs,t,"glGetUniformLocation","program"),e=ne(e);var n,r,s=0;return e[e.length-1]=="]"&&(n=e.lastIndexOf("["),s=e[n+1]!="]"?parseInt(e.slice(n+1)):0,e=e.slice(0,n)),r=d.programInfos[t]&&d.programInfos[t].uniforms[e],r&&s>=0&&s<r[0]?r[1]+s:-1},glUniformMatrix4fv:function(t,e,n,r){d.validateGLObjectID(d.uniforms,t,"glUniformMatrix4fv","location"),ue((r&3)==0,"Pointer to float data passed to glUniformMatrix4fv must be aligned to four bytes!");var s=P(r,Float32Array,16);p.uniformMatrix4fv(d.uniforms[t],!!n,s)},glUseProgram:function(t){d.validateGLObjectID(d.programs,t,"glUseProgram","program"),p.useProgram(d.programs[t])},glGenVertexArrays:function(t,e){Xt(t,e,"createVertexArray",d.vaos,"glGenVertexArrays")},glGenFramebuffers:function(t,e){Xt(t,e,"createFramebuffer",d.framebuffers,"glGenFramebuffers")},glGenRenderbuffers:function(t,e){Xt(t,e,"createRenderbuffer",d.renderbuffers,"glGenRenderbuffers")},glBindVertexArray:function(t){p.bindVertexArray(d.vaos[t])},glBindFramebuffer:function(t,e){d.validateGLObjectID(d.framebuffers,e,"glBindFramebuffer","framebuffer"),p.bindFramebuffer(t,d.framebuffers[e])},glBindRenderbuffer:function(t,e){d.validateGLObjectID(d.renderbuffers,e,"glBindRenderbuffer","renderbuffer"),p.bindRenderbuffer(t,d.renderbuffers[e])},glGenBuffers:function(t,e){Xt(t,e,"createBuffer",d.buffers,"glGenBuffers")},glBindBuffer:function(t,e){d.validateGLObjectID(d.buffers,e,"glBindBuffer","buffer"),p.bindBuffer(t,d.buffers[e])},glBufferData:function(t,e,n,r){p.bufferData(t,n?P(n,Uint8Array,e):e,r)},glBufferSubData:function(t,e,n,r){p.bufferSubData(t,e,r?P(r,Uint8Array,n):n)},glEnable:function(t){p.enable(t)},glFlush:function(){p.flush()},glFinish:function(){p.finish()},glDepthFunc:function(t){p.depthFunc(t)},glBlendFuncSeparate:function(t,e,n,r){p.blendFuncSeparate(t,e,n,r)},glViewport:function(t,e,n,r){p.viewport(t,e,n,r)},glDrawArrays:function(t,e,n){p.drawArrays(t,e,n)},glDrawBuffers:function(t,e){p.drawBuffers(P(e,Int32Array,t))},glCreateProgram:function(){var t=d.getNewId(d.programs),e=p.createProgram();return e.name=t,d.programs[t]=e,t},glAttachShader:function(t,e){d.validateGLObjectID(d.programs,t,"glAttachShader","program"),d.validateGLObjectID(d.shaders,e,"glAttachShader","shader"),p.attachShader(d.programs[t],d.shaders[e])},glDetachShader:function(t,e){d.validateGLObjectID(d.programs,t,"glDetachShader","program"),d.validateGLObjectID(d.shaders,e,"glDetachShader","shader"),p.detachShader(d.programs[t],d.shaders[e])},glLinkProgram:function(t){d.validateGLObjectID(d.programs,t,"glLinkProgram","program"),p.linkProgram(d.programs[t]),d.populateUniformTable(t)},glPixelStorei:function(t,e){p.pixelStorei(t,e)},glFramebufferTexture2D:function(t,e,n,r,s){d.validateGLObjectID(d.textures,r,"glFramebufferTexture2D","texture"),p.framebufferTexture2D(t,e,n,d.textures[r],s)},glGetProgramiv:function(t,e,n){if(ue(n),d.validateGLObjectID(d.programs,t,"glGetProgramiv","program"),t>=d.counter){console.error("GL_INVALID_VALUE in glGetProgramiv");return}var r,s=d.programInfos[t];if(!s){console.error("GL_INVALID_OPERATION in glGetProgramiv(program="+t+", pname="+e+", p=0x"+n.toString(16)+"): The specified GL object name does not refer to a program object!");return}if(e==35716)r=p.getProgramInfoLog(d.programs[t]),ue(r!==null),P(n,Int32Array,1)[0]=r.length+1;else if(e==35719){console.error("unsupported operation");return}else if(e==35722){console.error("unsupported operation");return}else if(e==35381){console.error("unsupported operation");return}else P(n,Int32Array,1)[0]=p.getProgramParameter(d.programs[t],e)},glCreateShader:function(t){var e=d.getNewId(d.shaders);return d.shaders[e]=p.createShader(t),e},glStencilFuncSeparate:function(t,e,n,r){p.stencilFuncSeparate(t,e,n,r)},glStencilMaskSeparate:function(t,e){p.stencilMaskSeparate(t,e)},glStencilOpSeparate:function(t,e,n,r){p.stencilOpSeparate(t,e,n,r)},glFrontFace:function(t){p.frontFace(t)},glCullFace:function(t){p.cullFace(t)},glCopyTexImage2D:function(t,e,n,r,s,i,a,u){p.copyTexImage2D(t,e,n,r,s,i,a,u)},glShaderSource:function(t,e,n,r){d.validateGLObjectID(d.shaders,t,"glShaderSource","shader");var s,i=d.getSource(t,e,n,r);wr&&(i=i.replace(/#extension GL_OES_standard_derivatives : enable/g,""),i=i.replace(/#extension GL_EXT_shader_texture_lod : enable/g,""),s="",i.indexOf("gl_FragColor")!=-1&&(s+=`out mediump vec4 GL_FragColor;
`,i=i.replace(/gl_FragColor/g,"GL_FragColor")),i.indexOf("attribute")!=-1?(i=i.replace(/attribute/g,"in"),i=i.replace(/varying/g,"out")):i=i.replace(/varying/g,"in"),i=i.replace(/textureCubeLodEXT/g,"textureCubeLod"),i=i.replace(/texture2DLodEXT/g,"texture2DLod"),i=i.replace(/texture2DProjLodEXT/g,"texture2DProjLod"),i=i.replace(/texture2DGradEXT/g,"texture2DGrad"),i=i.replace(/texture2DProjGradEXT/g,"texture2DProjGrad"),i=i.replace(/textureCubeGradEXT/g,"textureCubeGrad"),i=i.replace(/textureCube/g,"texture"),i=i.replace(/texture1D/g,"texture"),i=i.replace(/texture2D/g,"texture"),i=i.replace(/texture3D/g,"texture"),i=i.replace(/#version 100/g,`#version 300 es
`+s)),p.shaderSource(d.shaders[t],i)},glGetProgramInfoLog:function(t,e,n,r){d.validateGLObjectID(d.programs,t,"glGetProgramInfoLog","program");var s,i=p.getProgramInfoLog(d.programs[t]);ue(i!==null);let a=P(r,Uint8Array,e);for(s=0;s<e;s++)a[s]=i.charCodeAt(s)},glGetString:function(t){var e=p.getParameter(t).toString(),n=e.length+1,r=R.allocate_vec_u8(n),s=new Uint8Array(he.buffer,r,n);return s[e.length]=0,vr(e,s,0,n),r},glCompileShader:function(t){d.validateGLObjectID(d.shaders,t,"glCompileShader","shader"),p.compileShader(d.shaders[t])},glGetShaderiv:function(t,e,n){if(ue(n),d.validateGLObjectID(d.shaders,t,"glGetShaderiv","shader"),e==35716){var r,s,i=p.getShaderInfoLog(d.shaders[t]);ue(i!==null),P(n,Int32Array,1)[0]=i.length+1}else e==35720?(r=p.getShaderSource(d.shaders[t]),s=r===null||r.length==0?0:r.length+1,P(n,Int32Array,1)[0]=s):P(n,Int32Array,1)[0]=p.getShaderParameter(d.shaders[t],e)},glGetShaderInfoLog:function(t,e,n,r){d.validateGLObjectID(d.shaders,t,"glGetShaderInfoLog","shader");var s,i=p.getShaderInfoLog(d.shaders[t]);ue(i!==null);let a=P(r,Uint8Array,e);for(s=0;s<e;s++)a[s]=i.charCodeAt(s)},glVertexAttribDivisor:function(t,e){p.vertexAttribDivisor(t,e)},glDrawArraysInstanced:function(t,e,n,r){p.drawArraysInstanced(t,e,n,r)},glDrawElementsInstanced:function(t,e,n,r,s){p.drawElementsInstanced(t,e,n,r,s)},glDeleteShader:function(t){var e=d.shaders[t];e!=null&&(p.deleteShader(e),d.shaders[t]=null)},glDeleteProgram:function(t){var e=d.programs[t];e!=null&&(p.deleteProgram(e),d.programs[t]=null)},glDeleteBuffers:function(t,e){for(var n,r,s=0;s<t;s++)r=P(e+s*4,Uint32Array,1)[0],n=d.buffers[r],n&&(p.deleteBuffer(n),n.name=0,d.buffers[r]=null)},glDeleteFramebuffers:function(t,e){for(var n,r,s=0;s<t;s++)r=P(e+s*4,Uint32Array,1)[0],n=d.framebuffers[r],n&&(p.deleteFramebuffer(n),n.name=0,d.framebuffers[r]=null)},glDeleteTextures:function(t,e){for(var n,r,s=0;s<t;s++)r=P(e+s*4,Uint32Array,1)[0],n=d.textures[r],n&&(p.deleteTexture(n),n.name=0,d.textures[r]=null)},glGenQueries:function(t,e){Xt(t,e,"createQuery",d.timerQueries,"glGenQueries")},glDeleteQueries:function(t){for(var e,n,r=0;r<t;r++)n=P(textures+r*4,Uint32Array,1)[0],e=d.timerQueries[n],e&&(p.deleteQuery(e),e.name=0,d.timerQueries[n]=null)},glBeginQuery:function(t,e){d.validateGLObjectID(d.timerQueries,e,"glBeginQuery","id"),p.beginQuery(t,d.timerQueries[e])},glEndQuery:function(t){p.endQuery(t)},glGetQueryObjectiv:function(t,e,n){d.validateGLObjectID(d.timerQueries,t,"glGetQueryObjectiv","id");let r=p.getQueryObject(d.timerQueries[t],e);P(n,Uint32Array,1)[0]=r},glGetQueryObjectui64v:function(t,e,n){d.validateGLObjectID(d.timerQueries,t,"glGetQueryObjectui64v","id");let r=p.getQueryObject(d.timerQueries[t],e),s=P(n,Uint32Array,2);s[0]=r,s[1]=(r-s[0])/4294967296},glGenerateMipmap:function(t){p.generateMipmap(t)},setup_canvas_size:function(t){window.high_dpi=t,Or(L)},run_animation_loop:function(t){L.onmousemove=function(r){var s=Et(r.clientX,r.clientY),i=s.x,a=s.y;R.mouse_move(Math.floor(i),Math.floor(a)),(r.movementX!=0||r.movementY!=0)&&R.raw_mouse_move(Math.floor(r.movementX),Math.floor(r.movementY))},L.onmousedown=function(r){var s=Et(r.clientX,r.clientY),i=s.x,a=s.y,u=Fs(r.button);R.mouse_down(i,a,u)},L.addEventListener("wheel",function(r){r.preventDefault(),R.mouse_wheel(-r.deltaX,-r.deltaY)}),L.onmouseup=function(r){var s=Et(r.clientX,r.clientY),i=s.x,a=s.y,u=Fs(r.button);R.mouse_up(i,a,u)},L.onkeydown=function(r){var s,i=Sr(r.code);switch(i){case 32:case 262:case 263:case 264:case 265:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 259:case 258:case 39:case 47:r.preventDefault();break}s=0,r.ctrlKey&&(s|=Ls),r.shiftKey&&(s|=Gs),r.altKey&&(s|=zs),R.key_down(i,s,r.repeat),(i==32||i==39||i==47)&&R.key_press(i)},L.onkeyup=function(r){var s=Sr(r.code),i=0;r.ctrlKey&&(i|=Ls),r.shiftKey&&(i|=Gs),r.altKey&&(i|=zs),R.key_up(s,i)},L.onkeypress=function(r){var s=Sr(r.code);(s==261||r.ctrlKey)==!1&&R.key_press(r.charCode)},L.addEventListener("touchstart",function(r){r.preventDefault();for(const s of r.changedTouches){let i=Et(s.clientX,s.clientY);R.touch(qd,s.identifier,i.x,i.y)}}),L.addEventListener("touchend",function(r){r.preventDefault();for(const s of r.changedTouches){let i=Et(s.clientX,s.clientY);R.touch(Xd,s.identifier,i.x,i.y)}}),L.addEventListener("touchcancel",function(r){r.preventDefault();for(const s of r.changedTouches){let i=Et(s.clientX,s.clientY);R.touch(Hd,s.identifier,i.x,i.y)}}),L.addEventListener("touchmove",function(r){r.preventDefault();for(const s of r.changedTouches){let i=Et(s.clientX,s.clientY);R.touch(Kd,s.identifier,i.x,i.y)}}),window.onresize=function(){Or(L,R.resize)},window.addEventListener("copy",function(){hn!=null&&(event.clipboardData.setData("text/plain",hn),event.preventDefault())}),window.addEventListener("cut",function(){hn!=null&&(event.clipboardData.setData("text/plain",hn),event.preventDefault())}),window.addEventListener("paste",function(r){r.stopPropagation(),r.preventDefault();var s,i,a,u=r.clipboardData||window.clipboardData,c=u.getData("Text");c!=null&&c.length!=0&&(s=new TextEncoder().encode(c).length,i=R.allocate_vec_u8(s),a=new Uint8Array(he.buffer,i,s),vr(c,a,0,s),R.on_clipboard_paste(i,s))}),window.ondragover=function(r){r.preventDefault()},window.ondrop=async function(r){r.preventDefault(),R.on_files_dropped_start();for(let s of r.dataTransfer.files){const i=s.name.length,a=R.allocate_vec_u8(i),u=new Uint8Array(he.buffer,a,i);vr(s.name,u,0,i);const c=await s.arrayBuffer(),h=c.byteLength,l=R.allocate_vec_u8(h);new Uint8Array(he.buffer,l,h).set(new Uint8Array(c),0),R.on_file_dropped(a,i,l,h)}R.on_files_dropped_finish()};let e=document.hasFocus();var n=function(){let r=document.hasFocus();e==r&&(R.focus(r),e=r)};document.addEventListener("visibilitychange",n),window.addEventListener("focus",n),window.addEventListener("blur",n),window.blocking_event_loop=t,window.requestAnimationFrame(zr)},fs_load_file:function(t,e){var n,r=ne(t,e),s=Qe.unique_id;return Qe.unique_id+=1,n=new XMLHttpRequest,n.open("GET",r,!0),n.responseType="arraybuffer",n.onreadystatechange=function(){if(this.readyState===4)if(this.status===200){var i=new Uint8Array(this.response);Qe.loaded_files[s]=i,R.file_loaded(s)}else Qe.loaded_files[s]=null,R.file_loaded(s)},n.send(),s},fs_get_buffer_size:function(t){return Qe.loaded_files[t]==null?-1:Qe.loaded_files[t].length},fs_take_buffer:function(t,e,n){var r,s,i=Qe.loaded_files[t];for(console.assert(i.length<=n),s=new Uint8Array(he.buffer,e,n),r=0;r<i.length;r++)s[r]=i[r];delete Qe.loaded_files[t]},sapp_set_cursor_grab:function(t){t?L.requestPointerLock():document.exitPointerLock()},sapp_set_cursor:function(t,e){L.style.cursor=ne(t,e)},sapp_is_fullscreen:function(){let t=document.fullscreenElement;return t!=null&&t.id==L.id},sapp_set_fullscreen:function(t){t?L.requestFullscreen():document.exitFullscreen()},sapp_set_window_size:function(t,e){L.width=t,L.height=e,Or(L,R.resize)},sapp_schedule_update:function(){tn&&window.cancelAnimationFrame(tn),tn=window.requestAnimationFrame(zr)},init_webgl:Fd}};function Jd(t){if(t!=null)for(var e=0;e<t.length;e++)t[e].register_plugin!=null&&t[e].register_plugin!=null&&t[e].register_plugin(rn)}function Ws(t){if(t!=null)for(var e,n,r=0;r<t.length;r++)t[r].on_init!=null&&t[r].on_init!=null&&t[r].on_init(),t[r].name==null||t[r].name==null||t[r].version==null||t[r].version==null?(console.warn("Some of the registred plugins do not have name or version"),console.warn("Probably old version of the plugin used")):(e=t[r].name+"_crate_version",R[e]==null?console.log("Plugin "+t[r].name+" is present in JS bundle, but is not used in the rust code."):(n=R[e](),t[r].version!=n&&console.error("Plugin "+t[r].name+" version mismatchjs version: "+t[r].version+", crate version: "+n)))}function Jn(t){Hn.push(t)}function qs(t){var e=WebAssembly.Module.imports(t);for(const n in e)rn.env[e[n].name]==null&&(console.warn("No "+e[n].name+" function in gl.js"),rn.env[e[n].name]=function(){console.warn("Missed function: "+e[n].name)})}function Qd(t){var e=fetch(t);Jd(Hn),typeof WebAssembly.compileStreaming=="function"?WebAssembly.compileStreaming(e).then(n=>(qs(n),WebAssembly.instantiate(n,rn))).then(n=>{he=n.exports.memory,R=n.exports;var r=R.crate_version();Rn!=r&&console.error("Version mismatch: gl.js version is: "+Rn+", miniquad crate version is: "+r),Ws(Hn),n.exports.main()}).catch(n=>{console.error(n)}):e.then(function(n){return n.arrayBuffer()}).then(function(n){return WebAssembly.compile(n)}).then(function(n){return qs(n),WebAssembly.instantiate(n,rn)}).then(function(n){he=n.exports.memory,R=n.exports;var r=R.crate_version();Rn!=r&&console.error("Version mismatch: gl.js version is: "+Rn+", rust sapp-wasm crate version is: "+r),Ws(Hn),n.exports.main()}).catch(n=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(n)})}(function(){const t=window.AudioContext||window.webkitAudioContext;let e,n=new Map,r=[],s=1,i=1;function a(){if(e==null){e=new t,e.listener;{let V=window.AudioContext||window.webkitAudioContext,ae=new V;var k=function(){console.log("fix"),e.resume();var ye=ae.createBuffer(1,1,22050),G=ae.createBufferSource();G.buffer=ye,G.connect(ae.destination),G.start?G.start(0):G.play?G.play(0):G.noteOn&&G.noteOn(0),document.removeEventListener("touchstart",k),document.removeEventListener("touchend",k),document.removeEventListener("mousedown",k),document.removeEventListener("keydown",k)};document.addEventListener("touchstart",k),document.addEventListener("touchend",k),document.addEventListener("mousedown",k),document.addEventListener("keydown",k)}}}function u(k,V){let ae=he.buffer.slice(k,k+V),ye=s;return s+=1,e.decodeAudioData(ae,function(G){n.set(ye,G)},function(G){console.error("Failed to decode audio buffer",G)}),ye}function c(k){return n.has(k)&&n.get(k)!=null}function h(){let k=r.find(V=>V.sound_key===0);return k!=null?k.source=e.createBufferSource():(k={sound_key:0,playback_key:0,source:e.createBufferSource(),gain_node:e.createGain(),ended:null},r.push(k)),k}function l(k){try{k.source.removeEventListener("ended",k.ended),k.source.disconnect(),k.gain_node.disconnect(),k.sound_key=0,k.playback_key=0}catch(V){console.error("Error stopping sound",V)}}function g(k,V,ae){let ye=i++,G=h();G.sound_key=k,G.playback_key=ye,G.source.connect(G.gain_node),G.gain_node.connect(e.destination),G.gain_node.gain.value=V,G.source.loop=ae,G.ended=function(){l(G)},G.source.addEventListener("ended",G.ended);try{G.source.buffer=n.get(k),G.source.start(0)}catch(ft){console.error("Error starting sound",ft)}return ye}function j(k,V){r.forEach(ae=>{ae.sound_key===k&&(ae.gain_node.gain.value=V)})}function O(k){r.forEach(V=>{V.sound_key===k&&l(V)})}function b(k){O(k),n.delete(k)}function U(k){let V=r.find(ae=>ae.playback_key===k);V!=null&&l(V)}function re(k,V){let ae=r.find(ye=>ye.playback_key===k);ae!=null&&(ae.gain_node.gain.value=V)}function fe(k){k.env.audio_init=a,k.env.audio_add_buffer=u,k.env.audio_play_buffer=g,k.env.audio_source_is_loaded=c,k.env.audio_source_set_volume=j,k.env.audio_source_stop=O,k.env.audio_source_delete=b,k.env.audio_playback_stop=U,k.env.audio_playback_set_volume=re}Jn({register_plugin:fe,version:1,name:"macroquad_audio"})})(),function(){var t,e={};e[-1]=null,e[-2]=void 0,t=0;function n(i){i.env.js_create_string=function(a,u){var c=ne(a,u);return s(c)},i.env.js_create_buffer=function(a,u){var c=new Uint8Array(he.buffer,a,u),h=new Uint8Array(new ArrayBuffer(c.byteLength));return h.set(new Uint8Array(c)),s(h)},i.env.js_create_object=function(){var a={};return s(a)},i.env.js_set_field_f32=function(a,u,c,h){var l=ne(u,c);e[a][l]=h},i.env.js_set_field_u32=function(a,u,c,h){var l=ne(u,c);e[a][l]=h},i.env.js_set_field_string=function(a,u,c,h,l){var g=ne(u,c),j=ne(h,l);e[a][g]=j},i.env.js_unwrap_to_str=function(a,u,c){for(var h=e[a],l=r(h),g=l.length,j=new Uint8Array(he.buffer,u,c),O=0;O<g;O++)j[O]=l[O]},i.env.js_unwrap_to_buf=function(a,u,c){for(var h=e[a],l=h.length,g=new Uint8Array(he.buffer,u,c),j=0;j<l;j++)g[j]=h[j]},i.env.js_string_length=function(a){var u=e[a];return r(u).length},i.env.js_buf_length=function(a){var u=e[a];return u.length},i.env.js_free_object=function(a){delete e[a]},i.env.js_have_field=function(a,u,c){var h=ne(u,c);return e[a][h]!==void 0},i.env.js_field_f32=function(a,u,c){var h=ne(u,c);return e[a][h]},i.env.js_field_u32=function(a,u,c){var h=ne(u,c);return e[a][h]},i.env.js_field=function(a,u,c){var h=ne(u,c),l=e[a][h];return s(l)},i.env.js_field_num=function(a,u,c){var h=ne(u,c);return e[a][h]}}Jn({register_plugin:n,version:1,name:"sapp_jsutils"});function r(i){for(var a,u=[],c=0;c<i.length;c++)a=i.charCodeAt(c),a<128?u.push(a):a<2048?u.push(192|a>>6,128|a&63):a<55296||a>=57344?u.push(224|a>>12,128|a>>6&63,128|a&63):(c++,a=65536+((a&1023)<<10|i.charCodeAt(c)&1023),u.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63));return u}function s(i){if(i==null)return-2;if(i===null)return-1;var a=t;return e[a]=i,t+=1,a}}(),function(){function t(){}function e(O){O.env.ws_connect=c,O.env.ws_is_connected=u,O.env.ws_send=h,O.env.ws_try_recv=l,O.env.http_make_request=j,O.env.http_try_recv=g}Jn({register_plugin:e,on_init:t,version:1,name:"quad_net"});var n,r,s,i=0,a=[];function u(){return i}function c(O){r=new WebSocket(consume_js_object(O)),r.binaryType="arraybuffer",r.onopen=function(){i=1},r.onmessage=function(b){if(typeof b.data=="string")a.push({text:1,data:b.data});else{var U=new Uint8Array(b.data);a.push({text:0,data:U})}}}function h(O){var b=consume_js_object(O);b.buffer!=null?r.send(b.buffer):r.send(b)}function l(){return a.length!=0?js_object(a.shift()):-1}s=0,n={};function g(O){if(n[O]!=null&&n[O]!=null){var b=n[O];return n[O]=null,js_object(b)}return-1}function j(O,b,U,re){var fe,k,V,ae,ye,G=s;s+=1,O==0&&(k="POST"),O==1&&(k="PUT"),O==2&&(k="GET"),O==3&&(k="DELETE"),ae=consume_js_object(b),ye=consume_js_object(U),V=consume_js_object(re),fe=new XMLHttpRequest,fe.open(k,ae,!0),fe.responseType="arraybuffer";for(const ft in V)fe.setRequestHeader(ft,V[ft]);return fe.onload=function(){if(this.status==200){var ft=new Uint8Array(this.response);n[G]=ft}},fe.onerror=function(ft){console.error("Failed to make a request"),console.error(ft)},fe.send(ye),G}}();window.wasmInitialized=new Promise(async t=>{let e=await zd();Jn({register_plugin:n=>n.wbg=e,on_init:()=>{Bd(R),t()},version:"0.0.1",name:"wbg"}),Qd("./wasm/autonomous-game_bg.wasm")});window.Buffer=Buffer;async function Yd(){await window.wasmInitialized}Yd().catch(console.error);
