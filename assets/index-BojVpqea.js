var As=Object.defineProperty;var Cs=(t,e,r)=>e in t?As(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var lt=(t,e,r)=>Cs(t,typeof e!="symbol"?e+"":e,r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const Us="1.28.0",Ps="1.48.0",Ms={"-32700":"ParseError","-32701":"OversizedRequest","-32702":"OversizedResponse","-32600":"InvalidRequest","-32601":"MethodNotFound","-32602":"InvalidParams","-32603":"InternalError","-32604":"ServerBusy","-32000":"CallExecutionFailed","-32001":"UnknownError","-32003":"SubscriptionClosed","-32004":"SubscriptionClosedWithError","-32005":"BatchesNotSupported","-32006":"TooManySubscriptions","-32050":"TransientError","-32002":"TransactionExecutionClientError"};class vn extends Error{}class _n extends vn{constructor(e,r){super(e),this.code=r,this.type=Ms[r]??"ServerError"}}class Ds extends vn{constructor(e,r,n){super(e),this.status=r,this.statusText=n}}var Sn=t=>{throw TypeError(t)},Ur=(t,e,r)=>e.has(t)||Sn("Cannot "+r),$=(t,e,r)=>(Ur(t,e,"read from private field"),r?r.call(t):e.get(t)),Ne=(t,e,r)=>e.has(t)?Sn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),st=(t,e,r,n)=>(Ur(t,e,"write to private field"),e.set(t,r),r),En=(t,e,r)=>(Ur(t,e,"access private method"),r),Bs=(t,e,r,n)=>({set _(s){st(t,e,s)},get _(){return $(t,e,n)}}),Pe,yt,ke,We,kt,qe,Wt,On,kn;function $s(t){const e=new URL(t);return e.protocol=e.protocol.replace("http","ws"),e.toString()}const Ns={WebSocketConstructor:typeof WebSocket<"u"?WebSocket:void 0,callTimeout:3e4,reconnectTimeout:3e3,maxReconnects:5};class Ls{constructor(e,r={}){if(Ne(this,Wt),Ne(this,Pe,0),Ne(this,yt,0),Ne(this,ke,null),Ne(this,We,null),Ne(this,kt,new Set),Ne(this,qe,new Map),this.endpoint=e,this.options={...Ns,...r},!this.options.WebSocketConstructor)throw new Error("Missing WebSocket constructor");this.endpoint.startsWith("http")&&(this.endpoint=$s(this.endpoint))}async makeRequest(e,r,n){const s=await En(this,Wt,On).call(this);return new Promise((i,a)=>{st(this,Pe,$(this,Pe)+1),$(this,qe).set($(this,Pe),{resolve:i,reject:a,timeout:setTimeout(()=>{$(this,qe).delete($(this,Pe)),a(new Error(`Request timeout: ${e}`))},this.options.callTimeout)}),n==null||n.addEventListener("abort",()=>{$(this,qe).delete($(this,Pe)),a(n.reason)}),s.send(JSON.stringify({jsonrpc:"2.0",id:$(this,Pe),method:e,params:r}))}).then(({error:i,result:a})=>{if(i)throw new _n(i.message,i.code);return a})}async subscribe(e){const r=new Rs(e);return $(this,kt).add(r),await r.subscribe(this),()=>r.unsubscribe(this)}}Pe=new WeakMap;yt=new WeakMap;ke=new WeakMap;We=new WeakMap;kt=new WeakMap;qe=new WeakMap;Wt=new WeakSet;On=function(){return $(this,We)?$(this,We):(st(this,We,new Promise(t=>{var e;(e=$(this,ke))==null||e.close(),st(this,ke,new this.options.WebSocketConstructor(this.endpoint)),$(this,ke).addEventListener("open",()=>{st(this,yt,0),t($(this,ke))}),$(this,ke).addEventListener("close",()=>{Bs(this,yt)._++,$(this,yt)<=this.options.maxReconnects&&setTimeout(()=>{En(this,Wt,kn).call(this)},this.options.reconnectTimeout)}),$(this,ke).addEventListener("message",({data:r})=>{let n;try{n=JSON.parse(r)}catch(s){console.error(new Error(`Failed to parse RPC message: ${r}`,{cause:s}));return}if("id"in n&&n.id!=null&&$(this,qe).has(n.id)){const{resolve:s,timeout:i}=$(this,qe).get(n.id);clearTimeout(i),s(n)}else if("params"in n){const{params:s}=n;$(this,kt).forEach(i=>{i.subscriptionId===s.subscription&&s.subscription===i.subscriptionId&&i.onMessage(s.result)})}})})),$(this,We))};kn=async function(){var t;return(t=$(this,ke))==null||t.close(),st(this,We,null),Promise.allSettled([...$(this,kt)].map(e=>e.subscribe(this)))};class Rs{constructor(e){this.subscriptionId=null,this.subscribed=!1,this.input=e}onMessage(e){this.subscribed&&this.input.onMessage(e)}async unsubscribe(e){const{subscriptionId:r}=this;return this.subscribed=!1,r==null?!1:(this.subscriptionId=null,e.makeRequest(this.input.unsubscribe,[r]))}async subscribe(e){this.subscriptionId=null,this.subscribed=!0;const r=await e.makeRequest(this.input.method,this.input.params,this.input.signal);this.subscribed&&(this.subscriptionId=r)}}var In=t=>{throw TypeError(t)},Pr=(t,e,r)=>e.has(t)||In("Cannot "+r),oe=(t,e,r)=>(Pr(t,e,"read from private field"),r?r.call(t):e.get(t)),Ut=(t,e,r)=>e.has(t)?In("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),yr=(t,e,r,n)=>(Pr(t,e,"write to private field"),e.set(t,r),r),Vs=(t,e,r)=>(Pr(t,e,"access private method"),r),pt,de,wt,wr,xn;class Gs{constructor(e){Ut(this,wr),Ut(this,pt,0),Ut(this,de),Ut(this,wt),yr(this,de,e)}fetch(e,r){const n=oe(this,de).fetch??fetch;if(!n)throw new Error("The current environment does not support fetch, you can provide a fetch implementation in the options for SuiHTTPTransport.");return n(e,r)}async request(e){var s,i;yr(this,pt,oe(this,pt)+1);const r=await this.fetch(((s=oe(this,de).rpc)==null?void 0:s.url)??oe(this,de).url,{method:"POST",signal:e.signal,headers:{"Content-Type":"application/json","Client-Sdk-Type":"typescript","Client-Sdk-Version":Us,"Client-Target-Api-Version":Ps,"Client-Request-Method":e.method,...(i=oe(this,de).rpc)==null?void 0:i.headers},body:JSON.stringify({jsonrpc:"2.0",id:oe(this,pt),method:e.method,params:e.params})});if(!r.ok)throw new Ds(`Unexpected status code: ${r.status}`,r.status,r.statusText);const n=await r.json();if("error"in n&&n.error!=null)throw new _n(n.error.message,n.error.code);return n.result}async subscribe(e){const r=await Vs(this,wr,xn).call(this).subscribe(e);return e.signal&&(e.signal.throwIfAborted(),e.signal.addEventListener("abort",()=>{r()})),async()=>!!await r()}}pt=new WeakMap;de=new WeakMap;wt=new WeakMap;wr=new WeakSet;xn=function(){var t;if(!oe(this,wt)){const e=oe(this,de).WebSocketConstructor??WebSocket;if(!e)throw new Error("The current environment does not support WebSocket, you can provide a WebSocketConstructor in the options for SuiHTTPTransport.");yr(this,wt,new Ls(((t=oe(this,de).websocket)==null?void 0:t.url)??oe(this,de).url,{WebSocketConstructor:e,...oe(this,de).websocket}))}return oe(this,wt)};function Fs(t){switch(t){case"mainnet":return"https://fullnode.mainnet.sui.io:443";case"testnet":return"https://fullnode.testnet.sui.io:443";case"devnet":return"https://fullnode.devnet.sui.io:443";case"localnet":return"http://127.0.0.1:9000";default:throw new Error(`Unknown network: ${t}`)}}/*! scure-base - MIT License (c) 2022 Paul Miller (paulmillr.com) */function zs(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function Tn(t,e){return Array.isArray(e)?e.length===0?!0:t?e.every(r=>typeof r=="string"):e.every(r=>Number.isSafeInteger(r)):!1}function vr(t,e){if(typeof e!="string")throw new Error(`${t}: string expected`);return!0}function jn(t){if(!Number.isSafeInteger(t))throw new Error(`invalid integer: ${t}`)}function _r(t){if(!Array.isArray(t))throw new Error("array expected")}function An(t,e){if(!Tn(!0,e))throw new Error(`${t}: array of strings expected`)}function Ws(t,e){if(!Tn(!1,e))throw new Error(`${t}: array of numbers expected`)}function qs(...t){const e=i=>i,r=(i,a)=>o=>i(a(o)),n=t.map(i=>i.encode).reduceRight(r,e),s=t.map(i=>i.decode).reduce(r,e);return{encode:n,decode:s}}function Ks(t){const e=typeof t=="string"?t.split(""):t,r=e.length;An("alphabet",e);const n=new Map(e.map((s,i)=>[s,i]));return{encode:s=>(_r(s),s.map(i=>{if(!Number.isSafeInteger(i)||i<0||i>=r)throw new Error(`alphabet.encode: digit index outside alphabet "${i}". Allowed: ${t}`);return e[i]})),decode:s=>(_r(s),s.map(i=>{vr("alphabet.decode",i);const a=n.get(i);if(a===void 0)throw new Error(`Unknown letter: "${i}". Allowed: ${t}`);return a}))}}function Hs(t=""){return vr("join",t),{encode:e=>(An("join.decode",e),e.join(t)),decode:e=>(vr("join.decode",e),e.split(t))}}function Kr(t,e,r){if(e<2)throw new Error(`convertRadix: invalid from=${e}, base cannot be less than 2`);if(r<2)throw new Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(_r(t),!t.length)return[];let n=0;const s=[],i=Array.from(t,o=>{if(jn(o),o<0||o>=e)throw new Error(`invalid integer: ${o}`);return o}),a=i.length;for(;;){let o=0,c=!0;for(let f=n;f<a;f++){const d=i[f],g=e*o,v=g+d;if(!Number.isSafeInteger(v)||g/e!==o||v-d!==g)throw new Error("convertRadix: carry overflow");const b=v/r;o=v%r;const y=Math.floor(b);if(i[f]=y,!Number.isSafeInteger(y)||y*r+o!==v)throw new Error("convertRadix: carry overflow");if(c)y?c=!1:n=f;else continue}if(s.push(o),c)break}for(let o=0;o<t.length-1&&t[o]===0;o++)s.push(0);return s.reverse()}function Xs(t){jn(t);const e=2**8;return{encode:r=>{if(!zs(r))throw new Error("radix.encode input should be Uint8Array");return Kr(Array.from(r),e,t)},decode:r=>(Ws("radix.decode",r),Uint8Array.from(Kr(r,t,e)))}}const Qs=t=>qs(Xs(58),Ks(t),Hs("")),Cn=Qs("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),Zt=t=>Cn.encode(t),It=t=>Cn.decode(t);function ee(t){return Uint8Array.from(atob(t),e=>e.charCodeAt(0))}const sr=8192;function H(t){if(t.length<sr)return btoa(String.fromCharCode(...t));let e="";for(var r=0;r<t.length;r+=sr){const n=t.slice(r,r+sr);e+=String.fromCharCode(...n)}return btoa(e)}function Un(t){var s;const e=t.startsWith("0x")?t.slice(2):t,r=e.length%2===0?e:`0${e}`,n=((s=r.match(/[0-9a-fA-F]{2}/g))==null?void 0:s.map(i=>parseInt(i,16)))??[];if(n.length!==r.length/2)throw new Error(`Invalid hex string ${t}`);return Uint8Array.from(n)}function at(t){return t.reduce((e,r)=>e+r.toString(16).padStart(2,"0"),"")}function qt(t){let e=[],r=0;if(t===0)return[0];for(;t>0;)e[r]=t&127,(t>>=7)&&(e[r]|=128),r+=1;return e}function Js(t){let e=0,r=0,n=0;for(;;){let s=t[n];if(n+=1,e|=(s&127)<<r,(s&128)===0)break;r+=7}return{value:e,length:n}}class Ys{constructor(e){this.bytePosition=0,this.dataView=new DataView(e.buffer)}shift(e){return this.bytePosition+=e,this}read8(){let e=this.dataView.getUint8(this.bytePosition);return this.shift(1),e}read16(){let e=this.dataView.getUint16(this.bytePosition,!0);return this.shift(2),e}read32(){let e=this.dataView.getUint32(this.bytePosition,!0);return this.shift(4),e}read64(){let e=this.read32(),n=this.read32().toString(16)+e.toString(16).padStart(8,"0");return BigInt("0x"+n).toString(10)}read128(){let e=BigInt(this.read64()),n=BigInt(this.read64()).toString(16)+e.toString(16).padStart(16,"0");return BigInt("0x"+n).toString(10)}read256(){let e=BigInt(this.read128()),n=BigInt(this.read128()).toString(16)+e.toString(16).padStart(32,"0");return BigInt("0x"+n).toString(10)}readBytes(e){let r=this.bytePosition+this.dataView.byteOffset,n=new Uint8Array(this.dataView.buffer,r,e);return this.shift(e),n}readULEB(){let e=this.bytePosition+this.dataView.byteOffset,r=new Uint8Array(this.dataView.buffer,e),{value:n,length:s}=Js(r);return this.shift(s),n}readVec(e){let r=this.readULEB(),n=[];for(let s=0;s<r;s++)n.push(e(this,s,r));return n}}function Zs(t,e){switch(e){case"base58":return Zt(t);case"base64":return H(t);case"hex":return at(t);default:throw new Error("Unsupported encoding, supported values are: base64, hex")}}function Pn(t,e=["<",">"]){const[r,n]=e,s=[];let i="",a=0;for(let o=0;o<t.length;o++){const c=t[o];if(c===r&&a++,c===n&&a--,a===0&&c===","){s.push(i.trim()),i="";continue}i+=c}return s.push(i.trim()),s}class ei{constructor({initialSize:e=1024,maxSize:r=1/0,allocateSize:n=1024}={}){this.bytePosition=0,this.size=e,this.maxSize=r,this.allocateSize=n,this.dataView=new DataView(new ArrayBuffer(e))}ensureSizeOrGrow(e){const r=this.bytePosition+e;if(r>this.size){const n=Math.min(this.maxSize,this.size+this.allocateSize);if(r>n)throw new Error(`Attempting to serialize to BCS, but buffer does not have enough size. Allocated size: ${this.size}, Max size: ${this.maxSize}, Required size: ${r}`);this.size=n;const s=new ArrayBuffer(this.size);new Uint8Array(s).set(new Uint8Array(this.dataView.buffer)),this.dataView=new DataView(s)}}shift(e){return this.bytePosition+=e,this}write8(e){return this.ensureSizeOrGrow(1),this.dataView.setUint8(this.bytePosition,Number(e)),this.shift(1)}write16(e){return this.ensureSizeOrGrow(2),this.dataView.setUint16(this.bytePosition,Number(e),!0),this.shift(2)}write32(e){return this.ensureSizeOrGrow(4),this.dataView.setUint32(this.bytePosition,Number(e),!0),this.shift(4)}write64(e){return ir(BigInt(e),8).forEach(r=>this.write8(r)),this}write128(e){return ir(BigInt(e),16).forEach(r=>this.write8(r)),this}write256(e){return ir(BigInt(e),32).forEach(r=>this.write8(r)),this}writeULEB(e){return qt(e).forEach(r=>this.write8(r)),this}writeVec(e,r){return this.writeULEB(e.length),Array.from(e).forEach((n,s)=>r(this,n,s,e.length)),this}*[Symbol.iterator](){for(let e=0;e<this.bytePosition;e++)yield this.dataView.getUint8(e);return this.toBytes()}toBytes(){return new Uint8Array(this.dataView.buffer.slice(0,this.bytePosition))}toString(e){return Zs(this.toBytes(),e)}}function ir(t,e){let r=new Uint8Array(e),n=0;for(;t>0;)r[n]=Number(t%BigInt(256)),t=t/BigInt(256),n+=1;return r}var Mn=t=>{throw TypeError(t)},Dn=(t,e,r)=>e.has(t)||Mn("Cannot "+r),fe=(t,e,r)=>(Dn(t,e,"read from private field"),r?r.call(t):e.get(t)),Kt=(t,e,r)=>e.has(t)?Mn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ht=(t,e,r,n)=>(Dn(t,e,"write to private field"),e.set(t,r),r),et,mt,$t,Me;const ti=class Bn{constructor(e){Kt(this,et),Kt(this,mt),this.name=e.name,this.read=e.read,this.serializedSize=e.serializedSize??(()=>null),Ht(this,et,e.write),Ht(this,mt,e.serialize??((r,n)=>{const s=new ei({initialSize:this.serializedSize(r)??void 0,...n});return fe(this,et).call(this,r,s),s.toBytes()})),this.validate=e.validate??(()=>{})}write(e,r){this.validate(e),fe(this,et).call(this,e,r)}serialize(e,r){return this.validate(e),new ri(this,fe(this,mt).call(this,e,r))}parse(e){const r=new Ys(e);return this.read(r)}fromHex(e){return this.parse(Un(e))}fromBase58(e){return this.parse(It(e))}fromBase64(e){return this.parse(ee(e))}transform({name:e,input:r,output:n,validate:s}){return new Bn({name:e??this.name,read:i=>n?n(this.read(i)):this.read(i),write:(i,a)=>fe(this,et).call(this,r?r(i):i,a),serializedSize:i=>this.serializedSize(r?r(i):i),serialize:(i,a)=>fe(this,mt).call(this,r?r(i):i,a),validate:i=>{s==null||s(i),this.validate(r?r(i):i)}})}};et=new WeakMap;mt=new WeakMap;let ye=ti;const $n=Symbol.for("@mysten/serialized-bcs");function Mr(t){return!!t&&typeof t=="object"&&t[$n]===!0}class ri{constructor(e,r){Kt(this,$t),Kt(this,Me),Ht(this,$t,e),Ht(this,Me,r)}get[$n](){return!0}toBytes(){return fe(this,Me)}toHex(){return at(fe(this,Me))}toBase64(){return H(fe(this,Me))}toBase58(){return Zt(fe(this,Me))}parse(){return fe(this,$t).parse(fe(this,Me))}}$t=new WeakMap;Me=new WeakMap;function Xt({size:t,...e}){return new ye({...e,serializedSize:()=>t})}function ar({readMethod:t,writeMethod:e,...r}){return Xt({...r,read:n=>n[t](),write:(n,s)=>s[e](n),validate:n=>{var s;if(n<0||n>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${n}. Expected value in range 0-${r.maxValue}`);(s=r.validate)==null||s.call(r,n)}})}function or({readMethod:t,writeMethod:e,...r}){return Xt({...r,read:n=>n[t](),write:(n,s)=>s[e](BigInt(n)),validate:n=>{var i;const s=BigInt(n);if(s<0||s>r.maxValue)throw new TypeError(`Invalid ${r.name} value: ${s}. Expected value in range 0-${r.maxValue}`);(i=r.validate)==null||i.call(r,s)}})}function ni({serialize:t,...e}){const r=new ye({...e,serialize:t,write:(n,s)=>{for(const i of r.serialize(n).toBytes())s.write8(i)}});return r}function si({toBytes:t,fromBytes:e,...r}){return new ye({...r,read:n=>{const s=n.readULEB(),i=n.readBytes(s);return e(i)},write:(n,s)=>{const i=t(n);s.writeULEB(i.length);for(let a=0;a<i.length;a++)s.write8(i[a])},serialize:n=>{const s=t(n),i=qt(s.length),a=new Uint8Array(i.length+s.length);return a.set(i,0),a.set(s,i.length),a},validate:n=>{var s;if(typeof n!="string")throw new TypeError(`Invalid ${r.name} value: ${n}. Expected string`);(s=r.validate)==null||s.call(r,n)}})}function ii(t){let e=null;function r(){return e||(e=t()),e}return new ye({name:"lazy",read:n=>r().read(n),serializedSize:n=>r().serializedSize(n),write:(n,s)=>r().write(n,s),serialize:(n,s)=>r().serialize(n,s).toBytes()})}const u={u8(t){return ar({name:"u8",readMethod:"read8",writeMethod:"write8",size:1,maxValue:2**8-1,...t})},u16(t){return ar({name:"u16",readMethod:"read16",writeMethod:"write16",size:2,maxValue:2**16-1,...t})},u32(t){return ar({name:"u32",readMethod:"read32",writeMethod:"write32",size:4,maxValue:2**32-1,...t})},u64(t){return or({name:"u64",readMethod:"read64",writeMethod:"write64",size:8,maxValue:2n**64n-1n,...t})},u128(t){return or({name:"u128",readMethod:"read128",writeMethod:"write128",size:16,maxValue:2n**128n-1n,...t})},u256(t){return or({name:"u256",readMethod:"read256",writeMethod:"write256",size:32,maxValue:2n**256n-1n,...t})},bool(t){return Xt({name:"bool",size:1,read:e=>e.read8()===1,write:(e,r)=>r.write8(e?1:0),...t,validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),typeof e!="boolean")throw new TypeError(`Expected boolean, found ${typeof e}`)}})},uleb128(t){return ni({name:"uleb128",read:e=>e.readULEB(),serialize:e=>Uint8Array.from(qt(e)),...t})},bytes(t,e){return Xt({name:`bytes[${t}]`,size:t,read:r=>r.readBytes(t),write:(r,n)=>{const s=new Uint8Array(r);for(let i=0;i<t;i++)n.write8(s[i]??0)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t)throw new TypeError(`Expected array of length ${t}, found ${r.length}`)}})},byteVector(t){return new ye({name:"bytesVector",read:e=>{const r=e.readULEB();return e.readBytes(r)},write:(e,r)=>{const n=new Uint8Array(e);r.writeULEB(n.length);for(let s=0;s<n.length;s++)r.write8(n[s]??0)},...t,serializedSize:e=>{const r="length"in e?e.length:null;return r==null?null:qt(r).length+r},validate:e=>{var r;if((r=t==null?void 0:t.validate)==null||r.call(t,e),!e||typeof e!="object"||!("length"in e))throw new TypeError(`Expected array, found ${typeof e}`)}})},string(t){return si({name:"string",toBytes:e=>new TextEncoder().encode(e),fromBytes:e=>new TextDecoder().decode(e),...t})},fixedArray(t,e,r){return new ye({name:`${e.name}[${t}]`,read:n=>{const s=new Array(t);for(let i=0;i<t;i++)s[i]=e.read(n);return s},write:(n,s)=>{for(const i of n)e.write(i,s)},...r,validate:n=>{var s;if((s=r==null?void 0:r.validate)==null||s.call(r,n),!n||typeof n!="object"||!("length"in n))throw new TypeError(`Expected array, found ${typeof n}`);if(n.length!==t)throw new TypeError(`Expected array of length ${t}, found ${n.length}`)}})},option(t){return u.enum(`Option<${t.name}>`,{None:null,Some:t}).transform({input:e=>e==null?{None:!0}:{Some:e},output:e=>e.$kind==="Some"?e.Some:null})},vector(t,e){return new ye({name:`vector<${t.name}>`,read:r=>{const n=r.readULEB(),s=new Array(n);for(let i=0;i<n;i++)s[i]=t.read(r);return s},write:(r,n)=>{n.writeULEB(r.length);for(const s of r)t.write(s,n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!r||typeof r!="object"||!("length"in r))throw new TypeError(`Expected array, found ${typeof r}`)}})},tuple(t,e){return new ye({name:`(${t.map(r=>r.name).join(", ")})`,serializedSize:r=>{let n=0;for(let s=0;s<t.length;s++){const i=t[s].serializedSize(r[s]);if(i==null)return null;n+=i}return n},read:r=>{const n=[];for(const s of t)n.push(s.read(r));return n},write:(r,n)=>{for(let s=0;s<t.length;s++)t[s].write(r[s],n)},...e,validate:r=>{var n;if((n=e==null?void 0:e.validate)==null||n.call(e,r),!Array.isArray(r))throw new TypeError(`Expected array, found ${typeof r}`);if(r.length!==t.length)throw new TypeError(`Expected array of length ${t.length}, found ${r.length}`)}})},struct(t,e,r){const n=Object.entries(e);return new ye({name:t,serializedSize:s=>{let i=0;for(const[a,o]of n){const c=o.serializedSize(s[a]);if(c==null)return null;i+=c}return i},read:s=>{const i={};for(const[a,o]of n)i[a]=o.read(s);return i},write:(s,i)=>{for(const[a,o]of n)o.write(s[a],i)},...r,validate:s=>{var i;if((i=r==null?void 0:r.validate)==null||i.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`)}})},enum(t,e,r){const n=Object.entries(e);return new ye({name:t,read:s=>{const i=s.readULEB(),a=n[i];if(!a)throw new TypeError(`Unknown value ${i} for enum ${t}`);const[o,c]=a;return{[o]:(c==null?void 0:c.read(s))??!0,$kind:o}},write:(s,i)=>{const[a,o]=Object.entries(s).filter(([c])=>Object.hasOwn(e,c))[0];for(let c=0;c<n.length;c++){const[f,d]=n[c];if(f===a){i.writeULEB(c),d==null||d.write(o,i);return}}},...r,validate:s=>{var o;if((o=r==null?void 0:r.validate)==null||o.call(r,s),typeof s!="object"||s==null)throw new TypeError(`Expected object, found ${typeof s}`);const i=Object.keys(s).filter(c=>s[c]!==void 0&&Object.hasOwn(e,c));if(i.length!==1)throw new TypeError(`Expected object with one key, but found ${i.length} for type ${t}}`);const[a]=i;if(!Object.hasOwn(e,a))throw new TypeError(`Invalid enum variant ${a}`)}})},map(t,e){return u.vector(u.tuple([t,e])).transform({name:`Map<${t.name}, ${e.name}>`,input:r=>[...r.entries()],output:r=>{const n=new Map;for(const[s,i]of r)n.set(s,i);return n}})},lazy(t){return ii(t)}};var Nn=t=>{throw TypeError(t)},Ln=(t,e,r)=>e.has(t)||Nn("Cannot "+r),se=(t,e,r)=>(Ln(t,e,"read from private field"),e.get(t)),Hr=(t,e,r)=>e.has(t)?Nn("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Xr=(t,e,r,n)=>(Ln(t,e,"write to private field"),e.set(t,r),r),tt,ie;const ai=class Rn{constructor({prefix:e,cache:r}={}){Hr(this,tt),Hr(this,ie),Xr(this,tt,e??[]),Xr(this,ie,r??new Map)}read(e,r){const n=[se(this,tt),...e].join(":");if(se(this,ie).has(n))return se(this,ie).get(n);const s=r();return se(this,ie).set(n,s),typeof s=="object"&&s!==null&&"then"in s?Promise.resolve(s).then(i=>(se(this,ie).set(n,i),i)).catch(i=>{throw se(this,ie).delete(n),i}):s}clear(e){const r=[...se(this,tt),...e??[]].join(":");if(!r){se(this,ie).clear();return}for(const n of se(this,ie).keys())n.startsWith(r)&&se(this,ie).delete(n)}scope(e){return new Rn({prefix:[...se(this,tt),...Array.isArray(e)?e:[e]],cache:se(this,ie)})}};tt=new WeakMap;ie=new WeakMap;let oi=ai;class Vn{constructor({network:e}){this.cache=new oi,this.network=e}$extend(...e){return Object.create(this,Object.fromEntries(e.map(r=>{if("experimental_asClientExtension"in r){const{name:n,register:s}=r.experimental_asClientExtension();return[n,{value:s(this)}]}return[r.name,{value:r.register(this)}]})))}}const Gn=/^(?!.*(^(?!@)|[-.@])($|[-.@]))(?:[a-z0-9-]{0,63}(?:\.[a-z0-9-]{0,63})*)?@[a-z0-9-]{0,63}$/i,Fn=/^(?!.*(^|[-.])($|[-.]))(?:[a-z0-9-]{0,63}\.)+sui$/i,ui=235;function ci(t){return t.length>ui?!1:t.includes("@")?Gn.test(t):Fn.test(t)}function li(t,e="at"){const r=t.toLowerCase();let n;if(r.includes("@")){if(!Gn.test(r))throw new Error(`Invalid SuiNS name ${t}`);const[s,i]=r.split("@");n=[...s?s.split("."):[],i]}else{if(!Fn.test(r))throw new Error(`Invalid SuiNS name ${t}`);n=r.split(".").slice(0,-1)}return e==="dot"?`${n.join(".")}.sui`:`${n.slice(0,-1).join(".")}@${n[n.length-1]}`}const di=/^([a-z0-9]+(?:-[a-z0-9]+)*)$/,fi=/^\d+$/,hi=64,gi="/",pi=t=>{const e=t.split(gi);if(e.length<2||e.length>3)return!1;const[r,n,s]=e;return s!==void 0&&!fi.test(s)||!ci(r)?!1:di.test(n)&&n.length<hi},mi=32;function Qr(t){try{return It(t).length===mi}catch{return!1}}const er=32;function Ie(t){return yi(t)&&wi(t)===er}function Pt(t){return Ie(t)}function bi(t){return t.includes("::")?Dr(t):t}function Dr(t){const[e,r]=t.split("::"),n=pi(e),s=t.slice(e.length+r.length+4),i=s.includes("<")?s.slice(0,s.indexOf("<")):s,a=s.includes("<")?Pn(s.slice(s.indexOf("<")+1,s.lastIndexOf(">"))).map(o=>bi(o.trim())):[];return{address:n?e:P(e),module:r,name:i,typeParams:a}}function Qt(t){const{address:e,module:r,name:n,typeParams:s}=typeof t=="string"?Dr(t):t,i=(s==null?void 0:s.length)>0?`<${s.map(a=>typeof a=="string"?a:Qt(a)).join(",")}>`:"";return`${e}::${r}::${n}${i}`}function P(t,e=!1){let r=t.toLowerCase();return!e&&r.startsWith("0x")&&(r=r.slice(2)),`0x${r.padStart(er*2,"0")}`}function xe(t,e=!1){return P(t,e)}function yi(t){return/^(0x|0X)?[a-fA-F0-9]+$/.test(t)&&t.length%2===0}function wi(t){return/^(0x|0X)/.test(t)?(t.length-2)/2:t.length/2}const vi=/^vector<(.+)>$/,_i=/^([^:]+)::([^:]+)::([^<]+)(<(.+)>)?/;class he{static parseFromStr(e,r=!1){if(e==="address")return{address:null};if(e==="bool")return{bool:null};if(e==="u8")return{u8:null};if(e==="u16")return{u16:null};if(e==="u32")return{u32:null};if(e==="u64")return{u64:null};if(e==="u128")return{u128:null};if(e==="u256")return{u256:null};if(e==="signer")return{signer:null};const n=e.match(vi);if(n)return{vector:he.parseFromStr(n[1],r)};const s=e.match(_i);if(s)return{struct:{address:r?P(s[1]):s[1],module:s[2],name:s[3],typeParams:s[5]===void 0?[]:he.parseStructTypeArgs(s[5],r)}};throw new Error(`Encountered unexpected token when parsing type args for ${e}`)}static parseStructTypeArgs(e,r=!1){return Pn(e).map(n=>he.parseFromStr(n,r))}static tagToString(e){if("bool"in e)return"bool";if("u8"in e)return"u8";if("u16"in e)return"u16";if("u32"in e)return"u32";if("u64"in e)return"u64";if("u128"in e)return"u128";if("u256"in e)return"u256";if("address"in e)return"address";if("signer"in e)return"signer";if("vector"in e)return`vector<${he.tagToString(e.vector)}>`;if("struct"in e){const r=e.struct,n=r.typeParams.map(he.tagToString).join(", ");return`${r.address}::${r.module}::${r.name}${n?`<${n}>`:""}`}throw new Error("Invalid TypeTag")}}function Si(t){return u.u64({name:"unsafe_u64",...t}).transform({input:e=>e,output:e=>Number(e)})}function Ei(t){return u.enum("Option",{None:null,Some:t})}const B=u.bytes(er).transform({validate:t=>{const e=typeof t=="string"?t:at(t);if(!e||!Ie(P(e)))throw new Error(`Invalid Sui address ${e}`)},input:t=>typeof t=="string"?Un(P(t)):t,output:t=>P(at(t))}),pe=u.vector(u.u8()).transform({name:"ObjectDigest",input:t=>It(t),output:t=>Zt(new Uint8Array(t)),validate:t=>{if(It(t).length!==32)throw new Error("ObjectDigest must be 32 bytes")}}),ae=u.struct("SuiObjectRef",{objectId:B,version:u.u64(),digest:pe}),zn=u.struct("SharedObjectRef",{objectId:B,initialSharedVersion:u.u64(),mutable:u.bool()}),Wn=u.enum("ObjectArg",{ImmOrOwnedObject:ae,SharedObject:zn,Receiving:ae}),Ke=u.enum("Owner",{AddressOwner:B,ObjectOwner:B,Shared:u.struct("Shared",{initialSharedVersion:u.u64()}),Immutable:null,ConsensusV2:u.struct("ConsensusV2",{authenticator:u.enum("Authenticator",{SingleOwner:B}),startVersion:u.u64()})}),qn=u.enum("CallArg",{Pure:u.struct("Pure",{bytes:u.vector(u.u8()).transform({input:t=>typeof t=="string"?ee(t):t,output:t=>H(new Uint8Array(t))})}),Object:Wn}),Br=u.enum("TypeTag",{bool:null,u8:null,u64:null,u128:null,address:null,signer:null,vector:u.lazy(()=>Br),struct:u.lazy(()=>Yn),u16:null,u32:null,u256:null}),$r=Br.transform({input:t=>typeof t=="string"?he.parseFromStr(t,!0):t,output:t=>he.tagToString(t)}),be=u.enum("Argument",{GasCoin:null,Input:u.u16(),Result:u.u16(),NestedResult:u.tuple([u.u16(),u.u16()])}),Kn=u.struct("ProgrammableMoveCall",{package:B,module:u.string(),function:u.string(),typeArguments:u.vector($r),arguments:u.vector(be)}),Hn=u.enum("Command",{MoveCall:Kn,TransferObjects:u.struct("TransferObjects",{objects:u.vector(be),address:be}),SplitCoins:u.struct("SplitCoins",{coin:be,amounts:u.vector(be)}),MergeCoins:u.struct("MergeCoins",{destination:be,sources:u.vector(be)}),Publish:u.struct("Publish",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?ee(t):t,output:t=>H(new Uint8Array(t))})),dependencies:u.vector(B)}),MakeMoveVec:u.struct("MakeMoveVec",{type:Ei($r).transform({input:t=>t===null?{None:!0}:{Some:t},output:t=>t.Some??null}),elements:u.vector(be)}),Upgrade:u.struct("Upgrade",{modules:u.vector(u.vector(u.u8()).transform({input:t=>typeof t=="string"?ee(t):t,output:t=>H(new Uint8Array(t))})),dependencies:u.vector(B),package:B,ticket:be})}),Xn=u.struct("ProgrammableTransaction",{inputs:u.vector(qn),commands:u.vector(Hn)}),Qn=u.enum("TransactionKind",{ProgrammableTransaction:Xn,ChangeEpoch:null,Genesis:null,ConsensusCommitPrologue:null}),Jn=u.enum("TransactionExpiration",{None:null,Epoch:Si()}),Yn=u.struct("StructTag",{address:B,module:u.string(),name:u.string(),typeParams:u.vector(Br)}),Zn=u.struct("GasData",{payment:u.vector(ae),owner:B,price:u.u64(),budget:u.u64()}),es=u.struct("TransactionDataV1",{kind:Qn,sender:B,gasData:Zn,expiration:Jn}),ts=u.enum("TransactionData",{V1:es}),rs=u.enum("IntentScope",{TransactionData:null,TransactionEffects:null,CheckpointSummary:null,PersonalMessage:null}),ns=u.enum("IntentVersion",{V0:null}),ss=u.enum("AppId",{Sui:null}),is=u.struct("Intent",{scope:rs,version:ns,appId:ss});function as(t){return u.struct(`IntentMessage<${t.name}>`,{intent:is,value:t})}const os=u.enum("CompressedSignature",{ED25519:u.fixedArray(64,u.u8()),Secp256k1:u.fixedArray(64,u.u8()),Secp256r1:u.fixedArray(64,u.u8()),ZkLogin:u.vector(u.u8())}),us=u.enum("PublicKey",{ED25519:u.fixedArray(32,u.u8()),Secp256k1:u.fixedArray(33,u.u8()),Secp256r1:u.fixedArray(33,u.u8()),ZkLogin:u.vector(u.u8())}),cs=u.struct("MultiSigPkMap",{pubKey:us,weight:u.u8()}),ls=u.struct("MultiSigPublicKey",{pk_map:u.vector(cs),threshold:u.u16()}),Oi=u.struct("MultiSig",{sigs:u.vector(os),bitmap:u.u16(),multisig_pk:ls}),ki=u.vector(u.u8()).transform({input:t=>typeof t=="string"?ee(t):t,output:t=>H(new Uint8Array(t))}),ds=u.struct("SenderSignedTransaction",{intentMessage:as(ts),txSignatures:u.vector(ki)}),Ii=u.vector(ds,{name:"SenderSignedData"}),xi=u.struct("PasskeyAuthenticator",{authenticatorData:u.vector(u.u8()),clientDataJson:u.string(),userSignature:u.vector(u.u8())}),Ti=u.enum("PackageUpgradeError",{UnableToFetchPackage:u.struct("UnableToFetchPackage",{packageId:B}),NotAPackage:u.struct("NotAPackage",{objectId:B}),IncompatibleUpgrade:null,DigestDoesNotMatch:u.struct("DigestDoesNotMatch",{digest:u.vector(u.u8())}),UnknownUpgradePolicy:u.struct("UnknownUpgradePolicy",{policy:u.u8()}),PackageIDDoesNotMatch:u.struct("PackageIDDoesNotMatch",{packageId:B,ticketId:B})}),ji=u.struct("ModuleId",{address:B,name:u.string()}),Jr=u.struct("MoveLocation",{module:ji,function:u.u16(),instruction:u.u16(),functionName:u.option(u.string())}),Ai=u.enum("CommandArgumentError",{TypeMismatch:null,InvalidBCSBytes:null,InvalidUsageOfPureArg:null,InvalidArgumentToPrivateEntryFunction:null,IndexOutOfBounds:u.struct("IndexOutOfBounds",{idx:u.u16()}),SecondaryIndexOutOfBounds:u.struct("SecondaryIndexOutOfBounds",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidResultArity:u.struct("InvalidResultArity",{resultIdx:u.u16()}),InvalidGasCoinUsage:null,InvalidValueUsage:null,InvalidObjectByValue:null,InvalidObjectByMutRef:null,SharedObjectOperationNotAllowed:null}),Ci=u.enum("TypeArgumentError",{TypeNotFound:null,ConstraintNotSatisfied:null}),Ui=u.enum("ExecutionFailureStatus",{InsufficientGas:null,InvalidGasObject:null,InvariantViolation:null,FeatureNotYetSupported:null,MoveObjectTooBig:u.struct("MoveObjectTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),MovePackageTooBig:u.struct("MovePackageTooBig",{objectSize:u.u64(),maxObjectSize:u.u64()}),CircularObjectOwnership:u.struct("CircularObjectOwnership",{object:B}),InsufficientCoinBalance:null,CoinBalanceOverflow:null,PublishErrorNonZeroAddress:null,SuiMoveVerificationError:null,MovePrimitiveRuntimeError:u.option(Jr),MoveAbort:u.tuple([Jr,u.u64()]),VMVerificationOrDeserializationError:null,VMInvariantViolation:null,FunctionNotFound:null,ArityMismatch:null,TypeArityMismatch:null,NonEntryFunctionInvoked:null,CommandArgumentError:u.struct("CommandArgumentError",{argIdx:u.u16(),kind:Ai}),TypeArgumentError:u.struct("TypeArgumentError",{argumentIdx:u.u16(),kind:Ci}),UnusedValueWithoutDrop:u.struct("UnusedValueWithoutDrop",{resultIdx:u.u16(),secondaryIdx:u.u16()}),InvalidPublicFunctionReturnType:u.struct("InvalidPublicFunctionReturnType",{idx:u.u16()}),InvalidTransferObject:null,EffectsTooLarge:u.struct("EffectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),PublishUpgradeMissingDependency:null,PublishUpgradeDependencyDowngrade:null,PackageUpgradeError:u.struct("PackageUpgradeError",{upgradeError:Ti}),WrittenObjectsTooLarge:u.struct("WrittenObjectsTooLarge",{currentSize:u.u64(),maxSize:u.u64()}),CertificateDenied:null,SuiMoveVerificationTimedout:null,SharedObjectOperationNotAllowed:null,InputObjectDeleted:null,ExecutionCancelledDueToSharedObjectCongestion:u.struct("ExecutionCancelledDueToSharedObjectCongestion",{congestedObjects:u.vector(B)}),AddressDeniedForCoin:u.struct("AddressDeniedForCoin",{address:B,coinType:u.string()}),CoinTypeGlobalPause:u.struct("CoinTypeGlobalPause",{coinType:u.string()}),ExecutionCancelledDueToRandomnessUnavailable:null}),fs=u.enum("ExecutionStatus",{Success:null,Failed:u.struct("ExecutionFailed",{error:Ui,command:u.option(u.u64())})}),hs=u.struct("GasCostSummary",{computationCost:u.u64(),storageCost:u.u64(),storageRebate:u.u64(),nonRefundableStorageFee:u.u64()}),Pi=u.struct("TransactionEffectsV1",{status:fs,executedEpoch:u.u64(),gasUsed:hs,modifiedAtVersions:u.vector(u.tuple([B,u.u64()])),sharedObjects:u.vector(ae),transactionDigest:pe,created:u.vector(u.tuple([ae,Ke])),mutated:u.vector(u.tuple([ae,Ke])),unwrapped:u.vector(u.tuple([ae,Ke])),deleted:u.vector(ae),unwrappedThenDeleted:u.vector(ae),wrapped:u.vector(ae),gasObject:u.tuple([ae,Ke]),eventsDigest:u.option(pe),dependencies:u.vector(pe)}),Nr=u.tuple([u.u64(),pe]),Mi=u.enum("ObjectIn",{NotExist:null,Exist:u.tuple([Nr,Ke])}),Di=u.enum("ObjectOut",{NotExist:null,ObjectWrite:u.tuple([pe,Ke]),PackageWrite:Nr}),Bi=u.enum("IDOperation",{None:null,Created:null,Deleted:null}),$i=u.struct("EffectsObjectChange",{inputState:Mi,outputState:Di,idOperation:Bi}),Ni=u.enum("UnchangedSharedKind",{ReadOnlyRoot:Nr,MutateDeleted:u.u64(),ReadDeleted:u.u64(),Cancelled:u.u64(),PerEpochConfig:null}),Li=u.struct("TransactionEffectsV2",{status:fs,executedEpoch:u.u64(),gasUsed:hs,transactionDigest:pe,gasObjectIndex:u.option(u.u32()),eventsDigest:u.option(pe),dependencies:u.vector(pe),lamportVersion:u.u64(),changedObjects:u.vector(u.tuple([B,$i])),unchangedSharedObjects:u.vector(u.tuple([B,Ni])),auxDataDigest:u.option(pe)}),Ri=u.enum("TransactionEffects",{V1:Pi,V2:Li});function vt(t){switch(t){case"u8":return u.u8();case"u16":return u.u16();case"u32":return u.u32();case"u64":return u.u64();case"u128":return u.u128();case"u256":return u.u256();case"bool":return u.bool();case"string":return u.string();case"id":case"address":return B}const e=t.match(/^(vector|option)<(.+)>$/);if(e){const[r,n]=e.slice(1);return r==="vector"?u.vector(vt(n)):u.option(vt(n))}throw new Error(`Invalid Pure type name: ${t}`)}const E={...u,U8:u.u8(),U16:u.u16(),U32:u.u32(),U64:u.u64(),U128:u.u128(),U256:u.u256(),ULEB128:u.uleb128(),Bool:u.bool(),String:u.string(),Address:B,AppId:ss,Argument:be,CallArg:qn,Command:Hn,CompressedSignature:os,GasData:Zn,Intent:is,IntentMessage:as,IntentScope:rs,IntentVersion:ns,MultiSig:Oi,MultiSigPkMap:cs,MultiSigPublicKey:ls,ObjectArg:Wn,ObjectDigest:pe,Owner:Ke,PasskeyAuthenticator:xi,ProgrammableMoveCall:Kn,ProgrammableTransaction:Xn,PublicKey:us,SenderSignedData:Ii,SenderSignedTransaction:ds,SharedObjectRef:zn,StructTag:Yn,SuiObjectRef:ae,TransactionData:ts,TransactionDataV1:es,TransactionEffects:Ri,TransactionExpiration:Jn,TransactionKind:Qn,TypeTag:$r};function Vi(t,e){const r=[];for(let n=0;n<t.length;n+=e)r.push(t.slice(n,n+e));return r}var we;function Gi(t){return{lang:(t==null?void 0:t.lang)??(we==null?void 0:we.lang),message:t==null?void 0:t.message,abortEarly:(t==null?void 0:t.abortEarly)??(we==null?void 0:we.abortEarly),abortPipeEarly:(t==null?void 0:t.abortPipeEarly)??(we==null?void 0:we.abortPipeEarly)}}var ur;function Fi(t){return ur==null?void 0:ur.get(t)}var cr;function zi(t){return cr==null?void 0:cr.get(t)}var lr;function Wi(t,e){var r;return(r=lr==null?void 0:lr.get(t))==null?void 0:r.get(e)}function gs(t){var r,n;const e=typeof t;return e==="string"?`"${t}"`:e==="number"||e==="bigint"||e==="boolean"?`${t}`:e==="object"||e==="function"?(t&&((n=(r=Object.getPrototypeOf(t))==null?void 0:r.constructor)==null?void 0:n.name))??"null":e}function re(t,e,r,n,s){const i=s&&"input"in s?s.input:r.value,a=(s==null?void 0:s.expected)??t.expects??null,o=(s==null?void 0:s.received)??gs(i),c={kind:t.kind,type:t.type,input:i,expected:a,received:o,message:`Invalid ${e}: ${a?`Expected ${a} but r`:"R"}eceived ${o}`,requirement:t.requirement,path:s==null?void 0:s.path,issues:s==null?void 0:s.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},f=t.kind==="schema",d=(s==null?void 0:s.message)??t.message??Wi(t.reference,c.lang)??(f?zi(c.lang):null)??n.message??Fi(c.lang);d&&(c.message=typeof d=="function"?d(c):d),f&&(r.typed=!1),r.issues?r.issues.push(c):r.issues=[c]}function qi(t,e){return Object.hasOwn(t,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}var Ki=class extends Error{constructor(e){super(e[0].message);lt(this,"issues");this.name="ValiError",this.issues=e}};function jt(t,e){return{kind:"validation",type:"check",reference:jt,async:!1,expects:null,requirement:t,message:e,_run(r,n){return r.typed&&!this.requirement(r.value)&&re(this,"input",r,n),r}}}function V(t){return{kind:"validation",type:"integer",reference:V,async:!1,expects:null,requirement:Number.isInteger,message:t,_run(e,r){return e.typed&&!this.requirement(e.value)&&re(this,"integer",e,r),e}}}function tr(t){return{kind:"transformation",type:"transform",reference:tr,async:!1,operation:t,_run(e){return e.value=this.operation(e.value),e}}}function Lr(t,e,r){return typeof t.default=="function"?t.default(e,r):t.default}function Sr(t,e){return!t._run({typed:!1,value:e},{abortEarly:!0}).issues}function _(t,e){return{kind:"schema",type:"array",reference:_,expects:"Array",async:!1,item:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<s.length;a++){const o=s[a],c=this.item._run({typed:!1,value:o},n);if(c.issues){const f={type:"array",origin:"value",input:s,key:a,value:o};for(const d of c.issues)d.path?d.path.unshift(f):d.path=[f],(i=r.issues)==null||i.push(d);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else re(this,"type",r,n);return r}}}function Rr(t){return{kind:"schema",type:"bigint",reference:Rr,expects:"bigint",async:!1,message:t,_run(e,r){return typeof e.value=="bigint"?e.typed=!0:re(this,"type",e,r),e}}}function rr(t){return{kind:"schema",type:"boolean",reference:rr,expects:"boolean",async:!1,message:t,_run(e,r){return typeof e.value=="boolean"?e.typed=!0:re(this,"type",e,r),e}}}function xt(t){return{kind:"schema",type:"lazy",reference:xt,expects:"unknown",async:!1,getter:t,_run(e,r){return this.getter(e.value)._run(e,r)}}}function S(t,e){return{kind:"schema",type:"literal",reference:S,expects:gs(t),async:!1,literal:t,message:e,_run(r,n){return r.value===this.literal?r.typed=!0:re(this,"type",r,n),r}}}function A(t,...e){const r={kind:"schema",type:"nullable",reference:A,expects:`${t.expects} | null`,async:!1,wrapped:t,_run(n,s){return n.value===null&&("default"in this&&(n.value=Lr(this,n,s)),n.value===null)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function ot(t,...e){const r={kind:"schema",type:"nullish",reference:ot,expects:`${t.expects} | null | undefined`,async:!1,wrapped:t,_run(n,s){return(n.value===null||n.value===void 0)&&("default"in this&&(n.value=Lr(this,n,s)),n.value===null||n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function L(t){return{kind:"schema",type:"number",reference:L,expects:"number",async:!1,message:t,_run(e,r){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:re(this,"type",e,r),e}}}function p(t,e){return{kind:"schema",type:"object",reference:p,expects:"Object",async:!1,entries:t,message:e,_run(r,n){var i;const s=r.value;if(s&&typeof s=="object"){r.typed=!0,r.value={};for(const a in this.entries){const o=s[a],c=this.entries[a]._run({typed:!1,value:o},n);if(c.issues){const f={type:"object",origin:"value",input:s,key:a,value:o};for(const d of c.issues)d.path?d.path.unshift(f):d.path=[f],(i=r.issues)==null||i.push(d);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),(c.value!==void 0||a in s)&&(r.value[a]=c.value)}}else re(this,"type",r,n);return r}}}function X(t,...e){const r={kind:"schema",type:"optional",reference:X,expects:`${t.expects} | undefined`,async:!1,wrapped:t,_run(n,s){return n.value===void 0&&("default"in this&&(n.value=Lr(this,n,s)),n.value===void 0)?(n.typed=!0,n):this.wrapped._run(n,s)}};return 0 in e&&(r.default=e[0]),r}function Tt(t,e,r){return{kind:"schema",type:"record",reference:Tt,expects:"Object",async:!1,key:t,value:e,message:r,_run(n,s){var a,o;const i=n.value;if(i&&typeof i=="object"){n.typed=!0,n.value={};for(const c in i)if(qi(i,c)){const f=i[c],d=this.key._run({typed:!1,value:c},s);if(d.issues){const v={type:"object",origin:"key",input:i,key:c,value:f};for(const b of d.issues)b.path=[v],(a=n.issues)==null||a.push(b);if(n.issues||(n.issues=d.issues),s.abortEarly){n.typed=!1;break}}const g=this.value._run({typed:!1,value:f},s);if(g.issues){const v={type:"object",origin:"value",input:i,key:c,value:f};for(const b of g.issues)b.path?b.path.unshift(v):b.path=[v],(o=n.issues)==null||o.push(b);if(n.issues||(n.issues=g.issues),s.abortEarly){n.typed=!1;break}}(!d.typed||!g.typed)&&(n.typed=!1),d.typed&&(n.value[d.value]=g.value)}}else re(this,"type",n,s);return n}}}function O(t){return{kind:"schema",type:"string",reference:O,expects:"string",async:!1,message:t,_run(e,r){return typeof e.value=="string"?e.typed=!0:re(this,"type",e,r),e}}}function Vr(t,e){return{kind:"schema",type:"tuple",reference:Vr,expects:"Array",async:!1,items:t,message:e,_run(r,n){var i;const s=r.value;if(Array.isArray(s)){r.typed=!0,r.value=[];for(let a=0;a<this.items.length;a++){const o=s[a],c=this.items[a]._run({typed:!1,value:o},n);if(c.issues){const f={type:"array",origin:"value",input:s,key:a,value:o};for(const d of c.issues)d.path?d.path.unshift(f):d.path=[f],(i=r.issues)==null||i.push(d);if(r.issues||(r.issues=c.issues),n.abortEarly){r.typed=!1;break}}c.typed||(r.typed=!1),r.value.push(c.value)}}else re(this,"type",r,n);return r}}}function Yr(t){let e;if(t)for(const r of t)e?e.push(...r.issues):e=r.issues;return e}function q(t,e){return{kind:"schema",type:"union",reference:q,expects:[...new Set(t.map(r=>r.expects))].join(" | ")||"never",async:!1,options:t,message:e,_run(r,n){let s,i,a;for(const o of this.options){const c=o._run({typed:!1,value:r.value},n);if(c.typed)if(c.issues)i?i.push(c):i=[c];else{s=c;break}else a?a.push(c):a=[c]}if(s)return s;if(i){if(i.length===1)return i[0];re(this,"type",r,n,{issues:Yr(i)}),r.typed=!0}else{if((a==null?void 0:a.length)===1)return a[0];re(this,"type",r,n,{issues:Yr(a)})}return r}}}function He(){return{kind:"schema",type:"unknown",reference:He,expects:"unknown",async:!1,_run(t){return t.typed=!0,t}}}function R(t,e,r){const n=t._run({typed:!1,value:e},Gi(r));if(n.issues)throw new Ki(n.issues);return n.value}function M(...t){return{...t[0],pipe:t,_run(e,r){for(let n=0;n<t.length;n++){if(e.issues&&(t[n].kind==="schema"||t[n].kind==="transformation")){e.typed=!1;break}(!e.issues||!r.abortEarly&&!r.abortPipeEarly)&&(e=t[n]._run(e,r))}return e}}}function Je(t){const e=Object.entries(t).map(([r,n])=>p({[r]:n}));return M(q(e),tr(r=>({...r,$kind:Object.keys(r)[0]})))}const ct=M(O(),tr(t=>P(t)),jt(Ie)),te=ct,Xe=O(),J=M(q([O(),M(L(),V())]),jt(t=>{try{return BigInt(t),BigInt(t)>=0&&BigInt(t)<=18446744073709551615n}catch{return!1}},"Invalid u64")),$e=p({objectId:ct,version:J,digest:O()}),N=M(q([p({GasCoin:S(!0)}),p({Input:M(L(),V()),type:X(S("pure"))}),p({Input:M(L(),V()),type:X(S("object"))}),p({Result:M(L(),V())}),p({NestedResult:Vr([M(L(),V()),M(L(),V())])})]),tr(t=>({...t,$kind:Object.keys(t)[0]}))),Hi=p({budget:A(J),price:A(J),owner:A(ct),payment:A(_($e))}),Er=q([S("address"),S("bool"),S("u8"),S("u16"),S("u32"),S("u64"),S("u128"),S("u256"),p({vector:xt(()=>Er)}),p({datatype:p({package:O(),module:O(),type:O(),typeParameters:_(xt(()=>Er))})}),p({typeParameter:M(L(),V())})]),Xi=p({ref:A(q([S("&"),S("&mut")])),body:Er}),Qi=p({package:te,module:O(),function:O(),typeArguments:_(O()),arguments:_(N),_argumentTypes:X(A(_(Xi)))}),Ji=p({name:O(),inputs:Tt(O(),q([N,_(N)])),data:Tt(O(),He())}),Yi=Je({MoveCall:Qi,TransferObjects:p({objects:_(N),address:N}),SplitCoins:p({coin:N,amounts:_(N)}),MergeCoins:p({destination:N,sources:_(N)}),Publish:p({modules:_(Xe),dependencies:_(te)}),MakeMoveVec:p({type:A(O()),elements:_(N)}),Upgrade:p({modules:_(Xe),dependencies:_(te),package:te,ticket:N}),$Intent:Ji}),ps=Je({ImmOrOwnedObject:$e,SharedObject:p({objectId:te,initialSharedVersion:J,mutable:rr()}),Receiving:$e}),Zi=Je({Object:ps,Pure:p({bytes:Xe}),UnresolvedPure:p({value:He()}),UnresolvedObject:p({objectId:te,version:X(A(J)),digest:X(A(O())),initialSharedVersion:X(A(J))})}),Zr=Je({Object:ps,Pure:p({bytes:Xe})}),ms=Je({None:S(!0),Epoch:J}),Nt=p({version:S(2),sender:ot(ct),expiration:ot(ms),gasData:Hi,inputs:_(Zi),commands:_(Yi)}),Le={MoveCall(t){const[e,r="",n=""]="target"in t?t.target.split("::"):[t.package,t.module,t.function];return{$kind:"MoveCall",MoveCall:{package:e,module:r,function:n,typeArguments:t.typeArguments??[],arguments:t.arguments??[]}}},TransferObjects(t,e){return{$kind:"TransferObjects",TransferObjects:{objects:t.map(r=>R(N,r)),address:R(N,e)}}},SplitCoins(t,e){return{$kind:"SplitCoins",SplitCoins:{coin:R(N,t),amounts:e.map(r=>R(N,r))}}},MergeCoins(t,e){return{$kind:"MergeCoins",MergeCoins:{destination:R(N,t),sources:e.map(r=>R(N,r))}}},Publish({modules:t,dependencies:e}){return{$kind:"Publish",Publish:{modules:t.map(r=>typeof r=="string"?r:H(new Uint8Array(r))),dependencies:e.map(r=>xe(r))}}},Upgrade({modules:t,dependencies:e,package:r,ticket:n}){return{$kind:"Upgrade",Upgrade:{modules:t.map(s=>typeof s=="string"?s:H(new Uint8Array(s))),dependencies:e.map(s=>xe(s)),package:r,ticket:R(N,n)}}},MakeMoveVec({type:t,elements:e}){return{$kind:"MakeMoveVec",MakeMoveVec:{type:t??null,elements:e.map(r=>R(N,r))}}},Intent({name:t,inputs:e={},data:r={}}){return{$kind:"$Intent",$Intent:{name:t,inputs:Object.fromEntries(Object.entries(e).map(([n,s])=>[n,Array.isArray(s)?s.map(i=>R(N,i)):R(N,s)])),data:r}}}},Or=p({digest:O(),objectId:O(),version:q([M(L(),V()),O(),Rr()])}),ea=Je({ImmOrOwned:Or,Shared:p({objectId:te,initialSharedVersion:J,mutable:rr()}),Receiving:Or}),en=Je({Object:ea,Pure:_(M(L(),V()))}),bs=q([p({kind:S("Input"),index:M(L(),V()),value:He(),type:X(S("object"))}),p({kind:S("Input"),index:M(L(),V()),value:He(),type:S("pure")})]),ta=q([p({Epoch:M(L(),V())}),p({None:A(S(!0))})]),tn=M(q([L(),O(),Rr()]),jt(t=>{if(!["string","number","bigint"].includes(typeof t))return!1;try{return BigInt(t),!0}catch{return!1}})),Gr=q([p({bool:A(S(!0))}),p({u8:A(S(!0))}),p({u64:A(S(!0))}),p({u128:A(S(!0))}),p({address:A(S(!0))}),p({signer:A(S(!0))}),p({vector:xt(()=>Gr)}),p({struct:xt(()=>ra)}),p({u16:A(S(!0))}),p({u32:A(S(!0))}),p({u256:A(S(!0))})]),ra=p({address:O(),module:O(),name:O(),typeParams:_(Gr)}),na=p({budget:X(tn),price:X(tn),payment:X(_(Or)),owner:X(O())}),sa=[bs,p({kind:S("GasCoin")}),p({kind:S("Result"),index:M(L(),V())}),p({kind:S("NestedResult"),index:M(L(),V()),resultIndex:M(L(),V())})],je=q([...sa]),ia=p({kind:S("MoveCall"),target:M(O(),jt(t=>t.split("::").length===3)),typeArguments:_(O()),arguments:_(je)}),aa=p({kind:S("TransferObjects"),objects:_(je),address:je}),oa=p({kind:S("SplitCoins"),coin:je,amounts:_(je)}),ua=p({kind:S("MergeCoins"),destination:je,sources:_(je)}),ca=p({kind:S("MakeMoveVec"),type:q([p({Some:Gr}),p({None:A(S(!0))})]),objects:_(je)}),la=p({kind:S("Publish"),modules:_(_(M(L(),V()))),dependencies:_(O())}),da=p({kind:S("Upgrade"),modules:_(_(M(L(),V()))),dependencies:_(O()),packageId:O(),ticket:je}),fa=[ia,aa,oa,ua,la,da,ca],ha=q([...fa]);p({version:S(1),sender:X(O()),expiration:ot(ta),gasConfig:na,inputs:_(bs),transactions:_(ha)});function rn(t){var r;const e=t.inputs.map((n,s)=>{if(n.Object)return{kind:"Input",index:s,value:{Object:n.Object.ImmOrOwnedObject?{ImmOrOwned:n.Object.ImmOrOwnedObject}:n.Object.Receiving?{Receiving:{digest:n.Object.Receiving.digest,version:n.Object.Receiving.version,objectId:n.Object.Receiving.objectId}}:{Shared:{mutable:n.Object.SharedObject.mutable,initialSharedVersion:n.Object.SharedObject.initialSharedVersion,objectId:n.Object.SharedObject.objectId}}},type:"object"};if(n.Pure)return{kind:"Input",index:s,value:{Pure:Array.from(ee(n.Pure.bytes))},type:"pure"};if(n.UnresolvedPure)return{kind:"Input",type:"pure",index:s,value:n.UnresolvedPure.value};if(n.UnresolvedObject)return{kind:"Input",type:"object",index:s,value:n.UnresolvedObject.objectId};throw new Error("Invalid input")});return{version:1,sender:t.sender??void 0,expiration:((r=t.expiration)==null?void 0:r.$kind)==="Epoch"?{Epoch:Number(t.expiration.Epoch)}:t.expiration?{None:!0}:null,gasConfig:{owner:t.gasData.owner??void 0,budget:t.gasData.budget??void 0,price:t.gasData.price??void 0,payment:t.gasData.payment??void 0},inputs:e,transactions:t.commands.map(n=>{if(n.MakeMoveVec)return{kind:"MakeMoveVec",type:n.MakeMoveVec.type===null?{None:!0}:{Some:he.parseFromStr(n.MakeMoveVec.type)},objects:n.MakeMoveVec.elements.map(s=>ve(s,e))};if(n.MergeCoins)return{kind:"MergeCoins",destination:ve(n.MergeCoins.destination,e),sources:n.MergeCoins.sources.map(s=>ve(s,e))};if(n.MoveCall)return{kind:"MoveCall",target:`${n.MoveCall.package}::${n.MoveCall.module}::${n.MoveCall.function}`,typeArguments:n.MoveCall.typeArguments,arguments:n.MoveCall.arguments.map(s=>ve(s,e))};if(n.Publish)return{kind:"Publish",modules:n.Publish.modules.map(s=>Array.from(ee(s))),dependencies:n.Publish.dependencies};if(n.SplitCoins)return{kind:"SplitCoins",coin:ve(n.SplitCoins.coin,e),amounts:n.SplitCoins.amounts.map(s=>ve(s,e))};if(n.TransferObjects)return{kind:"TransferObjects",objects:n.TransferObjects.objects.map(s=>ve(s,e)),address:ve(n.TransferObjects.address,e)};if(n.Upgrade)return{kind:"Upgrade",modules:n.Upgrade.modules.map(s=>Array.from(ee(s))),dependencies:n.Upgrade.dependencies,packageId:n.Upgrade.package,ticket:ve(n.Upgrade.ticket,e)};throw new Error(`Unknown transaction ${Object.keys(n)}`)})}}function ve(t,e){if(t.$kind==="GasCoin")return{kind:"GasCoin"};if(t.$kind==="Result")return{kind:"Result",index:t.Result};if(t.$kind==="NestedResult")return{kind:"NestedResult",index:t.NestedResult[0],resultIndex:t.NestedResult[1]};if(t.$kind==="Input")return e[t.Input];throw new Error(`Invalid argument ${Object.keys(t)}`)}function ga(t){var e,r,n;return R(Nt,{version:2,sender:t.sender??null,expiration:t.expiration?"Epoch"in t.expiration?{Epoch:t.expiration.Epoch}:{None:!0}:null,gasData:{owner:t.gasConfig.owner??null,budget:((e=t.gasConfig.budget)==null?void 0:e.toString())??null,price:((r=t.gasConfig.price)==null?void 0:r.toString())??null,payment:((n=t.gasConfig.payment)==null?void 0:n.map(s=>({digest:s.digest,objectId:s.objectId,version:s.version.toString()})))??null},inputs:t.inputs.map(s=>{if(s.kind==="Input"){if(Sr(en,s.value)){const i=R(en,s.value);if(i.Object){if(i.Object.ImmOrOwned)return{Object:{ImmOrOwnedObject:{objectId:i.Object.ImmOrOwned.objectId,version:String(i.Object.ImmOrOwned.version),digest:i.Object.ImmOrOwned.digest}}};if(i.Object.Shared)return{Object:{SharedObject:{mutable:i.Object.Shared.mutable??null,initialSharedVersion:i.Object.Shared.initialSharedVersion,objectId:i.Object.Shared.objectId}}};if(i.Object.Receiving)return{Object:{Receiving:{digest:i.Object.Receiving.digest,version:String(i.Object.Receiving.version),objectId:i.Object.Receiving.objectId}}};throw new Error("Invalid object input")}return{Pure:{bytes:H(new Uint8Array(i.Pure))}}}return s.type==="object"?{UnresolvedObject:{objectId:s.value}}:{UnresolvedPure:{value:s.value}}}throw new Error("Invalid input")}),commands:t.transactions.map(s=>{switch(s.kind){case"MakeMoveVec":return{MakeMoveVec:{type:"Some"in s.type?he.tagToString(s.type.Some):null,elements:s.objects.map(i=>_e(i))}};case"MergeCoins":return{MergeCoins:{destination:_e(s.destination),sources:s.sources.map(i=>_e(i))}};case"MoveCall":{const[i,a,o]=s.target.split("::");return{MoveCall:{package:i,module:a,function:o,typeArguments:s.typeArguments,arguments:s.arguments.map(c=>_e(c))}}}case"Publish":return{Publish:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies}};case"SplitCoins":return{SplitCoins:{coin:_e(s.coin),amounts:s.amounts.map(i=>_e(i))}};case"TransferObjects":return{TransferObjects:{objects:s.objects.map(i=>_e(i)),address:_e(s.address)}};case"Upgrade":return{Upgrade:{modules:s.modules.map(i=>H(Uint8Array.from(i))),dependencies:s.dependencies,package:s.packageId,ticket:_e(s.ticket)}}}throw new Error(`Unknown transaction ${Object.keys(s)}`)})})}function _e(t){switch(t.kind){case"GasCoin":return{GasCoin:!0};case"Result":return{Result:t.index};case"NestedResult":return{NestedResult:[t.index,t.resultIndex]};case"Input":return{Input:t.index}}}function At(t){return q(Object.entries(t).map(([e,r])=>p({[e]:r})))}const ce=At({GasCoin:S(!0),Input:M(L(),V()),Result:M(L(),V()),NestedResult:Vr([M(L(),V()),M(L(),V())])}),pa=p({budget:A(J),price:A(J),owner:A(ct),payment:A(_($e))}),ma=p({package:te,module:O(),function:O(),typeArguments:_(O()),arguments:_(ce)}),ba=p({name:O(),inputs:Tt(O(),q([ce,_(ce)])),data:Tt(O(),He())}),ya=At({MoveCall:ma,TransferObjects:p({objects:_(ce),address:ce}),SplitCoins:p({coin:ce,amounts:_(ce)}),MergeCoins:p({destination:ce,sources:_(ce)}),Publish:p({modules:_(Xe),dependencies:_(te)}),MakeMoveVec:p({type:A(O()),elements:_(ce)}),Upgrade:p({modules:_(Xe),dependencies:_(te),package:te,ticket:ce}),$Intent:ba}),wa=At({ImmOrOwnedObject:$e,SharedObject:p({objectId:te,initialSharedVersion:J,mutable:rr()}),Receiving:$e}),va=At({Object:wa,Pure:p({bytes:Xe}),UnresolvedPure:p({value:He()}),UnresolvedObject:p({objectId:te,version:X(A(J)),digest:X(A(O())),initialSharedVersion:X(A(J))})}),_a=At({None:S(!0),Epoch:J}),Sa=p({version:S(2),sender:ot(ct),expiration:ot(_a),gasData:pa,inputs:_(va),commands:_(ya)});function Ea(t){return{$kind:"Pure",Pure:{bytes:t instanceof Uint8Array?H(t):t.toBase64()}}}const Te={Pure:Ea,ObjectRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"ImmOrOwnedObject",ImmOrOwnedObject:{digest:e,version:r,objectId:P(t)}}}},SharedObjectRef({objectId:t,mutable:e,initialSharedVersion:r}){return{$kind:"Object",Object:{$kind:"SharedObject",SharedObject:{mutable:e,initialSharedVersion:r,objectId:P(t)}}}},ReceivingRef({objectId:t,digest:e,version:r}){return{$kind:"Object",Object:{$kind:"Receiving",Receiving:{digest:e,version:r,objectId:P(t)}}}}};BigInt(1e9);const Oa="0x1",ys="0x2";xe("0x6");const ka=`${ys}::sui::SUI`;xe("0x5");function dr(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function Ia(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function ws(t,...e){if(!Ia(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function nn(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function xa(t,e){ws(t);const r=e.outputLen;if(t.length<r)throw new Error("digestInto() expects output buffer of length at least "+r)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Jt(t){return new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4))}const Ge=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function vs(t){return t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255}const Se=Ge?t=>t:t=>vs(t);function Ye(t){for(let e=0;e<t.length;e++)t[e]=vs(t[e])}typeof Uint8Array.from([]).toHex=="function"&&Uint8Array.fromHex;function Ta(t){if(typeof t!="string")throw new Error("utf8ToBytes expected string, got "+typeof t);return new Uint8Array(new TextEncoder().encode(t))}function _t(t){return typeof t=="string"&&(t=Ta(t)),ws(t),t}class ja{clone(){return this._cloneInto()}}function Aa(t){const e=(n,s)=>t(s).update(_t(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}const Ca=new Uint8Array([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);class Ua extends ja{constructor(e,r,n={},s,i,a){if(super(),this.length=0,this.pos=0,this.finished=!1,this.destroyed=!1,dr(e),dr(r),dr(s),r<0||r>s)throw new Error("outputLen bigger than keyLen");if(n.key!==void 0&&(n.key.length<1||n.key.length>s))throw new Error("key length must be undefined or 1.."+s);if(n.salt!==void 0&&n.salt.length!==i)throw new Error("salt must be undefined or "+i);if(n.personalization!==void 0&&n.personalization.length!==a)throw new Error("personalization must be undefined or "+a);this.blockLen=e,this.outputLen=r,this.buffer=new Uint8Array(e),this.buffer32=Jt(this.buffer)}update(e){nn(this);const{blockLen:r,buffer:n,buffer32:s}=this;e=_t(e);const i=e.length,a=e.byteOffset,o=e.buffer;for(let c=0;c<i;){this.pos===r&&(Ge||Ye(s),this.compress(s,0,!1),Ge||Ye(s),this.pos=0);const f=Math.min(r-this.pos,i-c),d=a+c;if(f===r&&!(d%4)&&c+f<i){const g=new Uint32Array(o,d,Math.floor((i-c)/4));Ge||Ye(g);for(let v=0;c+r<i;v+=s.length,c+=r)this.length+=r,this.compress(g,v,!1);Ge||Ye(g);continue}n.set(e.subarray(c,c+f),this.pos),this.pos+=f,this.length+=f,c+=f}return this}digestInto(e){nn(this),xa(e,this);const{pos:r,buffer32:n}=this;this.finished=!0,this.buffer.subarray(r).fill(0),Ge||Ye(n),this.compress(n,0,!0),Ge||Ye(n);const s=Jt(e);this.get().forEach((i,a)=>s[a]=Se(i))}digest(){const{buffer:e,outputLen:r}=this;this.digestInto(e);const n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){const{buffer:r,length:n,finished:s,destroyed:i,outputLen:a,pos:o}=this;return e||(e=new this.constructor({dkLen:a})),e.set(...this.get()),e.length=n,e.finished=s,e.destroyed=i,e.outputLen=a,e.buffer.set(r),e.pos=o,e}}const Mt=BigInt(2**32-1),kr=BigInt(32);function _s(t,e=!1){return e?{h:Number(t&Mt),l:Number(t>>kr&Mt)}:{h:Number(t>>kr&Mt)|0,l:Number(t&Mt)|0}}function Pa(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let s=0;s<t.length;s++){const{h:i,l:a}=_s(t[s],e);[r[s],n[s]]=[i,a]}return[r,n]}const Ma=(t,e)=>BigInt(t>>>0)<<kr|BigInt(e>>>0),Da=(t,e,r)=>t>>>r,Ba=(t,e,r)=>t<<32-r|e>>>r,$a=(t,e,r)=>t>>>r|e<<32-r,Na=(t,e,r)=>t<<32-r|e>>>r,La=(t,e,r)=>t<<64-r|e>>>r-32,Ra=(t,e,r)=>t>>>r-32|e<<64-r,Va=(t,e)=>e,Ga=(t,e)=>t,Fa=(t,e,r)=>t<<r|e>>>32-r,za=(t,e,r)=>e<<r|t>>>32-r,Wa=(t,e,r)=>e<<r-32|t>>>64-r,qa=(t,e,r)=>t<<r-32|e>>>64-r;function Ka(t,e,r,n){const s=(e>>>0)+(n>>>0);return{h:t+r+(s/2**32|0)|0,l:s|0}}const Ha=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0),Xa=(t,e,r,n)=>e+r+n+(t/2**32|0)|0,Qa=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0),Ja=(t,e,r,n,s)=>e+r+n+s+(t/2**32|0)|0,Ya=(t,e,r,n,s)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(s>>>0),Za=(t,e,r,n,s,i)=>e+r+n+s+i+(t/2**32|0)|0,Q={fromBig:_s,split:Pa,toBig:Ma,shrSH:Da,shrSL:Ba,rotrSH:$a,rotrSL:Na,rotrBH:La,rotrBL:Ra,rotr32H:Va,rotr32L:Ga,rotlSH:Fa,rotlSL:za,rotlBH:Wa,rotlBL:qa,add:Ka,add3L:Ha,add3H:Xa,add4L:Qa,add4H:Ja,add5H:Za,add5L:Ya},F=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),m=new Uint32Array(32);function Ce(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=m[2*t],f=m[2*t+1],d=m[2*e],g=m[2*e+1],v=m[2*r],b=m[2*r+1],y=m[2*n],j=m[2*n+1],K=Q.add3L(c,d,a);f=Q.add3H(K,f,g,o),c=K|0,{Dh:j,Dl:y}={Dh:j^f,Dl:y^c},{Dh:j,Dl:y}={Dh:Q.rotr32H(j,y),Dl:Q.rotr32L(j,y)},{h:b,l:v}=Q.add(b,v,j,y),{Bh:g,Bl:d}={Bh:g^b,Bl:d^v},{Bh:g,Bl:d}={Bh:Q.rotrSH(g,d,24),Bl:Q.rotrSL(g,d,24)},m[2*t]=c,m[2*t+1]=f,m[2*e]=d,m[2*e+1]=g,m[2*r]=v,m[2*r+1]=b,m[2*n]=y,m[2*n+1]=j}function Ue(t,e,r,n,s,i){const a=s[i],o=s[i+1];let c=m[2*t],f=m[2*t+1],d=m[2*e],g=m[2*e+1],v=m[2*r],b=m[2*r+1],y=m[2*n],j=m[2*n+1],K=Q.add3L(c,d,a);f=Q.add3H(K,f,g,o),c=K|0,{Dh:j,Dl:y}={Dh:j^f,Dl:y^c},{Dh:j,Dl:y}={Dh:Q.rotrSH(j,y,16),Dl:Q.rotrSL(j,y,16)},{h:b,l:v}=Q.add(b,v,j,y),{Bh:g,Bl:d}={Bh:g^b,Bl:d^v},{Bh:g,Bl:d}={Bh:Q.rotrBH(g,d,63),Bl:Q.rotrBL(g,d,63)},m[2*t]=c,m[2*t+1]=f,m[2*e]=d,m[2*e+1]=g,m[2*r]=v,m[2*r+1]=b,m[2*n]=y,m[2*n+1]=j}class eo extends Ua{constructor(e={}){super(128,e.dkLen===void 0?64:e.dkLen,e,64,16,16),this.v0l=F[0]|0,this.v0h=F[1]|0,this.v1l=F[2]|0,this.v1h=F[3]|0,this.v2l=F[4]|0,this.v2h=F[5]|0,this.v3l=F[6]|0,this.v3h=F[7]|0,this.v4l=F[8]|0,this.v4h=F[9]|0,this.v5l=F[10]|0,this.v5h=F[11]|0,this.v6l=F[12]|0,this.v6h=F[13]|0,this.v7l=F[14]|0,this.v7h=F[15]|0;const r=e.key?e.key.length:0;if(this.v0l^=this.outputLen|r<<8|65536|1<<24,e.salt){const n=Jt(_t(e.salt));this.v4l^=Se(n[0]),this.v4h^=Se(n[1]),this.v5l^=Se(n[2]),this.v5h^=Se(n[3])}if(e.personalization){const n=Jt(_t(e.personalization));this.v6l^=Se(n[0]),this.v6h^=Se(n[1]),this.v7l^=Se(n[2]),this.v7h^=Se(n[3])}if(e.key){const n=new Uint8Array(this.blockLen);n.set(_t(e.key)),this.update(n)}}get(){let{v0l:e,v0h:r,v1l:n,v1h:s,v2l:i,v2h:a,v3l:o,v3h:c,v4l:f,v4h:d,v5l:g,v5h:v,v6l:b,v6h:y,v7l:j,v7h:K}=this;return[e,r,n,s,i,a,o,c,f,d,g,v,b,y,j,K]}set(e,r,n,s,i,a,o,c,f,d,g,v,b,y,j,K){this.v0l=e|0,this.v0h=r|0,this.v1l=n|0,this.v1h=s|0,this.v2l=i|0,this.v2h=a|0,this.v3l=o|0,this.v3h=c|0,this.v4l=f|0,this.v4h=d|0,this.v5l=g|0,this.v5h=v|0,this.v6l=b|0,this.v6h=y|0,this.v7l=j|0,this.v7h=K|0}compress(e,r,n){this.get().forEach((c,f)=>m[f]=c),m.set(F,16);let{h:s,l:i}=Q.fromBig(BigInt(this.length));m[24]=F[8]^i,m[25]=F[9]^s,n&&(m[28]=~m[28],m[29]=~m[29]);let a=0;const o=Ca;for(let c=0;c<12;c++)Ce(0,4,8,12,e,r+2*o[a++]),Ue(0,4,8,12,e,r+2*o[a++]),Ce(1,5,9,13,e,r+2*o[a++]),Ue(1,5,9,13,e,r+2*o[a++]),Ce(2,6,10,14,e,r+2*o[a++]),Ue(2,6,10,14,e,r+2*o[a++]),Ce(3,7,11,15,e,r+2*o[a++]),Ue(3,7,11,15,e,r+2*o[a++]),Ce(0,5,10,15,e,r+2*o[a++]),Ue(0,5,10,15,e,r+2*o[a++]),Ce(1,6,11,12,e,r+2*o[a++]),Ue(1,6,11,12,e,r+2*o[a++]),Ce(2,7,8,13,e,r+2*o[a++]),Ue(2,7,8,13,e,r+2*o[a++]),Ce(3,4,9,14,e,r+2*o[a++]),Ue(3,4,9,14,e,r+2*o[a++]);this.v0l^=m[0]^m[16],this.v0h^=m[1]^m[17],this.v1l^=m[2]^m[18],this.v1h^=m[3]^m[19],this.v2l^=m[4]^m[20],this.v2h^=m[5]^m[21],this.v3l^=m[6]^m[22],this.v3h^=m[7]^m[23],this.v4l^=m[8]^m[24],this.v4h^=m[9]^m[25],this.v5l^=m[10]^m[26],this.v5h^=m[11]^m[27],this.v6l^=m[12]^m[28],this.v6h^=m[13]^m[29],this.v7l^=m[14]^m[30],this.v7h^=m[15]^m[31],m.fill(0)}destroy(){this.destroyed=!0,this.buffer32.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const Ss=Aa(t=>new eo(t));function to(t,e,r){const n=E.Address.serialize(t).toBytes(),s=E.TypeTag.serialize(e).toBytes(),i=E.u64().serialize(r.length).toBytes(),a=Ss.create({dkLen:32});return a.update(new Uint8Array([240])),a.update(n),a.update(i),a.update(r),a.update(s),`0x${at(a.digest().slice(0,32))}`}const ro="object",no="ID",so="ascii",io="String",ao="string",oo="String",uo="option",co="Option";function lo(t){const e=typeof t.body=="object"&&"datatype"in t.body?t.body.datatype:null;return!!e&&P(e.package)===P("0x2")&&e.module==="tx_context"&&e.type==="TxContext"}function Ir(t){if(typeof t=="string")switch(t){case"address":return E.Address;case"bool":return E.Bool;case"u8":return E.U8;case"u16":return E.U16;case"u32":return E.U32;case"u64":return E.U64;case"u128":return E.U128;case"u256":return E.U256;default:throw new Error(`Unknown type signature ${t}`)}if("vector"in t){if(t.vector==="u8")return E.vector(E.U8).transform({input:r=>typeof r=="string"?new TextEncoder().encode(r):r,output:r=>r});const e=Ir(t.vector);return e?E.vector(e):null}if("datatype"in t){const e=P(t.datatype.package);if(e===P(Oa)){if(t.datatype.module===so&&t.datatype.type===io||t.datatype.module===ao&&t.datatype.type===oo)return E.String;if(t.datatype.module===uo&&t.datatype.type===co){const r=Ir(t.datatype.typeParameters[0]);return r?E.vector(r):null}}if(e===P(ys)&&t.datatype.module===ro&&t.datatype.type===no)return E.Address}return null}function fo(t){return typeof t=="object"&&"Reference"in t?{ref:"&",body:St(t.Reference)}:typeof t=="object"&&"MutableReference"in t?{ref:"&mut",body:St(t.MutableReference)}:{ref:null,body:St(t)}}function St(t){if(typeof t=="string")switch(t){case"Address":return"address";case"Bool":return"bool";case"U8":return"u8";case"U16":return"u16";case"U32":return"u32";case"U64":return"u64";case"U128":return"u128";case"U256":return"u256";default:throw new Error(`Unexpected type ${t}`)}if("Vector"in t)return{vector:St(t.Vector)};if("Struct"in t)return{datatype:{package:t.Struct.address,module:t.Struct.module,type:t.Struct.name,typeParameters:t.Struct.typeArguments.map(St)}};if("TypeParameter"in t)return{typeParameter:t.TypeParameter};throw new Error(`Unexpected type ${JSON.stringify(t)}`)}function ho(t,e){return Array.from({length:Math.ceil(t.length/e)},(r,n)=>t.slice(n*e,(n+1)*e))}const go=50,po=1000n,mo=5e10;async function bo(t,e,r){return await So(t,e),await _o(t,e),e.onlyTransactionKind||(await yo(t,e),await wo(t,e),await vo(t,e)),await Eo(t),await r()}async function yo(t,e){t.gasConfig.price||(t.gasConfig.price=String(await Ct(e).getReferenceGasPrice()))}async function wo(t,e){if(t.gasConfig.budget)return;const r=await Ct(e).dryRunTransactionBlock({transactionBlock:t.build({overrides:{gasData:{budget:String(mo),payment:[]}}})});if(r.effects.status.status!=="success")throw new Error(`Dry run failed, could not automatically determine a budget: ${r.effects.status.error}`,{cause:r});const n=po*BigInt(t.gasConfig.price||1n),s=BigInt(r.effects.gasUsed.computationCost)+n,i=s+BigInt(r.effects.gasUsed.storageCost)-BigInt(r.effects.gasUsed.storageRebate);t.gasConfig.budget=String(i>s?i:s)}async function vo(t,e){if(!t.gasConfig.payment){const n=(await Ct(e).getCoins({owner:t.gasConfig.owner||t.sender,coinType:ka})).data.filter(s=>!t.inputs.find(a=>{var o;return(o=a.Object)!=null&&o.ImmOrOwnedObject?s.coinObjectId===a.Object.ImmOrOwnedObject.objectId:!1})).map(s=>({objectId:s.coinObjectId,digest:s.digest,version:s.version}));if(!n.length)throw new Error("No valid gas coins found for the transaction.");t.gasConfig.payment=n.map(s=>R($e,s))}}async function _o(t,e){const r=t.inputs.filter(d=>{var g;return d.UnresolvedObject&&!(d.UnresolvedObject.version||(g=d.UnresolvedObject)!=null&&g.initialSharedVersion)}),n=[...new Set(r.map(d=>xe(d.UnresolvedObject.objectId)))],s=n.length?ho(n,go):[],i=(await Promise.all(s.map(d=>Ct(e).multiGetObjects({ids:d,options:{showOwner:!0}})))).flat(),a=new Map(n.map((d,g)=>[d,i[g]])),o=Array.from(a).filter(([d,g])=>g.error).map(([d,g])=>JSON.stringify(g.error));if(o.length)throw new Error(`The following input objects are invalid: ${o.join(", ")}`);const c=i.map(d=>{if(d.error||!d.data)throw new Error(`Failed to fetch object: ${d.error}`);const g=d.data.owner,v=g&&typeof g=="object"&&"Shared"in g?g.Shared.initial_shared_version:null;return{objectId:d.data.objectId,digest:d.data.digest,version:d.data.version,initialSharedVersion:v}}),f=new Map(n.map((d,g)=>[d,c[g]]));for(const[d,g]of t.inputs.entries()){if(!g.UnresolvedObject)continue;let v;const b=P(g.UnresolvedObject.objectId),y=f.get(b);g.UnresolvedObject.initialSharedVersion??(y==null?void 0:y.initialSharedVersion)?v=Te.SharedObjectRef({objectId:b,initialSharedVersion:g.UnresolvedObject.initialSharedVersion||(y==null?void 0:y.initialSharedVersion),mutable:Oo(t,d)}):ko(t,d)&&(v=Te.ReceivingRef({objectId:b,digest:g.UnresolvedObject.digest??(y==null?void 0:y.digest),version:g.UnresolvedObject.version??(y==null?void 0:y.version)})),t.inputs[t.inputs.indexOf(g)]=v??Te.ObjectRef({objectId:b,digest:g.UnresolvedObject.digest??(y==null?void 0:y.digest),version:g.UnresolvedObject.version??(y==null?void 0:y.version)})}}async function So(t,e){const{inputs:r,commands:n}=t,s=[],i=new Set;n.forEach(o=>{if(o.MoveCall){if(o.MoveCall._argumentTypes)return;if(o.MoveCall.arguments.map(d=>d.$kind==="Input"?t.inputs[d.Input]:null).some(d=>(d==null?void 0:d.UnresolvedPure)||(d==null?void 0:d.UnresolvedObject))){const d=`${o.MoveCall.package}::${o.MoveCall.module}::${o.MoveCall.function}`;i.add(d),s.push(o.MoveCall)}}switch(o.$kind){case"SplitCoins":o.SplitCoins.amounts.forEach(c=>{sn(c,E.U64,t)});break;case"TransferObjects":sn(o.TransferObjects.address,E.Address,t);break}});const a=new Map;if(i.size>0){const o=Ct(e);await Promise.all([...i].map(async c=>{const[f,d,g]=c.split("::"),v=await o.getNormalizedMoveFunction({package:f,module:d,function:g});a.set(c,v.parameters.map(b=>fo(b)))}))}s.length&&await Promise.all(s.map(async o=>{const c=a.get(`${o.package}::${o.module}::${o.function}`);if(!c)return;const d=c.length>0&&lo(c.at(-1))?c.slice(0,c.length-1):c;o._argumentTypes=d})),n.forEach(o=>{if(!o.MoveCall)return;const c=o.MoveCall,f=`${c.package}::${c.module}::${c.function}`,d=c._argumentTypes;if(d){if(d.length!==o.MoveCall.arguments.length)throw new Error(`Incorrect number of arguments for ${f}`);d.forEach((g,v)=>{var w,D;const b=c.arguments[v];if(b.$kind!=="Input")return;const y=r[b.Input];if(!y.UnresolvedPure&&!y.UnresolvedObject)return;const j=((w=y.UnresolvedPure)==null?void 0:w.value)??((D=y.UnresolvedObject)==null?void 0:D.objectId),K=Ir(g.body);if(K){b.type="pure",r[r.indexOf(y)]=Te.Pure(K.serialize(j));return}if(typeof j!="string")throw new Error(`Expect the argument to be an object id string, got ${JSON.stringify(j,null,2)}`);b.type="object";const ue=y.UnresolvedPure?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:j}}:y;r[b.Input]=ue})}})}function Eo(t){t.inputs.forEach((e,r)=>{if(e.$kind!=="Object"&&e.$kind!=="Pure")throw new Error(`Input at index ${r} has not been resolved.  Expected a Pure or Object input, but found ${JSON.stringify(e)}`)})}function sn(t,e,r){if(t.$kind!=="Input")return;const n=r.inputs[t.Input];n.$kind==="UnresolvedPure"&&(r.inputs[t.Input]=Te.Pure(e.serialize(n.UnresolvedPure.value)))}function Oo(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=s.MoveCall._argumentTypes[i].ref!=="&"||r}(s.$kind==="MakeMoveVec"||s.$kind==="MergeCoins"||s.$kind==="SplitCoins")&&(r=!0)}),r}function ko(t,e){let r=!1;return t.getInputUses(e,(n,s)=>{if(s.MoveCall&&s.MoveCall._argumentTypes){const i=s.MoveCall.arguments.indexOf(n);r=Io(s.MoveCall._argumentTypes[i])||r}}),r}function Io(t){return typeof t.body!="object"||!("datatype"in t.body)?!1:t.body.datatype.package==="0x2"&&t.body.datatype.module==="transfer"&&t.body.datatype.type==="Receiving"}function Ct(t){if(!t.client)throw new Error("No sui client passed to Transaction#build, but transaction data was not sufficient to build offline.");return t.client}function xo(t){function e(r){return t(r)}return e.system=()=>e("0x5"),e.clock=()=>e("0x6"),e.random=()=>e("0x8"),e.denyList=()=>e("0x403"),e.option=({type:r,value:n})=>s=>s.moveCall({typeArguments:[r],target:`0x1::option::${n===null?"none":"some"}`,arguments:n===null?[]:[s.object(n)]}),e}function To(t){function e(r,n){if(typeof r=="string")return t(vt(r).serialize(n));if(r instanceof Uint8Array||Mr(r))return t(r);throw new Error("tx.pure must be called either a bcs type name, or a serialized bcs value")}return e.u8=r=>t(E.U8.serialize(r)),e.u16=r=>t(E.U16.serialize(r)),e.u32=r=>t(E.U32.serialize(r)),e.u64=r=>t(E.U64.serialize(r)),e.u128=r=>t(E.U128.serialize(r)),e.u256=r=>t(E.U256.serialize(r)),e.bool=r=>t(E.Bool.serialize(r)),e.string=r=>t(E.String.serialize(r)),e.address=r=>t(E.Address.serialize(r)),e.id=e.address,e.vector=(r,n)=>t(E.vector(vt(r)).serialize(n)),e.option=(r,n)=>t(E.option(vt(r)).serialize(n)),e}function jo(t,e){const r=Array.from(`${t}::`).map(s=>s.charCodeAt(0)),n=new Uint8Array(r.length+e.length);return n.set(r),n.set(e,r.length),Ss(n,{dkLen:32})}function an(t){return P(t).replace("0x","")}class ge{constructor(e){this.version=2,this.sender=(e==null?void 0:e.sender)??null,this.expiration=(e==null?void 0:e.expiration)??null,this.inputs=(e==null?void 0:e.inputs)??[],this.commands=(e==null?void 0:e.commands)??[],this.gasData=(e==null?void 0:e.gasData)??{budget:null,price:null,owner:null,payment:null}}static fromKindBytes(e){const n=E.TransactionKind.parse(e).ProgrammableTransaction;if(!n)throw new Error("Unable to deserialize from bytes.");return ge.restore({version:2,sender:null,expiration:null,gasData:{budget:null,owner:null,payment:null,price:null},inputs:n.inputs,commands:n.commands})}static fromBytes(e){const r=E.TransactionData.parse(e),n=r==null?void 0:r.V1,s=n.kind.ProgrammableTransaction;if(!n||!s)throw new Error("Unable to deserialize from bytes.");return ge.restore({version:2,sender:n.sender,expiration:n.expiration,gasData:n.gasData,inputs:s.inputs,commands:s.commands})}static restore(e){return e.version===2?new ge(R(Nt,e)):new ge(R(Nt,ga(e)))}static getDigestFromBytes(e){const r=jo("TransactionData",e);return Zt(r)}get gasConfig(){return this.gasData}set gasConfig(e){this.gasData=e}build({maxSizeBytes:e=1/0,overrides:r,onlyTransactionKind:n}={}){const s=this.inputs,i=this.commands,a={ProgrammableTransaction:{inputs:s,commands:i}};if(n)return E.TransactionKind.serialize(a,{maxSize:e}).toBytes();const o=(r==null?void 0:r.expiration)??this.expiration,c=(r==null?void 0:r.sender)??this.sender,f={...this.gasData,...r==null?void 0:r.gasConfig,...r==null?void 0:r.gasData};if(!c)throw new Error("Missing transaction sender");if(!f.budget)throw new Error("Missing gas budget");if(!f.payment)throw new Error("Missing gas payment");if(!f.price)throw new Error("Missing gas price");const d={sender:an(c),expiration:o||{None:!0},gasData:{payment:f.payment,owner:an(this.gasData.owner??c),price:BigInt(f.price),budget:BigInt(f.budget)},kind:{ProgrammableTransaction:{inputs:s,commands:i}}};return E.TransactionData.serialize({V1:d},{maxSize:e}).toBytes()}addInput(e,r){const n=this.inputs.length;return this.inputs.push(r),{Input:n,type:e,$kind:"Input"}}getInputUses(e,r){this.mapArguments((n,s)=>(n.$kind==="Input"&&n.Input===e&&r(n,s),n))}mapArguments(e){for(const r of this.commands)switch(r.$kind){case"MoveCall":r.MoveCall.arguments=r.MoveCall.arguments.map(s=>e(s,r));break;case"TransferObjects":r.TransferObjects.objects=r.TransferObjects.objects.map(s=>e(s,r)),r.TransferObjects.address=e(r.TransferObjects.address,r);break;case"SplitCoins":r.SplitCoins.coin=e(r.SplitCoins.coin,r),r.SplitCoins.amounts=r.SplitCoins.amounts.map(s=>e(s,r));break;case"MergeCoins":r.MergeCoins.destination=e(r.MergeCoins.destination,r),r.MergeCoins.sources=r.MergeCoins.sources.map(s=>e(s,r));break;case"MakeMoveVec":r.MakeMoveVec.elements=r.MakeMoveVec.elements.map(s=>e(s,r));break;case"Upgrade":r.Upgrade.ticket=e(r.Upgrade.ticket,r);break;case"$Intent":const n=r.$Intent.inputs;r.$Intent.inputs={};for(const[s,i]of Object.entries(n))r.$Intent.inputs[s]=Array.isArray(i)?i.map(a=>e(a,r)):e(i,r);break;case"Publish":break;default:throw new Error(`Unexpected transaction kind: ${r.$kind}`)}}replaceCommand(e,r){if(!Array.isArray(r)){this.commands[e]=r;return}const n=r.length-1;this.commands.splice(e,1,...r),n!==0&&this.mapArguments(s=>{switch(s.$kind){case"Result":s.Result>e&&(s.Result+=n);break;case"NestedResult":s.NestedResult[0]>e&&(s.NestedResult[0]+=n);break}return s})}getDigest(){const e=this.build({onlyTransactionKind:!1});return ge.getDigestFromBytes(e)}snapshot(){return R(Nt,this)}}function on(t){if(typeof t=="string")return P(t);if(t.Object)return t.Object.ImmOrOwnedObject?P(t.Object.ImmOrOwnedObject.objectId):t.Object.Receiving?P(t.Object.Receiving.objectId):P(t.Object.SharedObject.objectId);if(t.UnresolvedObject)return P(t.UnresolvedObject.objectId)}var Es=t=>{throw TypeError(t)},Fr=(t,e,r)=>e.has(t)||Es("Cannot "+r),k=(t,e,r)=>(Fr(t,e,"read from private field"),r?r.call(t):e.get(t)),dt=(t,e,r)=>e.has(t)?Es("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Re=(t,e,r,n)=>(Fr(t,e,"write to private field"),e.set(t,r),r),Oe=(t,e,r)=>(Fr(t,e,"access private method"),r),bt,Et,Fe,T,le,Lt,zr,xr,Wr;function un(t,e=1/0){const r={$kind:"Result",Result:t},n=[],s=i=>n[i]??(n[i]={$kind:"NestedResult",NestedResult:[t,i]});return new Proxy(r,{set(){throw new Error("The transaction result is a proxy, and does not support setting properties directly")},get(i,a){if(a in i)return Reflect.get(i,a);if(a===Symbol.iterator)return function*(){let c=0;for(;c<e;)yield s(c),c++};if(typeof a=="symbol")return;const o=parseInt(a,10);if(!(Number.isNaN(o)||o<0))return s(o)}})}const Os=Symbol.for("@mysten/transaction");function ks(t){return!!t&&typeof t=="object"&&t[Os]===!0}const cn={buildPlugins:new Map,serializationPlugins:new Map},fr=Symbol.for("@mysten/transaction/registry");function ft(){try{const t=globalThis;return t[fr]||(t[fr]=cn),t[fr]}catch{return cn}}const Ao=class Tr{constructor(){dt(this,le),dt(this,bt),dt(this,Et),dt(this,Fe,new Map),dt(this,T),this.object=xo(r=>{var i,a;if(typeof r=="function")return this.object(r(this));if(typeof r=="object"&&Sr(N,r))return r;const n=on(r),s=k(this,T).inputs.find(o=>n===on(o));return(i=s==null?void 0:s.Object)!=null&&i.SharedObject&&typeof r=="object"&&((a=r.Object)!=null&&a.SharedObject)&&(s.Object.SharedObject.mutable=s.Object.SharedObject.mutable||r.Object.SharedObject.mutable),s?{$kind:"Input",Input:k(this,T).inputs.indexOf(s),type:"object"}:k(this,T).addInput("object",typeof r=="string"?{$kind:"UnresolvedObject",UnresolvedObject:{objectId:P(r)}}:r)});const e=ft();Re(this,T,new ge),Re(this,Et,[...e.buildPlugins.values()]),Re(this,bt,[...e.serializationPlugins.values()])}static fromKind(e){const r=new Tr;return Re(r,T,ge.fromKindBytes(typeof e=="string"?ee(e):e)),r}static from(e){const r=new Tr;return ks(e)?Re(r,T,new ge(e.getData())):typeof e!="string"||!e.startsWith("{")?Re(r,T,ge.fromBytes(typeof e=="string"?ee(e):e)):Re(r,T,ge.restore(JSON.parse(e))),r}static registerGlobalSerializationPlugin(e,r){ft().serializationPlugins.set(e,r??e)}static unregisterGlobalSerializationPlugin(e){ft().serializationPlugins.delete(e)}static registerGlobalBuildPlugin(e,r){ft().buildPlugins.set(e,r??e)}static unregisterGlobalBuildPlugin(e){ft().buildPlugins.delete(e)}addSerializationPlugin(e){k(this,bt).push(e)}addBuildPlugin(e){k(this,Et).push(e)}addIntentResolver(e,r){if(k(this,Fe).has(e)&&k(this,Fe).get(e)!==r)throw new Error(`Intent resolver for ${e} already exists`);k(this,Fe).set(e,r)}setSender(e){k(this,T).sender=e}setSenderIfNotSet(e){k(this,T).sender||(k(this,T).sender=e)}setExpiration(e){k(this,T).expiration=e?R(ms,e):null}setGasPrice(e){k(this,T).gasConfig.price=String(e)}setGasBudget(e){k(this,T).gasConfig.budget=String(e)}setGasBudgetIfNotSet(e){k(this,T).gasData.budget==null&&(k(this,T).gasConfig.budget=String(e))}setGasOwner(e){k(this,T).gasConfig.owner=e}setGasPayment(e){k(this,T).gasConfig.payment=e.map(r=>R($e,r))}get blockData(){return rn(k(this,T).snapshot())}getData(){return k(this,T).snapshot()}get[Os](){return!0}get pure(){return Object.defineProperty(this,"pure",{enumerable:!1,value:To(e=>Mr(e)?k(this,T).addInput("pure",{$kind:"Pure",Pure:{bytes:e.toBase64()}}):k(this,T).addInput("pure",Sr(Zr,e)?R(Zr,e):e instanceof Uint8Array?Te.Pure(e):{$kind:"UnresolvedPure",UnresolvedPure:{value:e}}))}),this.pure}get gas(){return{$kind:"GasCoin",GasCoin:!0}}objectRef(...e){return this.object(Te.ObjectRef(...e))}receivingRef(...e){return this.object(Te.ReceivingRef(...e))}sharedObjectRef(...e){return this.object(Te.SharedObjectRef(...e))}add(e){if(typeof e=="function")return e(this);const r=k(this,T).commands.push(e);return un(r-1)}splitCoins(e,r){const n=Le.SplitCoins(typeof e=="string"?this.object(e):Oe(this,le,zr).call(this,e),r.map(i=>typeof i=="number"||typeof i=="bigint"||typeof i=="string"?this.pure.u64(i):Oe(this,le,Lt).call(this,i))),s=k(this,T).commands.push(n);return un(s-1,r.length)}mergeCoins(e,r){return this.add(Le.MergeCoins(this.object(e),r.map(n=>this.object(n))))}publish({modules:e,dependencies:r}){return this.add(Le.Publish({modules:e,dependencies:r}))}upgrade({modules:e,dependencies:r,package:n,ticket:s}){return this.add(Le.Upgrade({modules:e,dependencies:r,package:n,ticket:this.object(s)}))}moveCall({arguments:e,...r}){return this.add(Le.MoveCall({...r,arguments:e==null?void 0:e.map(n=>Oe(this,le,Lt).call(this,n))}))}transferObjects(e,r){return this.add(Le.TransferObjects(e.map(n=>this.object(n)),typeof r=="string"?this.pure.address(r):Oe(this,le,Lt).call(this,r)))}makeMoveVec({type:e,elements:r}){return this.add(Le.MakeMoveVec({type:e,elements:r.map(n=>this.object(n))}))}serialize(){return JSON.stringify(rn(k(this,T).snapshot()))}async toJSON(e={}){return await this.prepareForSerialization(e),JSON.stringify(R(Sa,k(this,T).snapshot()),(r,n)=>typeof n=="bigint"?n.toString():n,2)}async sign(e){const{signer:r,...n}=e,s=await this.build(n);return r.signTransaction(s)}async build(e={}){return await this.prepareForSerialization(e),await Oe(this,le,xr).call(this,e),k(this,T).build({onlyTransactionKind:e.onlyTransactionKind})}async getDigest(e={}){return await Oe(this,le,xr).call(this,e),k(this,T).getDigest()}async prepareForSerialization(e){var s;const r=new Set;for(const i of k(this,T).commands)i.$Intent&&r.add(i.$Intent.name);const n=[...k(this,bt)];for(const i of r)if(!((s=e.supportedIntents)!=null&&s.includes(i))){if(!k(this,Fe).has(i))throw new Error(`Missing intent resolver for ${i}`);n.push(k(this,Fe).get(i))}await Oe(this,le,Wr).call(this,n,e)}};bt=new WeakMap;Et=new WeakMap;Fe=new WeakMap;T=new WeakMap;le=new WeakSet;Lt=function(t){return Mr(t)?this.pure(t):Oe(this,le,zr).call(this,t)};zr=function(t){return typeof t=="function"?R(N,t(this)):R(N,t)};xr=async function(t){if(!t.onlyTransactionKind&&!k(this,T).sender)throw new Error("Missing transaction sender");await Oe(this,le,Wr).call(this,[...k(this,Et),bo],t)};Wr=async function(t,e){const r=n=>{if(n>=t.length)return()=>{};const s=t[n];return async()=>{const i=r(n+1);let a=!1,o=!1;if(await s(k(this,T),e,async()=>{if(a)throw new Error(`next() was call multiple times in TransactionPlugin ${n}`);a=!0,await i(),o=!0}),!a)throw new Error(`next() was not called in TransactionPlugin ${n}`);if(!o)throw new Error(`next() was not awaited in TransactionPlugin ${n}`)}};await r(0)()};let qr=Ao;class Co extends Vn{constructor(){super(...arguments),this.core=this}async getDynamicField(e){const r=to(e.parentId,he.parseFromStr(e.name.type),e.name.bcs),{objects:[n]}=await this.getObjects({objectIds:[r]});if(n instanceof Error)throw n;const s=Dr(n.type);return{dynamicField:{id:n.id,digest:n.digest,version:n.version,type:n.type,name:{type:typeof s.typeParams[0]=="string"?s.typeParams[0]:Qt(s.typeParams[0]),bcs:e.name.bcs},value:{type:typeof s.typeParams[1]=="string"?s.typeParams[1]:Qt(s.typeParams[1]),bcs:n.content.slice(er+e.name.bcs.length)}}}}async waitForTransaction({signal:e,timeout:r=60*1e3,...n}){const s=e?AbortSignal.any([AbortSignal.timeout(r),e]):AbortSignal.timeout(r),i=new Promise((a,o)=>{s.addEventListener("abort",()=>o(s.reason))});for(i.catch(()=>{});;){s.throwIfAborted();try{return await this.getTransaction({...n,signal:s})}catch{await Promise.race([new Promise(o=>setTimeout(o,2e3)),i])}}}}class Uo extends Error{}class De extends Uo{constructor(e,r){super(r),this.code=e}static fromResponse(e,r){switch(e.code){case"notExists":return new De(e.code,`Object ${e.object_id} does not exist`);case"dynamicFieldNotFound":return new De(e.code,`Dynamic field not found for object ${e.parent_object_id}`);case"deleted":return new De(e.code,`Object ${e.object_id} has been deleted`);case"displayError":return new De(e.code,`Display error: ${e.error}`);case"unknown":default:return new De(e.code,`Unknown error while loading object${r?` ${r}`:""}`)}}}var Is=t=>{throw TypeError(t)},xs=(t,e,r)=>e.has(t)||Is("Cannot "+r),me=(t,e,r)=>(xs(t,e,"read from private field"),r?r.call(t):e.get(t)),Po=(t,e,r)=>e.has(t)?Is("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Mo=(t,e,r,n)=>(xs(t,e,"write to private field"),e.set(t,r),r),Y;class Do extends Co{constructor(e){super({network:e.network}),Po(this,Y),Mo(this,Y,e)}async getObjects(e){const r=Vi(e.objectIds,50),n=[];for(const s of r){const i=await me(this,Y).multiGetObjects({ids:s,options:{showOwner:!0,showType:!0,showBcs:!0}});for(const[a,o]of i.entries())o.error?n.push(De.fromResponse(o.error,s[a])):n.push(ln(o.data))}return{objects:n}}async getOwnedObjects(e){const r=await me(this,Y).getOwnedObjects({owner:e.address,limit:e.limit,cursor:e.cursor,options:{showOwner:!0,showType:!0,showBcs:!0}});return{objects:r.data.map(n=>{if(n.error)throw De.fromResponse(n.error);return ln(n.data)}),hasNextPage:r.hasNextPage,cursor:r.nextCursor??null}}async getCoins(e){const r=await me(this,Y).getCoins({owner:e.address,coinType:e.coinType});return{objects:r.data.map(n=>({id:n.coinObjectId,version:n.version,digest:n.digest,balance:n.balance,type:`0x2::coin::Coin<${n.coinType}>`,content:Vo.serialize({id:n.coinObjectId,balance:{value:n.balance}}).toBytes(),owner:{$kind:"ObjectOwner",ObjectOwner:e.address}})),hasNextPage:r.hasNextPage,cursor:r.nextCursor??null}}async getBalance(e){const r=await me(this,Y).getBalance({owner:e.address,coinType:e.coinType});return{balance:{coinType:r.coinType,balance:r.totalBalance}}}async getAllBalances(e){return{balances:(await me(this,Y).getAllBalances({owner:e.address})).map(n=>({coinType:n.coinType,balance:n.totalBalance})),hasNextPage:!1,cursor:null}}async getTransaction(e){const r=await me(this,Y).getTransactionBlock({digest:e.digest,options:{showRawInput:!0,showObjectChanges:!0,showRawEffects:!0,showEvents:!0}});return{transaction:dn(r)}}async executeTransaction(e){const r=await me(this,Y).executeTransactionBlock({transactionBlock:e.transaction,signature:e.signatures,options:{showRawEffects:!0,showEvents:!0,showObjectChanges:!0,showRawInput:!0}});return{transaction:dn(r)}}async dryRunTransaction(e){const r=qr.from(e.transaction),n=await me(this,Y).dryRunTransactionBlock({transactionBlock:e.transaction});return{transaction:{digest:await r.getDigest(),effects:Lo({effects:n.effects,objectChanges:n.objectChanges}),signatures:[],bcs:e.transaction}}}async getReferenceGasPrice(){const e=await me(this,Y).getReferenceGasPrice();return{referenceGasPrice:String(e)}}async getDynamicFields(e){const r=await me(this,Y).getDynamicFields({parentId:e.parentId,limit:e.limit,cursor:e.cursor});return{dynamicFields:r.data.map(n=>({id:n.objectId,version:n.version,digest:n.digest,type:n.objectType,name:{type:n.name.type,bcs:ee(n.bcsName)}})),hasNextPage:r.hasNextPage,cursor:r.nextCursor}}}Y=new WeakMap;function ln(t){var e;return{id:t.objectId,version:t.version,digest:t.digest,type:t.type,content:((e=t.bcs)==null?void 0:e.dataType)==="moveObject"?ee(t.bcs.bcsBytes):new Uint8Array,owner:rt(t.owner)}}function rt(t){if(t==="Immutable")return{$kind:"Immutable",Immutable:!0};if("ConsensusV2"in t)return{$kind:"ConsensusV2",ConsensusV2:{authenticator:{$kind:"SingleOwner",SingleOwner:t.ConsensusV2.authenticator.SingleOwner},startVersion:t.ConsensusV2.start_version}};if("AddressOwner"in t)return{$kind:"AddressOwner",AddressOwner:t.AddressOwner};if("ObjectOwner"in t)return{$kind:"ObjectOwner",ObjectOwner:t.ObjectOwner};if("Shared"in t)return{$kind:"Shared",Shared:{initialSharedVersion:t.Shared.initial_shared_version}};throw new Error(`Unknown owner type: ${JSON.stringify(t)}`)}function dn(t){const e=E.SenderSignedData.parse(ee(t.rawTransaction))[0];return{digest:t.digest,effects:Bo({effects:new Uint8Array(t.rawEffects),objectChanges:t.objectChanges??null}),bcs:E.TransactionData.serialize(e.intentMessage.value).toBytes(),signatures:e.txSignatures}}function Bo({effects:t,epoch:e,objectChanges:r}){const n=E.TransactionEffects.parse(t),s={};switch(r==null||r.forEach(i=>{i.type!=="published"&&(s[i.objectId]=i.objectType)}),n.$kind){case"V1":return $o({effects:n.V1});case"V2":return No({bytes:t,effects:n.V2,epoch:e,objectTypes:s});default:throw new Error(`Unknown transaction effects version: ${n.$kind}`)}}function $o(t){throw new Error("V1 effects are not supported yet")}function No({bytes:t,effects:e,epoch:r,objectTypes:n}){const s=e.changedObjects.map(([i,a])=>{var o,c,f,d,g,v;return{id:i,inputState:a.inputState.$kind==="Exist"?"Exists":"DoesNotExist",inputVersion:((o=a.inputState.Exist)==null?void 0:o[0][0])??null,inputDigest:((c=a.inputState.Exist)==null?void 0:c[0][1])??null,inputOwner:((f=a.inputState.Exist)==null?void 0:f[1])??null,outputState:a.outputState.$kind==="NotExist"?"DoesNotExist":a.outputState.$kind,outputVersion:a.outputState.$kind==="PackageWrite"?(d=a.outputState.PackageWrite)==null?void 0:d[0]:a.outputState.ObjectWrite?e.lamportVersion:null,outputDigest:a.outputState.$kind==="PackageWrite"?(g=a.outputState.PackageWrite)==null?void 0:g[1]:((v=a.outputState.ObjectWrite)==null?void 0:v[0])??null,outputOwner:a.outputState.ObjectWrite?a.outputState.ObjectWrite[1]:null,idOperation:a.idOperation.$kind,objectType:n[i]??null}});return{bcs:t,digest:e.transactionDigest,version:2,status:e.status.$kind==="Success"?{success:!0,error:null}:{success:!1,error:e.status.Failed.error.$kind},epoch:r??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:e.gasObjectIndex===null?null:s[e.gasObjectIndex]??null,eventsDigest:e.eventsDigest,dependencies:e.dependencies,lamportVersion:e.lamportVersion,changedObjects:s,unchangedSharedObjects:e.unchangedSharedObjects.map(([i,a])=>({kind:a.$kind,objectId:i,version:a.$kind==="ReadOnlyRoot"?a.ReadOnlyRoot[0]:a[a.$kind],digest:a.$kind==="ReadOnlyRoot"?a.ReadOnlyRoot[1]:null,objectType:n[i]??null})),auxiliaryDataDigest:e.auxDataDigest}}function Lo({bytes:t,effects:e,epoch:r,objectChanges:n}){var a;const s=[],i=[];return n==null||n.forEach(o=>{var c,f,d,g;switch(o.type){case"published":s.push({id:o.packageId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"PackageWrite",outputVersion:o.version,outputDigest:o.digest,outputOwner:null,idOperation:"Created",objectType:null});break;case"transferred":s.push({id:o.objectId,inputState:"Exists",inputVersion:o.version,inputDigest:o.digest,inputOwner:{$kind:"AddressOwner",AddressOwner:o.sender},outputState:"ObjectWrite",outputVersion:o.version,outputDigest:o.digest,outputOwner:rt(o.recipient),idOperation:"None",objectType:o.objectType});break;case"mutated":s.push({id:o.objectId,inputState:"Exists",inputVersion:o.previousVersion,inputDigest:null,inputOwner:rt(o.owner),outputState:"ObjectWrite",outputVersion:o.version,outputDigest:o.digest,outputOwner:rt(o.owner),idOperation:"None",objectType:o.objectType});break;case"deleted":s.push({id:o.objectId,inputState:"Exists",inputVersion:o.version,inputDigest:((f=(c=e.deleted)==null?void 0:c.find(v=>v.objectId===o.objectId))==null?void 0:f.digest)??null,inputOwner:null,outputState:"DoesNotExist",outputVersion:null,outputDigest:null,outputOwner:null,idOperation:"Deleted",objectType:o.objectType});break;case"wrapped":s.push({id:o.objectId,inputState:"Exists",inputVersion:o.version,inputDigest:null,inputOwner:{$kind:"AddressOwner",AddressOwner:o.sender},outputState:"ObjectWrite",outputVersion:o.version,outputDigest:((g=(d=e.wrapped)==null?void 0:d.find(v=>v.objectId===o.objectId))==null?void 0:g.digest)??null,outputOwner:{$kind:"ObjectOwner",ObjectOwner:o.sender},idOperation:"None",objectType:o.objectType});break;case"created":s.push({id:o.objectId,inputState:"DoesNotExist",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:o.version,outputDigest:o.digest,outputOwner:rt(o.owner),idOperation:"Created",objectType:o.objectType});break}}),{bcs:t??null,digest:e.transactionDigest,version:2,status:e.status.status==="success"?{success:!0,error:null}:{success:!1,error:e.status.error},epoch:r??null,gasUsed:e.gasUsed,transactionDigest:e.transactionDigest,gasObject:{id:(a=e.gasObject)==null?void 0:a.reference.objectId,inputState:"Exists",inputVersion:null,inputDigest:null,inputOwner:null,outputState:"ObjectWrite",outputVersion:e.gasObject.reference.version,outputDigest:e.gasObject.reference.digest,outputOwner:rt(e.gasObject.owner),idOperation:"None",objectType:Qt("0x2::coin::Coin<0x2::sui::SUI>")},eventsDigest:e.eventsDigest??null,dependencies:e.dependencies??[],lamportVersion:e.gasObject.reference.version,changedObjects:s,unchangedSharedObjects:i,auxiliaryDataDigest:null}}const Ro=E.struct("Balance",{value:E.u64()}),Vo=E.struct("Coin",{id:E.Address,balance:Ro}),Go=Symbol.for("@mysten/SuiClient");class Fo extends Vn{constructor(e){super({network:e.network??"unknown"}),this.core=new Do(this),this.jsonRpc=this,this.transport=e.transport??new Gs({url:e.url})}get[Go](){return!0}async getRpcApiVersion({signal:e}={}){return(await this.transport.request({method:"rpc.discover",params:[],signal:e})).info.version}async getCoins(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getCoins",params:[e.owner,e.coinType,e.cursor,e.limit],signal:e.signal})}async getAllCoins(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllCoins",params:[e.owner,e.cursor,e.limit],signal:e.signal})}async getBalance(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getBalance",params:[e.owner,e.coinType],signal:e.signal})}async getAllBalances(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getAllBalances",params:[e.owner],signal:e.signal})}async getCoinMetadata(e){return await this.transport.request({method:"suix_getCoinMetadata",params:[e.coinType],signal:e.signal})}async getTotalSupply(e){return await this.transport.request({method:"suix_getTotalSupply",params:[e.coinType],signal:e.signal})}async call(e,r,{signal:n}={}){return await this.transport.request({method:e,params:r,signal:n})}async getMoveFunctionArgTypes(e){return await this.transport.request({method:"sui_getMoveFunctionArgTypes",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveModulesByPackage(e){return await this.transport.request({method:"sui_getNormalizedMoveModulesByPackage",params:[e.package],signal:e.signal})}async getNormalizedMoveModule(e){return await this.transport.request({method:"sui_getNormalizedMoveModule",params:[e.package,e.module],signal:e.signal})}async getNormalizedMoveFunction(e){return await this.transport.request({method:"sui_getNormalizedMoveFunction",params:[e.package,e.module,e.function],signal:e.signal})}async getNormalizedMoveStruct(e){return await this.transport.request({method:"sui_getNormalizedMoveStruct",params:[e.package,e.module,e.struct],signal:e.signal})}async getOwnedObjects(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getOwnedObjects",params:[e.owner,{filter:e.filter,options:e.options},e.cursor,e.limit],signal:e.signal})}async getObject(e){if(!e.id||!Pt(xe(e.id)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"sui_getObject",params:[e.id,e.options],signal:e.signal})}async tryGetPastObject(e){return await this.transport.request({method:"sui_tryGetPastObject",params:[e.id,e.version,e.options],signal:e.signal})}async multiGetObjects(e){if(e.ids.forEach(n=>{if(!n||!Pt(xe(n)))throw new Error(`Invalid Sui Object id ${n}`)}),e.ids.length!==new Set(e.ids).size)throw new Error(`Duplicate object ids in batch call ${e.ids}`);return await this.transport.request({method:"sui_multiGetObjects",params:[e.ids,e.options],signal:e.signal})}async queryTransactionBlocks(e){return await this.transport.request({method:"suix_queryTransactionBlocks",params:[{filter:e.filter,options:e.options},e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async getTransactionBlock(e){if(!Qr(e.digest))throw new Error("Invalid Transaction digest");return await this.transport.request({method:"sui_getTransactionBlock",params:[e.digest,e.options],signal:e.signal})}async multiGetTransactionBlocks(e){if(e.digests.forEach(n=>{if(!Qr(n))throw new Error(`Invalid Transaction digest ${n}`)}),e.digests.length!==new Set(e.digests).size)throw new Error(`Duplicate digests in batch call ${e.digests}`);return await this.transport.request({method:"sui_multiGetTransactionBlocks",params:[e.digests,e.options],signal:e.signal})}async executeTransactionBlock({transactionBlock:e,signature:r,options:n,requestType:s,signal:i}){const a=await this.transport.request({method:"sui_executeTransactionBlock",params:[typeof e=="string"?e:H(e),Array.isArray(r)?r:[r],n],signal:i});if(s==="WaitForLocalExecution")try{await this.waitForTransaction({digest:a.digest})}catch{}return a}async signAndExecuteTransaction({transaction:e,signer:r,...n}){let s;e instanceof Uint8Array?s=e:(e.setSenderIfNotSet(r.toSuiAddress()),s=await e.build({client:this}));const{signature:i,bytes:a}=await r.signTransaction(s);return this.executeTransactionBlock({transactionBlock:a,signature:i,...n})}async getTotalTransactionBlocks({signal:e}={}){const r=await this.transport.request({method:"sui_getTotalTransactionBlocks",params:[],signal:e});return BigInt(r)}async getReferenceGasPrice({signal:e}={}){const r=await this.transport.request({method:"suix_getReferenceGasPrice",params:[],signal:e});return BigInt(r)}async getStakes(e){if(!e.owner||!Ie(P(e.owner)))throw new Error("Invalid Sui address");return await this.transport.request({method:"suix_getStakes",params:[e.owner],signal:e.signal})}async getStakesByIds(e){return e.stakedSuiIds.forEach(r=>{if(!r||!Pt(xe(r)))throw new Error(`Invalid Sui Stake id ${r}`)}),await this.transport.request({method:"suix_getStakesByIds",params:[e.stakedSuiIds],signal:e.signal})}async getLatestSuiSystemState({signal:e}={}){return await this.transport.request({method:"suix_getLatestSuiSystemState",params:[],signal:e})}async queryEvents(e){return await this.transport.request({method:"suix_queryEvents",params:[e.query,e.cursor,e.limit,(e.order||"descending")==="descending"],signal:e.signal})}async subscribeEvent(e){return this.transport.subscribe({method:"suix_subscribeEvent",unsubscribe:"suix_unsubscribeEvent",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async subscribeTransaction(e){return this.transport.subscribe({method:"suix_subscribeTransaction",unsubscribe:"suix_unsubscribeTransaction",params:[e.filter],onMessage:e.onMessage,signal:e.signal})}async devInspectTransactionBlock(e){var n,s;let r;if(ks(e.transactionBlock))e.transactionBlock.setSenderIfNotSet(e.sender),r=H(await e.transactionBlock.build({client:this,onlyTransactionKind:!0}));else if(typeof e.transactionBlock=="string")r=e.transactionBlock;else if(e.transactionBlock instanceof Uint8Array)r=H(e.transactionBlock);else throw new Error("Unknown transaction block format.");return(n=e.signal)==null||n.throwIfAborted(),await this.transport.request({method:"sui_devInspectTransactionBlock",params:[e.sender,r,(s=e.gasPrice)==null?void 0:s.toString(),e.epoch],signal:e.signal})}async dryRunTransactionBlock(e){return await this.transport.request({method:"sui_dryRunTransactionBlock",params:[typeof e.transactionBlock=="string"?e.transactionBlock:H(e.transactionBlock)]})}async getDynamicFields(e){if(!e.parentId||!Pt(xe(e.parentId)))throw new Error("Invalid Sui Object id");return await this.transport.request({method:"suix_getDynamicFields",params:[e.parentId,e.cursor,e.limit],signal:e.signal})}async getDynamicFieldObject(e){return await this.transport.request({method:"suix_getDynamicFieldObject",params:[e.parentId,e.name],signal:e.signal})}async getLatestCheckpointSequenceNumber({signal:e}={}){const r=await this.transport.request({method:"sui_getLatestCheckpointSequenceNumber",params:[],signal:e});return String(r)}async getCheckpoint(e){return await this.transport.request({method:"sui_getCheckpoint",params:[e.id],signal:e.signal})}async getCheckpoints(e){return await this.transport.request({method:"sui_getCheckpoints",params:[e.cursor,e==null?void 0:e.limit,e.descendingOrder],signal:e.signal})}async getCommitteeInfo(e){return await this.transport.request({method:"suix_getCommitteeInfo",params:[e==null?void 0:e.epoch],signal:e==null?void 0:e.signal})}async getNetworkMetrics({signal:e}={}){return await this.transport.request({method:"suix_getNetworkMetrics",params:[],signal:e})}async getAddressMetrics({signal:e}={}){return await this.transport.request({method:"suix_getLatestAddressMetrics",params:[],signal:e})}async getEpochMetrics(e){return await this.transport.request({method:"suix_getEpochMetrics",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getAllEpochAddressMetrics(e){return await this.transport.request({method:"suix_getAllEpochAddressMetrics",params:[e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getEpochs(e){return await this.transport.request({method:"suix_getEpochs",params:[e==null?void 0:e.cursor,e==null?void 0:e.limit,e==null?void 0:e.descendingOrder],signal:e==null?void 0:e.signal})}async getMoveCallMetrics({signal:e}={}){return await this.transport.request({method:"suix_getMoveCallMetrics",params:[],signal:e})}async getCurrentEpoch({signal:e}={}){return await this.transport.request({method:"suix_getCurrentEpoch",params:[],signal:e})}async getValidatorsApy({signal:e}={}){return await this.transport.request({method:"suix_getValidatorsApy",params:[],signal:e})}async getChainIdentifier({signal:e}={}){const r=await this.getCheckpoint({id:"0",signal:e}),n=It(r.digest);return at(n.slice(0,4))}async resolveNameServiceAddress(e){return await this.transport.request({method:"suix_resolveNameServiceAddress",params:[e.name],signal:e.signal})}async resolveNameServiceNames({format:e="dot",...r}){const{nextCursor:n,hasNextPage:s,data:i}=await this.transport.request({method:"suix_resolveNameServiceNames",params:[r.address,r.cursor,r.limit],signal:r.signal});return{hasNextPage:s,nextCursor:n,data:i.map(a=>li(a,e))}}async getProtocolConfig(e){return await this.transport.request({method:"sui_getProtocolConfig",params:[e==null?void 0:e.version],signal:e==null?void 0:e.signal})}async waitForTransaction({signal:e,timeout:r=60*1e3,pollInterval:n=2*1e3,...s}){const i=AbortSignal.timeout(r),a=new Promise((o,c)=>{i.addEventListener("abort",()=>c(i.reason))});for(a.catch(()=>{});!i.aborted;){e==null||e.throwIfAborted();try{return await this.getTransactionBlock(s)}catch{await Promise.race([new Promise(c=>setTimeout(c,n)),a])}}throw i.throwIfAborted(),new Error("Unexpected error while waiting for transaction block.")}experimental_asClientExtension(){return{name:"jsonRPC",register:()=>this}}}var zo=function(t,e,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!n:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(t):n?n.value:e.get(t)},Wo=function(t,e,r,n,s){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?s.call(t,r):s?s.value=r:e.set(t,r),r},Rt;let ht;const nr=new Set;function qo(t){Ot=void 0,nr.add(t)}function Ko(t){Ot=void 0,nr.delete(t)}const nt={};function Ho(){if(ht||(ht=Object.freeze({register:fn,get:Xo,on:Qo}),typeof window>"u"))return ht;const t=Object.freeze({register:fn});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new Jo(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return ht}function fn(...t){var e;return t=t.filter(r=>!nr.has(r)),t.length?(t.forEach(r=>qo(r)),(e=nt.register)==null||e.forEach(r=>hn(()=>r(...t))),function(){var n;t.forEach(s=>Ko(s)),(n=nt.unregister)==null||n.forEach(s=>hn(()=>s(...t)))}):()=>{}}let Ot;function Xo(){return Ot||(Ot=[...nr]),Ot}function Qo(t,e){var r;return(r=nt[t])!=null&&r.push(e)||(nt[t]=[e]),function(){var s;nt[t]=(s=nt[t])==null?void 0:s.filter(i=>e!==i)}}function hn(t){try{t()}catch(e){console.error(e)}}class Jo extends Event{get detail(){return zo(this,Rt,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),Rt.set(this,void 0),Wo(this,Rt,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}Rt=new WeakMap;async function Yo(t,e){if(t.features["sui:signTransaction"])return t.features["sui:signTransaction"].signTransaction(e);if(!t.features["sui:signTransactionBlock"])throw new Error(`Provided wallet (${t.name}) does not support the signTransaction feature.`);const{signTransactionBlock:r}=t.features["sui:signTransactionBlock"],n=qr.from(await e.transaction.toJSON()),{transactionBlockBytes:s,signature:i}=await r({transactionBlock:n,account:e.account,chain:e.chain});return{bytes:s,signature:i}}const ze=class ze{constructor(){lt(this,"state",{wallet:null,accounts:null,isConnected:!1,suiClient:null});lt(this,"listeners",[]);this.state.wallet=null,this.state.suiClient=new Fo({url:Fs("testnet")})}getSuiWallet(){const e=Ho().get();this.state.wallet=e.find(r=>r.name==="Sui Wallet")||null}static getInstance(){return ze.instance||(ze.instance=new ze),ze.instance}getClient(){return this.state.suiClient}getState(){return{...this.state}}setState(e){this.state={...this.state,...e},this.notifyListeners()}subscribe(e){return this.listeners.push(e),()=>{this.listeners=this.listeners.filter(r=>r!==e)}}notifyListeners(){this.listeners.forEach(e=>e(this.state))}setAccounts(e){this.setState({accounts:e,isConnected:!!e})}};lt(ze,"instance");let jr=ze;const Qe=jr.getInstance();setTimeout(()=>{Qe.getSuiWallet()},500);async function Zo(){const{wallet:t}=Qe.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:connect"])throw Error(`Provided wallet (${t.name}) does not support the connect feature.`);const r=(await t.features["standard:connect"].connect()).accounts.filter(n=>n.chains.some(s=>s.split(":")[0]==="sui"));return Qe.setAccounts(r),js(r[0].address),r}async function eu(){const{wallet:t}=Qe.getState();if(!t)throw Error("No wallet available");if(!t.features["standard:disconnect"])throw Error(`Provided wallet (${t.name}) does not support the disconnect feature.`);await t.features["standard:disconnect"].disconnect(),Qe.setAccounts(null),js("")}async function tu(){const t=new qr,e=t.splitCoins(t.gas,[10**3]);t.transferObjects([e],"0x0b3fc768f8bb3c772321e3e7781cac4a45585b4bc64043686beb634d65341798"),await ru(t)}async function ru(t){const e=Qe.getClient();if(!e)throw Error("fail to initlize suiClient");const{wallet:r,accounts:n}=Qe.getState();if(!r||!n)throw Error("No Connected wallet account");t.setGasBudget(1e6);const{bytes:s,signature:i}=await Yo(r,{transaction:{async toJSON(){return await t.toJSON({supportedIntents:[],client:e})}},account:n[0],chain:"sui:testnet"}),a=await e.executeTransactionBlock({transactionBlock:s,signature:i});console.log({result:a})}let Be;const nu=t=>Be=t,Ts=typeof TextDecoder<"u"?new TextDecoder("utf-8",{ignoreBOM:!0,fatal:!0}):{decode:()=>{throw Error("TextDecoder not available")}};typeof TextDecoder<"u"&&Ts.decode();let Dt=null;function Vt(){return(Dt===null||Dt.byteLength===0)&&(Dt=new Uint8Array(Be.memory.buffer)),Dt}function su(t,e){return t=t>>>0,Ts.decode(Vt().subarray(t,t+e))}let Ar=0;const Gt=typeof TextEncoder<"u"?new TextEncoder("utf-8"):{encode:()=>{throw Error("TextEncoder not available")}},iu=typeof Gt.encodeInto=="function"?function(t,e){return Gt.encodeInto(t,e)}:function(t,e){const r=Gt.encode(t);return e.set(r),{read:t.length,written:r.length}};function au(t,e,r){if(r===void 0){const o=Gt.encode(t),c=e(o.length,1)>>>0;return Vt().subarray(c,c+o.length).set(o),Ar=o.length,c}let n=t.length,s=e(n,1)>>>0;const i=Vt();let a=0;for(;a<n;a++){const o=t.charCodeAt(a);if(o>127)break;i[s+a]=o}if(a!==n){a!==0&&(t=t.slice(a)),s=r(s,n,n=a+t.length*3,1)>>>0;const o=Vt().subarray(s+a,s+n),c=iu(t,o);a+=c.written,s=r(s,n,a,1)>>>0}return Ar=a,s}function js(t){const e=au(t,Be.__wbindgen_malloc,Be.__wbindgen_realloc),r=Ar;Be.update_sui_address(e,r)}function ou(){const t={};return t.wbg={},t.wbg.__wbg_log_242335a0403ba73a=function(e,r){console.log(su(e,r))},t.wbg.__wbg_requestConnect_23f392dbaea78b16=function(){Zo()},t.wbg.__wbg_requestDisconnect_5f9126d4b90cbbcd=function(){eu()},t.wbg.__wbg_requestPaidTransaction_f555f8b073f9944b=function(){tu()},t.wbg.__wbindgen_init_externref_table=function(){const e=Be.__wbindgen_export_0,r=e.grow(4);e.set(0,void 0),e.set(r+0,void 0),e.set(r+1,null),e.set(r+2,!0),e.set(r+3,!1)},t.wbg}async function uu(t){return Be!==void 0?Be:(typeof t<"u"&&(Object.getPrototypeOf(t)===Object.prototype?{module_or_path:t}=t:console.warn("using deprecated parameters for the initialization function; pass a single object instead")),typeof t>"u"&&(t=new URL("/Autonomous-World/assets/autonomous-game_bg-BM8TmZOx.wasm",import.meta.url)),ou())}const Bt=2,U=document.querySelector("#glcanvas");var h,gt=null,Z,it,Ee,l,x,hr,ut,Ft=[];function cu(t){if(t==1){let e=function(i){var a=i.getExtension("OES_vertex_array_object");a?(i.createVertexArray=function(){return a.createVertexArrayOES()},i.deleteVertexArray=function(o){a.deleteVertexArrayOES(o)},i.bindVertexArray=function(o){a.bindVertexArrayOES(o)},i.isVertexArray=function(o){return a.isVertexArrayOES(o)}):alert("Unable to get OES_vertex_array_object extension")},r=function(i){var a=i.getExtension("ANGLE_instanced_arrays");a&&(i.vertexAttribDivisor=function(o,c){a.vertexAttribDivisorANGLE(o,c)},i.drawArraysInstanced=function(o,c,f,d){a.drawArraysInstancedANGLE(o,c,f,d)},i.drawElementsInstanced=function(o,c,f,d,g){a.drawElementsInstancedANGLE(o,c,f,d,g)})},n=function(i){var a=i.getExtension("EXT_disjoint_timer_query");a&&(i.createQuery=function(){return a.createQueryEXT()},i.beginQuery=function(o,c){return a.beginQueryEXT(o,c)},i.endQuery=function(o){return a.endQueryEXT(o)},i.deleteQuery=function(o){a.deleteQueryEXT(o)},i.getQueryObject=function(o,c){return a.getQueryObjectEXT(o,c)})},s=function(i){var a=i.getExtension("WEBGL_draw_buffers");a&&(i.drawBuffers=function(o){return a.drawBuffersWEBGL(o)})};h=U.getContext("webgl");try{h.getExtension("EXT_shader_texture_lod"),h.getExtension("OES_standard_derivatives")}catch(i){console.warn(i)}e(h),r(h),n(h),s(h),h.getExtension("WEBGL_depth_texture")==null&&alert("Cant initialize WEBGL_depth_texture extension")}else h=U.getContext("webgl2");h===null&&alert("Unable to initialize WebGL. Your browser or machine may not support it.")}U.focus(),U.requestPointerLock=U.requestPointerLock||U.mozRequestPointerLock||function(){},document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||function(){};function W(t,e){t==!1&&alert(e)}function I(t,e,r){return new e(Z.buffer,t,r)}function G(t,e){let r=new Uint8Array(Z.buffer,t);for(var n,s,i,a,o=0,c=o+e,f="";!(o>=c);){if(n=r[o++],!n)return f;if(!(n&128)){f+=String.fromCharCode(n);continue}if(s=r[o++]&63,(n&224)==192){f+=String.fromCharCode((n&31)<<6|s);continue}i=r[o++]&63,(n&240)==224?n=(n&15)<<12|s<<6|i:((n&248)!=240&&console.warn("Invalid UTF-8 leading byte 0x"+n.toString(16)+" encountered when deserializing a UTF-8 string on the asm.js/wasm heap to a JS string!"),n=(n&7)<<18|s<<12|i<<6|r[o++]&63),n<65536?f+=String.fromCharCode(n):(a=n-65536,f+=String.fromCharCode(55296|a>>10,56320|a&1023))}return f}function gr(t,e,r,n){for(var s,i,a=r,o=r+n,c=0;c<t.length;++c)if(s=t.charCodeAt(c),s>=55296&&s<=57343&&(i=t.charCodeAt(++c),s=65536+((s&1023)<<10)|i&1023),s<=127){if(r>=o)break;e[r++]=s}else if(s<=2047){if(r+1>=o)break;e[r++]=192|s>>6,e[r++]=128|s&63}else if(s<=65535){if(r+2>=o)break;e[r++]=224|s>>12,e[r++]=128|s>>6&63,e[r++]=128|s&63}else{if(r+3>=o)break;s>=2097152&&console.warn("Invalid Unicode code point 0x"+s.toString(16)+" encountered when serializing a JS string to an UTF-8 string on the asm.js/wasm heap! (Valid unicode code points should be in range 0-0x1FFFFF)."),e[r++]=240|s>>18,e[r++]=128|s>>12&63,e[r++]=128|s>>6&63,e[r++]=128|s&63}return r-a}Ee={loaded_files:[],unique_id:0},l={counter:1,buffers:[],mappedBuffers:{},programs:[],framebuffers:[],renderbuffers:[],textures:[],uniforms:[],shaders:[],vaos:[],timerQueries:[],contexts:{},programInfos:{},getNewId:function(t){for(var e=l.counter++,r=t.length;r<e;r++)t[r]=null;return e},validateGLObjectID:function(t,e,r,n){e!=0&&(t[e]===null?console.error(r+" called with an already deleted "+n+" ID "+e+"!"):t[e]||console.error(r+" called with an invalid "+n+" ID "+e+"!"))},getSource:function(t,e,r,n){for(var s,i="",a=0;a<e;++a)s=n==0?void 0:I(n+a*4,Uint32Array,1)[0],i+=G(I(r+a*4,Uint32Array,1)[0],s);return i},populateUniformTable:function(t){l.validateGLObjectID(l.programs,t,"populateUniformTable","program");for(var e,r,n,s,i,a,o=l.programs[t],c=l.programInfos[t]={uniforms:{},maxUniformLength:0,maxAttributeLength:-1,maxUniformBlockNameLength:-1},f=c.uniforms,d=h.getProgramParameter(o,35718),g=0;g<d;++g)if(s=h.getActiveUniform(o,g),e=s.name,c.maxUniformLength=Math.max(c.maxUniformLength,e.length+1),e.slice(-1)=="]"&&(e=e.slice(0,e.lastIndexOf("["))),r=h.getUniformLocation(o,e),r)for(n=l.getNewId(l.uniforms),f[e]=[s.size,n],l.uniforms[n]=r,i=1;i<s.size;++i)a=e+"["+i+"]",r=h.getUniformLocation(o,a),n=l.getNewId(l.uniforms),l.uniforms[n]=r}};function Ze(t,e,r,n,s){for(var i,a,o=0;o<t;o++)i=h[r](),a=i&&l.getNewId(n),i?(i.name=a,n[a]=i):(console.error("GL_INVALID_OPERATION"),l.recordError(1282),alert("GL_INVALID_OPERATION in "+s+": GLctx."+r+" returned null - most likely GL context is lost!")),I(e+o*4,Int32Array,1)[0]=a}function lu(t,e,r){if(!e){console.error("GL_INVALID_VALUE in glGet"+r+"v(name="+t+": Function called with null out pointer!"),l.recordError(1281);return}var n,s,i,a=void 0;switch(t){case 36346:a=1;break;case 36344:return;case 34814:case 36345:a=0;break;case 34466:s=h.getParameter(34467),a=s?s.length:0;break;case 33309:W(!1,"unimplemented");break;case 33307:case 33308:W(!1,"unimplemented");break}if(a===void 0)switch(n=h.getParameter(t),typeof n){case"number":a=n;break;case"boolean":a=n?1:0;break;case"string":l.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+r+"v("+t+") on a name which returns a string!");return;case"object":if(n===null)switch(t){case 34964:case 35725:case 34965:case 36006:case 36007:case 32873:case 34229:case 35097:case 36389:case 34068:{a=0;break}default:{l.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+r+"v("+t+") and it returns null!");return}}else if(n instanceof Float32Array||n instanceof Uint32Array||n instanceof Int32Array||n instanceof Array){for(i=0;i<n.length;++i)W(!1,"unimplemented");return}else try{a=n.name|0}catch(o){l.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+r+"v: Unknown object returned from WebGL getParameter("+t+")! (error: "+o+")");return}break;default:l.recordError(1280),console.error("GL_INVALID_ENUM in glGet"+r+"v: Native code calling glGet"+r+"v("+t+") and it returns "+n+" of type "+typeof n+"!");return}switch(r){case"EM_FUNC_SIG_PARAM_I64":I(e,Int32Array,1)[0]=a;case"EM_FUNC_SIG_PARAM_I":I(e,Int32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_F":I(e,Float32Array,1)[0]=a;break;case"EM_FUNC_SIG_PARAM_B":I(e,Int8Array,1)[0]=a?1:0;break;default:throw"internal glGet error, bad type: "+r}}function pr(t,e){var r=Yt(),n=t.clientWidth*r,s=t.clientHeight*r;(t.width!=n||t.height!=s)&&(t.width=n,t.height=s,e!=null&&e(Math.floor(n),Math.floor(s)))}function Cr(){x.frame(),window.blocking_event_loop||(it&&window.cancelAnimationFrame(it),it=window.requestAnimationFrame(Cr))}const du=10,fu=11,hu=12,gu=13,gn=1,pn=2,mn=4;function bn(t){switch(t){case 0:return 0;case 1:return 2;case 2:return 1;default:return t}}function mr(t){switch(t){case"Space":return 32;case"Quote":return 222;case"Comma":return 44;case"Minus":return 45;case"Period":return 46;case"Slash":return 189;case"Digit0":return 48;case"Digit1":return 49;case"Digit2":return 50;case"Digit3":return 51;case"Digit4":return 52;case"Digit5":return 53;case"Digit6":return 54;case"Digit7":return 55;case"Digit8":return 56;case"Digit9":return 57;case"Semicolon":return 59;case"Equal":return 61;case"KeyA":return 65;case"KeyB":return 66;case"KeyC":return 67;case"KeyD":return 68;case"KeyE":return 69;case"KeyF":return 70;case"KeyG":return 71;case"KeyH":return 72;case"KeyI":return 73;case"KeyJ":return 74;case"KeyK":return 75;case"KeyL":return 76;case"KeyM":return 77;case"KeyN":return 78;case"KeyO":return 79;case"KeyP":return 80;case"KeyQ":return 81;case"KeyR":return 82;case"KeyS":return 83;case"KeyT":return 84;case"KeyU":return 85;case"KeyV":return 86;case"KeyW":return 87;case"KeyX":return 88;case"KeyY":return 89;case"KeyZ":return 90;case"BracketLeft":return 91;case"Backslash":return 92;case"BracketRight":return 93;case"Backquote":return 96;case"Escape":return 256;case"Enter":return 257;case"Tab":return 258;case"Backspace":return 259;case"Insert":return 260;case"Delete":return 261;case"ArrowRight":return 262;case"ArrowLeft":return 263;case"ArrowDown":return 264;case"ArrowUp":return 265;case"PageUp":return 266;case"PageDown":return 267;case"Home":return 268;case"End":return 269;case"CapsLock":return 280;case"ScrollLock":return 281;case"NumLock":return 282;case"PrintScreen":return 283;case"Pause":return 284;case"F1":return 290;case"F2":return 291;case"F3":return 292;case"F4":return 293;case"F5":return 294;case"F6":return 295;case"F7":return 296;case"F8":return 297;case"F9":return 298;case"F10":return 299;case"F11":return 300;case"F12":return 301;case"F13":return 302;case"F14":return 303;case"F15":return 304;case"F16":return 305;case"F17":return 306;case"F18":return 307;case"F19":return 308;case"F20":return 309;case"F21":return 310;case"F22":return 311;case"F23":return 312;case"F24":return 313;case"Numpad0":return 320;case"Numpad1":return 321;case"Numpad2":return 322;case"Numpad3":return 323;case"Numpad4":return 324;case"Numpad5":return 325;case"Numpad6":return 326;case"Numpad7":return 327;case"Numpad8":return 328;case"Numpad9":return 329;case"NumpadDecimal":return 330;case"NumpadDivide":return 331;case"NumpadMultiply":return 332;case"NumpadSubtract":return 333;case"NumpadAdd":return 334;case"NumpadEnter":return 335;case"NumpadEqual":return 336;case"ShiftLeft":return 340;case"ControlLeft":return 341;case"AltLeft":return 342;case"OSLeft":return 343;case"ShiftRight":return 344;case"ControlRight":return 345;case"AltRight":return 346;case"OSRight":return 347;case"ContextMenu":return 348}console.log("Unsupported keyboard key: ",t)}function Yt(){return 1}function br(t,e,r){return t==h.ALPHA?e*r:t==h.RGB?e*r*3:t==h.RGBA?e*r*4:e*r*3}function Ve(t,e){var r=U.getBoundingClientRect(),n=(t-r.left)*Yt(),s=(e-r.top)*Yt();return{x:n,y:s}}hr=!1,ut={env:{console_debug:function(t){console.debug(G(t))},console_log:function(t){console.log(G(t))},console_info:function(t){console.info(G(t))},console_warn:function(t){console.warn(G(t))},console_error:function(t){console.error(G(t))},set_emscripten_shader_hack:function(t){hr=t},sapp_set_clipboard:function(t,e){gt=G(t,e)},dpi_scale:Yt,rand:function(){return Math.floor(Math.random()*2147483647)},now:function(){return Date.now()/1e3},canvas_width:function(){return Math.floor(U.width)},canvas_height:function(){return Math.floor(U.height)},glClearDepthf:function(t){h.clearDepth(t)},glClearColor:function(t,e,r,n){h.clearColor(t,e,r,n)},glClearStencil:function(t){h.clearStencil(t)},glColorMask:function(t,e,r,n){h.colorMask(t,e,r,n)},glScissor:function(t,e,r,n){h.scissor(t,e,r,n)},glClear:function(t){h.clear(t)},glGenTextures:function(t,e){Ze(t,e,"createTexture",l.textures,"glGenTextures")},glActiveTexture:function(t){h.activeTexture(t)},glBindTexture:function(t,e){l.validateGLObjectID(l.textures,e,"glBindTexture","texture"),h.bindTexture(t,l.textures[e])},glTexImage2D:function(t,e,r,n,s,i,a,o,c){h.texImage2D(t,e,r,n,s,i,a,o,c?I(c,Uint8Array,br(r,n,s)):null)},glTexSubImage2D:function(t,e,r,n,s,i,a,o,c){h.texSubImage2D(t,e,r,n,s,i,a,o,c?I(c,Uint8Array,br(a,s,i)):null)},glReadPixels:function(t,e,r,n,s,i,a){var o=I(a,Uint8Array,br(s,r,n));h.readPixels(t,e,r,n,s,i,o)},glTexParameteri:function(t,e,r){h.texParameteri(t,e,r)},glUniform1fv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform1fv","location"),W((r&3)==0,"Pointer to float data passed to glUniform1fv must be aligned to four bytes!");var n=I(r,Float32Array,1*e);h.uniform1fv(l.uniforms[t],n)},glUniform2fv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform2fv","location"),W((r&3)==0,"Pointer to float data passed to glUniform2fv must be aligned to four bytes!");var n=I(r,Float32Array,2*e);h.uniform2fv(l.uniforms[t],n)},glUniform3fv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform3fv","location"),W((r&3)==0,"Pointer to float data passed to glUniform3fv must be aligned to four bytes!");var n=I(r,Float32Array,3*e);h.uniform3fv(l.uniforms[t],n)},glUniform4fv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform4fv","location"),W((r&3)==0,"Pointer to float data passed to glUniform4fv must be aligned to four bytes!");var n=I(r,Float32Array,4*e);h.uniform4fv(l.uniforms[t],n)},glUniform1iv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform1fv","location"),W((r&3)==0,"Pointer to i32 data passed to glUniform1iv must be aligned to four bytes!");var n=I(r,Int32Array,1*e);h.uniform1iv(l.uniforms[t],n)},glUniform2iv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform2fv","location"),W((r&3)==0,"Pointer to i32 data passed to glUniform2iv must be aligned to four bytes!");var n=I(r,Int32Array,2*e);h.uniform2iv(l.uniforms[t],n)},glUniform3iv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform3fv","location"),W((r&3)==0,"Pointer to i32 data passed to glUniform3iv must be aligned to four bytes!");var n=I(r,Int32Array,3*e);h.uniform3iv(l.uniforms[t],n)},glUniform4iv:function(t,e,r){l.validateGLObjectID(l.uniforms,t,"glUniform4fv","location"),W((r&3)==0,"Pointer to i32 data passed to glUniform4iv must be aligned to four bytes!");var n=I(r,Int32Array,4*e);h.uniform4iv(l.uniforms[t],n)},glBlendFunc:function(t,e){h.blendFunc(t,e)},glBlendEquationSeparate:function(t,e){h.blendEquationSeparate(t,e)},glDisable:function(t){h.disable(t)},glDrawElements:function(t,e,r,n){h.drawElements(t,e,r,n)},glGetIntegerv:function(t,e){lu(t,e,"EM_FUNC_SIG_PARAM_I")},glUniform1f:function(t,e){l.validateGLObjectID(l.uniforms,t,"glUniform1f","location"),h.uniform1f(l.uniforms[t],e)},glUniform1i:function(t,e){l.validateGLObjectID(l.uniforms,t,"glUniform1i","location"),h.uniform1i(l.uniforms[t],e)},glGetAttribLocation:function(t,e){return h.getAttribLocation(l.programs[t],G(e))},glEnableVertexAttribArray:function(t){h.enableVertexAttribArray(t)},glDisableVertexAttribArray:function(t){h.disableVertexAttribArray(t)},glVertexAttribPointer:function(t,e,r,n,s,i){h.vertexAttribPointer(t,e,r,!!n,s,i)},glVertexAttribIPointer:function(t,e,r,n,s){h.vertexAttribIPointer(t,e,r,n,s)},glGetUniformLocation:function(t,e){l.validateGLObjectID(l.programs,t,"glGetUniformLocation","program"),e=G(e);var r,n,s=0;return e[e.length-1]=="]"&&(r=e.lastIndexOf("["),s=e[r+1]!="]"?parseInt(e.slice(r+1)):0,e=e.slice(0,r)),n=l.programInfos[t]&&l.programInfos[t].uniforms[e],n&&s>=0&&s<n[0]?n[1]+s:-1},glUniformMatrix4fv:function(t,e,r,n){l.validateGLObjectID(l.uniforms,t,"glUniformMatrix4fv","location"),W((n&3)==0,"Pointer to float data passed to glUniformMatrix4fv must be aligned to four bytes!");var s=I(n,Float32Array,16);h.uniformMatrix4fv(l.uniforms[t],!!r,s)},glUseProgram:function(t){l.validateGLObjectID(l.programs,t,"glUseProgram","program"),h.useProgram(l.programs[t])},glGenVertexArrays:function(t,e){Ze(t,e,"createVertexArray",l.vaos,"glGenVertexArrays")},glGenFramebuffers:function(t,e){Ze(t,e,"createFramebuffer",l.framebuffers,"glGenFramebuffers")},glGenRenderbuffers:function(t,e){Ze(t,e,"createRenderbuffer",l.renderbuffers,"glGenRenderbuffers")},glBindVertexArray:function(t){h.bindVertexArray(l.vaos[t])},glBindFramebuffer:function(t,e){l.validateGLObjectID(l.framebuffers,e,"glBindFramebuffer","framebuffer"),h.bindFramebuffer(t,l.framebuffers[e])},glBindRenderbuffer:function(t,e){l.validateGLObjectID(l.renderbuffers,e,"glBindRenderbuffer","renderbuffer"),h.bindRenderbuffer(t,l.renderbuffers[e])},glGenBuffers:function(t,e){Ze(t,e,"createBuffer",l.buffers,"glGenBuffers")},glBindBuffer:function(t,e){l.validateGLObjectID(l.buffers,e,"glBindBuffer","buffer"),h.bindBuffer(t,l.buffers[e])},glBufferData:function(t,e,r,n){h.bufferData(t,r?I(r,Uint8Array,e):e,n)},glBufferSubData:function(t,e,r,n){h.bufferSubData(t,e,n?I(n,Uint8Array,r):r)},glEnable:function(t){h.enable(t)},glFlush:function(){h.flush()},glFinish:function(){h.finish()},glDepthFunc:function(t){h.depthFunc(t)},glBlendFuncSeparate:function(t,e,r,n){h.blendFuncSeparate(t,e,r,n)},glViewport:function(t,e,r,n){h.viewport(t,e,r,n)},glDrawArrays:function(t,e,r){h.drawArrays(t,e,r)},glDrawBuffers:function(t,e){h.drawBuffers(I(e,Int32Array,t))},glCreateProgram:function(){var t=l.getNewId(l.programs),e=h.createProgram();return e.name=t,l.programs[t]=e,t},glAttachShader:function(t,e){l.validateGLObjectID(l.programs,t,"glAttachShader","program"),l.validateGLObjectID(l.shaders,e,"glAttachShader","shader"),h.attachShader(l.programs[t],l.shaders[e])},glDetachShader:function(t,e){l.validateGLObjectID(l.programs,t,"glDetachShader","program"),l.validateGLObjectID(l.shaders,e,"glDetachShader","shader"),h.detachShader(l.programs[t],l.shaders[e])},glLinkProgram:function(t){l.validateGLObjectID(l.programs,t,"glLinkProgram","program"),h.linkProgram(l.programs[t]),l.populateUniformTable(t)},glPixelStorei:function(t,e){h.pixelStorei(t,e)},glFramebufferTexture2D:function(t,e,r,n,s){l.validateGLObjectID(l.textures,n,"glFramebufferTexture2D","texture"),h.framebufferTexture2D(t,e,r,l.textures[n],s)},glGetProgramiv:function(t,e,r){if(W(r),l.validateGLObjectID(l.programs,t,"glGetProgramiv","program"),t>=l.counter){console.error("GL_INVALID_VALUE in glGetProgramiv");return}var n,s=l.programInfos[t];if(!s){console.error("GL_INVALID_OPERATION in glGetProgramiv(program="+t+", pname="+e+", p=0x"+r.toString(16)+"): The specified GL object name does not refer to a program object!");return}if(e==35716)n=h.getProgramInfoLog(l.programs[t]),W(n!==null),I(r,Int32Array,1)[0]=n.length+1;else if(e==35719){console.error("unsupported operation");return}else if(e==35722){console.error("unsupported operation");return}else if(e==35381){console.error("unsupported operation");return}else I(r,Int32Array,1)[0]=h.getProgramParameter(l.programs[t],e)},glCreateShader:function(t){var e=l.getNewId(l.shaders);return l.shaders[e]=h.createShader(t),e},glStencilFuncSeparate:function(t,e,r,n){h.stencilFuncSeparate(t,e,r,n)},glStencilMaskSeparate:function(t,e){h.stencilMaskSeparate(t,e)},glStencilOpSeparate:function(t,e,r,n){h.stencilOpSeparate(t,e,r,n)},glFrontFace:function(t){h.frontFace(t)},glCullFace:function(t){h.cullFace(t)},glCopyTexImage2D:function(t,e,r,n,s,i,a,o){h.copyTexImage2D(t,e,r,n,s,i,a,o)},glShaderSource:function(t,e,r,n){l.validateGLObjectID(l.shaders,t,"glShaderSource","shader");var s,i=l.getSource(t,e,r,n);hr&&(i=i.replace(/#extension GL_OES_standard_derivatives : enable/g,""),i=i.replace(/#extension GL_EXT_shader_texture_lod : enable/g,""),s="",i.indexOf("gl_FragColor")!=-1&&(s+=`out mediump vec4 GL_FragColor;
`,i=i.replace(/gl_FragColor/g,"GL_FragColor")),i.indexOf("attribute")!=-1?(i=i.replace(/attribute/g,"in"),i=i.replace(/varying/g,"out")):i=i.replace(/varying/g,"in"),i=i.replace(/textureCubeLodEXT/g,"textureCubeLod"),i=i.replace(/texture2DLodEXT/g,"texture2DLod"),i=i.replace(/texture2DProjLodEXT/g,"texture2DProjLod"),i=i.replace(/texture2DGradEXT/g,"texture2DGrad"),i=i.replace(/texture2DProjGradEXT/g,"texture2DProjGrad"),i=i.replace(/textureCubeGradEXT/g,"textureCubeGrad"),i=i.replace(/textureCube/g,"texture"),i=i.replace(/texture1D/g,"texture"),i=i.replace(/texture2D/g,"texture"),i=i.replace(/texture3D/g,"texture"),i=i.replace(/#version 100/g,`#version 300 es
`+s)),h.shaderSource(l.shaders[t],i)},glGetProgramInfoLog:function(t,e,r,n){l.validateGLObjectID(l.programs,t,"glGetProgramInfoLog","program");var s,i=h.getProgramInfoLog(l.programs[t]);W(i!==null);let a=I(n,Uint8Array,e);for(s=0;s<e;s++)a[s]=i.charCodeAt(s)},glGetString:function(t){var e=h.getParameter(t).toString(),r=e.length+1,n=x.allocate_vec_u8(r),s=new Uint8Array(Z.buffer,n,r);return s[e.length]=0,gr(e,s,0,r),n},glCompileShader:function(t){l.validateGLObjectID(l.shaders,t,"glCompileShader","shader"),h.compileShader(l.shaders[t])},glGetShaderiv:function(t,e,r){if(W(r),l.validateGLObjectID(l.shaders,t,"glGetShaderiv","shader"),e==35716){var n,s,i=h.getShaderInfoLog(l.shaders[t]);W(i!==null),I(r,Int32Array,1)[0]=i.length+1}else e==35720?(n=h.getShaderSource(l.shaders[t]),s=n===null||n.length==0?0:n.length+1,I(r,Int32Array,1)[0]=s):I(r,Int32Array,1)[0]=h.getShaderParameter(l.shaders[t],e)},glGetShaderInfoLog:function(t,e,r,n){l.validateGLObjectID(l.shaders,t,"glGetShaderInfoLog","shader");var s,i=h.getShaderInfoLog(l.shaders[t]);W(i!==null);let a=I(n,Uint8Array,e);for(s=0;s<e;s++)a[s]=i.charCodeAt(s)},glVertexAttribDivisor:function(t,e){h.vertexAttribDivisor(t,e)},glDrawArraysInstanced:function(t,e,r,n){h.drawArraysInstanced(t,e,r,n)},glDrawElementsInstanced:function(t,e,r,n,s){h.drawElementsInstanced(t,e,r,n,s)},glDeleteShader:function(t){var e=l.shaders[t];e!=null&&(h.deleteShader(e),l.shaders[t]=null)},glDeleteProgram:function(t){var e=l.programs[t];e!=null&&(h.deleteProgram(e),l.programs[t]=null)},glDeleteBuffers:function(t,e){for(var r,n,s=0;s<t;s++)n=I(e+s*4,Uint32Array,1)[0],r=l.buffers[n],r&&(h.deleteBuffer(r),r.name=0,l.buffers[n]=null)},glDeleteFramebuffers:function(t,e){for(var r,n,s=0;s<t;s++)n=I(e+s*4,Uint32Array,1)[0],r=l.framebuffers[n],r&&(h.deleteFramebuffer(r),r.name=0,l.framebuffers[n]=null)},glDeleteTextures:function(t,e){for(var r,n,s=0;s<t;s++)n=I(e+s*4,Uint32Array,1)[0],r=l.textures[n],r&&(h.deleteTexture(r),r.name=0,l.textures[n]=null)},glGenQueries:function(t,e){Ze(t,e,"createQuery",l.timerQueries,"glGenQueries")},glDeleteQueries:function(t){for(var e,r,n=0;n<t;n++)r=I(textures+n*4,Uint32Array,1)[0],e=l.timerQueries[r],e&&(h.deleteQuery(e),e.name=0,l.timerQueries[r]=null)},glBeginQuery:function(t,e){l.validateGLObjectID(l.timerQueries,e,"glBeginQuery","id"),h.beginQuery(t,l.timerQueries[e])},glEndQuery:function(t){h.endQuery(t)},glGetQueryObjectiv:function(t,e,r){l.validateGLObjectID(l.timerQueries,t,"glGetQueryObjectiv","id");let n=h.getQueryObject(l.timerQueries[t],e);I(r,Uint32Array,1)[0]=n},glGetQueryObjectui64v:function(t,e,r){l.validateGLObjectID(l.timerQueries,t,"glGetQueryObjectui64v","id");let n=h.getQueryObject(l.timerQueries[t],e),s=I(r,Uint32Array,2);s[0]=n,s[1]=(n-s[0])/4294967296},glGenerateMipmap:function(t){h.generateMipmap(t)},setup_canvas_size:function(t){window.high_dpi=t,pr(U)},run_animation_loop:function(t){U.onmousemove=function(n){var s=Ve(n.clientX,n.clientY),i=s.x,a=s.y;x.mouse_move(Math.floor(i),Math.floor(a)),(n.movementX!=0||n.movementY!=0)&&x.raw_mouse_move(Math.floor(n.movementX),Math.floor(n.movementY))},U.onmousedown=function(n){var s=Ve(n.clientX,n.clientY),i=s.x,a=s.y,o=bn(n.button);x.mouse_down(i,a,o)},U.addEventListener("wheel",function(n){n.preventDefault(),x.mouse_wheel(-n.deltaX,-n.deltaY)}),U.onmouseup=function(n){var s=Ve(n.clientX,n.clientY),i=s.x,a=s.y,o=bn(n.button);x.mouse_up(i,a,o)},U.onkeydown=function(n){var s,i=mr(n.code);switch(i){case 32:case 262:case 263:case 264:case 265:case 290:case 291:case 292:case 293:case 294:case 295:case 296:case 297:case 298:case 299:case 259:case 258:case 39:case 47:n.preventDefault();break}s=0,n.ctrlKey&&(s|=pn),n.shiftKey&&(s|=gn),n.altKey&&(s|=mn),x.key_down(i,s,n.repeat),(i==32||i==39||i==47)&&x.key_press(i)},U.onkeyup=function(n){var s=mr(n.code),i=0;n.ctrlKey&&(i|=pn),n.shiftKey&&(i|=gn),n.altKey&&(i|=mn),x.key_up(s,i)},U.onkeypress=function(n){var s=mr(n.code);(s==261||n.ctrlKey)==!1&&x.key_press(n.charCode)},U.addEventListener("touchstart",function(n){n.preventDefault();for(const s of n.changedTouches){let i=Ve(s.clientX,s.clientY);x.touch(du,s.identifier,i.x,i.y)}}),U.addEventListener("touchend",function(n){n.preventDefault();for(const s of n.changedTouches){let i=Ve(s.clientX,s.clientY);x.touch(hu,s.identifier,i.x,i.y)}}),U.addEventListener("touchcancel",function(n){n.preventDefault();for(const s of n.changedTouches){let i=Ve(s.clientX,s.clientY);x.touch(gu,s.identifier,i.x,i.y)}}),U.addEventListener("touchmove",function(n){n.preventDefault();for(const s of n.changedTouches){let i=Ve(s.clientX,s.clientY);x.touch(fu,s.identifier,i.x,i.y)}}),window.onresize=function(){pr(U,x.resize)},window.addEventListener("copy",function(){gt!=null&&(event.clipboardData.setData("text/plain",gt),event.preventDefault())}),window.addEventListener("cut",function(){gt!=null&&(event.clipboardData.setData("text/plain",gt),event.preventDefault())}),window.addEventListener("paste",function(n){n.stopPropagation(),n.preventDefault();var s,i,a,o=n.clipboardData||window.clipboardData,c=o.getData("Text");c!=null&&c.length!=0&&(s=new TextEncoder().encode(c).length,i=x.allocate_vec_u8(s),a=new Uint8Array(Z.buffer,i,s),gr(c,a,0,s),x.on_clipboard_paste(i,s))}),window.ondragover=function(n){n.preventDefault()},window.ondrop=async function(n){n.preventDefault(),x.on_files_dropped_start();for(let s of n.dataTransfer.files){const i=s.name.length,a=x.allocate_vec_u8(i),o=new Uint8Array(Z.buffer,a,i);gr(s.name,o,0,i);const c=await s.arrayBuffer(),f=c.byteLength,d=x.allocate_vec_u8(f);new Uint8Array(Z.buffer,d,f).set(new Uint8Array(c),0),x.on_file_dropped(a,i,d,f)}x.on_files_dropped_finish()};let e=document.hasFocus();var r=function(){let n=document.hasFocus();e==n&&(x.focus(n),e=n)};document.addEventListener("visibilitychange",r),window.addEventListener("focus",r),window.addEventListener("blur",r),window.blocking_event_loop=t,window.requestAnimationFrame(Cr)},fs_load_file:function(t,e){var r,n=G(t,e),s=Ee.unique_id;return Ee.unique_id+=1,r=new XMLHttpRequest,r.open("GET",n,!0),r.responseType="arraybuffer",r.onreadystatechange=function(){if(this.readyState===4)if(this.status===200){var i=new Uint8Array(this.response);Ee.loaded_files[s]=i,x.file_loaded(s)}else Ee.loaded_files[s]=null,x.file_loaded(s)},r.send(),s},fs_get_buffer_size:function(t){return Ee.loaded_files[t]==null?-1:Ee.loaded_files[t].length},fs_take_buffer:function(t,e,r){var n,s,i=Ee.loaded_files[t];for(console.assert(i.length<=r),s=new Uint8Array(Z.buffer,e,r),n=0;n<i.length;n++)s[n]=i[n];delete Ee.loaded_files[t]},sapp_set_cursor_grab:function(t){t?U.requestPointerLock():document.exitPointerLock()},sapp_set_cursor:function(t,e){U.style.cursor=G(t,e)},sapp_is_fullscreen:function(){let t=document.fullscreenElement;return t!=null&&t.id==U.id},sapp_set_fullscreen:function(t){t?U.requestFullscreen():document.exitFullscreen()},sapp_set_window_size:function(t,e){U.width=t,U.height=e,pr(U,x.resize)},sapp_schedule_update:function(){it&&window.cancelAnimationFrame(it),it=window.requestAnimationFrame(Cr)},init_webgl:cu}};function pu(t){if(t!=null)for(var e=0;e<t.length;e++)t[e].register_plugin!=null&&t[e].register_plugin!=null&&t[e].register_plugin(ut)}function yn(t){if(t!=null)for(var e,r,n=0;n<t.length;n++)t[n].on_init!=null&&t[n].on_init!=null&&t[n].on_init(),t[n].name==null||t[n].name==null||t[n].version==null||t[n].version==null?(console.warn("Some of the registred plugins do not have name or version"),console.warn("Probably old version of the plugin used")):(e=t[n].name+"_crate_version",x[e]==null?console.log("Plugin "+t[n].name+" is present in JS bundle, but is not used in the rust code."):(r=x[e](),t[n].version!=r&&console.error("Plugin "+t[n].name+" version mismatchjs version: "+t[n].version+", crate version: "+r)))}function zt(t){Ft.push(t)}function wn(t){var e=WebAssembly.Module.imports(t);for(const r in e)ut.env[e[r].name]==null&&(console.warn("No "+e[r].name+" function in gl.js"),ut.env[e[r].name]=function(){console.warn("Missed function: "+e[r].name)})}function mu(t){var e=fetch(t);pu(Ft),typeof WebAssembly.compileStreaming=="function"?WebAssembly.compileStreaming(e).then(r=>(wn(r),WebAssembly.instantiate(r,ut))).then(r=>{Z=r.exports.memory,x=r.exports;var n=x.crate_version();Bt!=n&&console.error("Version mismatch: gl.js version is: "+Bt+", miniquad crate version is: "+n),yn(Ft),r.exports.main()}).catch(r=>{console.error(r)}):e.then(function(r){return r.arrayBuffer()}).then(function(r){return WebAssembly.compile(r)}).then(function(r){return wn(r),WebAssembly.instantiate(r,ut)}).then(function(r){Z=r.exports.memory,x=r.exports;var n=x.crate_version();Bt!=n&&console.error("Version mismatch: gl.js version is: "+Bt+", rust sapp-wasm crate version is: "+n),yn(Ft),r.exports.main()}).catch(r=>{console.error("WASM failed to load, probably incompatible gl.js version"),console.error(r)})}(function(){const t=window.AudioContext||window.webkitAudioContext;let e,r=new Map,n=[],s=1,i=1;function a(){if(e==null){e=new t,e.listener;{let D=window.AudioContext||window.webkitAudioContext,z=new D;var w=function(){console.log("fix"),e.resume();var ne=z.createBuffer(1,1,22050),C=z.createBufferSource();C.buffer=ne,C.connect(z.destination),C.start?C.start(0):C.play?C.play(0):C.noteOn&&C.noteOn(0),document.removeEventListener("touchstart",w),document.removeEventListener("touchend",w),document.removeEventListener("mousedown",w),document.removeEventListener("keydown",w)};document.addEventListener("touchstart",w),document.addEventListener("touchend",w),document.addEventListener("mousedown",w),document.addEventListener("keydown",w)}}}function o(w,D){let z=Z.buffer.slice(w,w+D),ne=s;return s+=1,e.decodeAudioData(z,function(C){r.set(ne,C)},function(C){console.error("Failed to decode audio buffer",C)}),ne}function c(w){return r.has(w)&&r.get(w)!=null}function f(){let w=n.find(D=>D.sound_key===0);return w!=null?w.source=e.createBufferSource():(w={sound_key:0,playback_key:0,source:e.createBufferSource(),gain_node:e.createGain(),ended:null},n.push(w)),w}function d(w){try{w.source.removeEventListener("ended",w.ended),w.source.disconnect(),w.gain_node.disconnect(),w.sound_key=0,w.playback_key=0}catch(D){console.error("Error stopping sound",D)}}function g(w,D,z){let ne=i++,C=f();C.sound_key=w,C.playback_key=ne,C.source.connect(C.gain_node),C.gain_node.connect(e.destination),C.gain_node.gain.value=D,C.source.loop=z,C.ended=function(){d(C)},C.source.addEventListener("ended",C.ended);try{C.source.buffer=r.get(w),C.source.start(0)}catch(Ae){console.error("Error starting sound",Ae)}return ne}function v(w,D){n.forEach(z=>{z.sound_key===w&&(z.gain_node.gain.value=D)})}function b(w){n.forEach(D=>{D.sound_key===w&&d(D)})}function y(w){b(w),r.delete(w)}function j(w){let D=n.find(z=>z.playback_key===w);D!=null&&d(D)}function K(w,D){let z=n.find(ne=>ne.playback_key===w);z!=null&&(z.gain_node.gain.value=D)}function ue(w){w.env.audio_init=a,w.env.audio_add_buffer=o,w.env.audio_play_buffer=g,w.env.audio_source_is_loaded=c,w.env.audio_source_set_volume=v,w.env.audio_source_stop=b,w.env.audio_source_delete=y,w.env.audio_playback_stop=j,w.env.audio_playback_set_volume=K}zt({register_plugin:ue,version:1,name:"macroquad_audio"})})(),function(){var t,e={};e[-1]=null,e[-2]=void 0,t=0;function r(i){i.env.js_create_string=function(a,o){var c=G(a,o);return s(c)},i.env.js_create_buffer=function(a,o){var c=new Uint8Array(Z.buffer,a,o),f=new Uint8Array(new ArrayBuffer(c.byteLength));return f.set(new Uint8Array(c)),s(f)},i.env.js_create_object=function(){var a={};return s(a)},i.env.js_set_field_f32=function(a,o,c,f){var d=G(o,c);e[a][d]=f},i.env.js_set_field_u32=function(a,o,c,f){var d=G(o,c);e[a][d]=f},i.env.js_set_field_string=function(a,o,c,f,d){var g=G(o,c),v=G(f,d);e[a][g]=v},i.env.js_unwrap_to_str=function(a,o,c){for(var f=e[a],d=n(f),g=d.length,v=new Uint8Array(Z.buffer,o,c),b=0;b<g;b++)v[b]=d[b]},i.env.js_unwrap_to_buf=function(a,o,c){for(var f=e[a],d=f.length,g=new Uint8Array(Z.buffer,o,c),v=0;v<d;v++)g[v]=f[v]},i.env.js_string_length=function(a){var o=e[a];return n(o).length},i.env.js_buf_length=function(a){var o=e[a];return o.length},i.env.js_free_object=function(a){delete e[a]},i.env.js_have_field=function(a,o,c){var f=G(o,c);return e[a][f]!==void 0},i.env.js_field_f32=function(a,o,c){var f=G(o,c);return e[a][f]},i.env.js_field_u32=function(a,o,c){var f=G(o,c);return e[a][f]},i.env.js_field=function(a,o,c){var f=G(o,c),d=e[a][f];return s(d)},i.env.js_field_num=function(a,o,c){var f=G(o,c);return e[a][f]}}zt({register_plugin:r,version:1,name:"sapp_jsutils"});function n(i){for(var a,o=[],c=0;c<i.length;c++)a=i.charCodeAt(c),a<128?o.push(a):a<2048?o.push(192|a>>6,128|a&63):a<55296||a>=57344?o.push(224|a>>12,128|a>>6&63,128|a&63):(c++,a=65536+((a&1023)<<10|i.charCodeAt(c)&1023),o.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|a&63));return o}function s(i){if(i==null)return-2;if(i===null)return-1;var a=t;return e[a]=i,t+=1,a}}(),function(){function t(){}function e(b){b.env.ws_connect=c,b.env.ws_is_connected=o,b.env.ws_send=f,b.env.ws_try_recv=d,b.env.http_make_request=v,b.env.http_try_recv=g}zt({register_plugin:e,on_init:t,version:1,name:"quad_net"});var r,n,s,i=0,a=[];function o(){return i}function c(b){n=new WebSocket(consume_js_object(b)),n.binaryType="arraybuffer",n.onopen=function(){i=1},n.onmessage=function(y){if(typeof y.data=="string")a.push({text:1,data:y.data});else{var j=new Uint8Array(y.data);a.push({text:0,data:j})}}}function f(b){var y=consume_js_object(b);y.buffer!=null?n.send(y.buffer):n.send(y)}function d(){return a.length!=0?js_object(a.shift()):-1}s=0,r={};function g(b){if(r[b]!=null&&r[b]!=null){var y=r[b];return r[b]=null,js_object(y)}return-1}function v(b,y,j,K){var ue,w,D,z,ne,C=s;s+=1,b==0&&(w="POST"),b==1&&(w="PUT"),b==2&&(w="GET"),b==3&&(w="DELETE"),z=consume_js_object(y),ne=consume_js_object(j),D=consume_js_object(K),ue=new XMLHttpRequest,ue.open(w,z,!0),ue.responseType="arraybuffer";for(const Ae in D)ue.setRequestHeader(Ae,D[Ae]);return ue.onload=function(){if(this.status==200){var Ae=new Uint8Array(this.response);r[C]=Ae}},ue.onerror=function(Ae){console.error("Failed to make a request"),console.error(Ae)},ue.send(ne),C}}();window.wasmInitialized=new Promise(async t=>{let e=await uu();zt({register_plugin:r=>r.wbg=e,on_init:()=>{nu(x),t()},version:"0.0.1",name:"wbg"}),mu("./wasm/autonomous-game_bg.wasm")});window.Buffer=Buffer;async function bu(){await window.wasmInitialized}bu().catch(console.error);
